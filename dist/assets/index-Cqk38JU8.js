function B1(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function uv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kh={exports:{}},il={},Qh={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oy;function $1(){if(oy)return Oe;oy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.iterator;function S(V){return V===null||typeof V!="object"?null:(V=E&&V[E]||V["@@iterator"],typeof V=="function"?V:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,W={};function z(V,Q,Ce){this.props=V,this.context=Q,this.refs=W,this.updater=Ce||O}z.prototype.isReactComponent={},z.prototype.setState=function(V,Q){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Q,"setState")},z.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function re(){}re.prototype=z.prototype;function te(V,Q,Ce){this.props=V,this.context=Q,this.refs=W,this.updater=Ce||O}var ce=te.prototype=new re;ce.constructor=te,H(ce,z.prototype),ce.isPureReactComponent=!0;var ke=Array.isArray,ie=Object.prototype.hasOwnProperty,xe={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function k(V,Q,Ce){var Ne,Ve={},U=null,ue=null;if(Q!=null)for(Ne in Q.ref!==void 0&&(ue=Q.ref),Q.key!==void 0&&(U=""+Q.key),Q)ie.call(Q,Ne)&&!R.hasOwnProperty(Ne)&&(Ve[Ne]=Q[Ne]);var Te=arguments.length-2;if(Te===1)Ve.children=Ce;else if(1<Te){for(var qe=Array(Te),mt=0;mt<Te;mt++)qe[mt]=arguments[mt+2];Ve.children=qe}if(V&&V.defaultProps)for(Ne in Te=V.defaultProps,Te)Ve[Ne]===void 0&&(Ve[Ne]=Te[Ne]);return{$$typeof:n,type:V,key:U,ref:ue,props:Ve,_owner:xe.current}}function C(V,Q){return{$$typeof:n,type:V.type,key:Q,ref:V.ref,props:V.props,_owner:V._owner}}function A(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function P(V){var Q={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(Ce){return Q[Ce]})}var N=/\/+/g;function I(V,Q){return typeof V=="object"&&V!==null&&V.key!=null?P(""+V.key):Q.toString(36)}function ye(V,Q,Ce,Ne,Ve){var U=typeof V;(U==="undefined"||U==="boolean")&&(V=null);var ue=!1;if(V===null)ue=!0;else switch(U){case"string":case"number":ue=!0;break;case"object":switch(V.$$typeof){case n:case e:ue=!0}}if(ue)return ue=V,Ve=Ve(ue),V=Ne===""?"."+I(ue,0):Ne,ke(Ve)?(Ce="",V!=null&&(Ce=V.replace(N,"$&/")+"/"),ye(Ve,Q,Ce,"",function(mt){return mt})):Ve!=null&&(A(Ve)&&(Ve=C(Ve,Ce+(!Ve.key||ue&&ue.key===Ve.key?"":(""+Ve.key).replace(N,"$&/")+"/")+V)),Q.push(Ve)),1;if(ue=0,Ne=Ne===""?".":Ne+":",ke(V))for(var Te=0;Te<V.length;Te++){U=V[Te];var qe=Ne+I(U,Te);ue+=ye(U,Q,Ce,qe,Ve)}else if(qe=S(V),typeof qe=="function")for(V=qe.call(V),Te=0;!(U=V.next()).done;)U=U.value,qe=Ne+I(U,Te++),ue+=ye(U,Q,Ce,qe,Ve);else if(U==="object")throw Q=String(V),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return ue}function Le(V,Q,Ce){if(V==null)return V;var Ne=[],Ve=0;return ye(V,Ne,"","",function(U){return Q.call(Ce,U,Ve++)}),Ne}function De(V){if(V._status===-1){var Q=V._result;Q=Q(),Q.then(function(Ce){(V._status===0||V._status===-1)&&(V._status=1,V._result=Ce)},function(Ce){(V._status===0||V._status===-1)&&(V._status=2,V._result=Ce)}),V._status===-1&&(V._status=0,V._result=Q)}if(V._status===1)return V._result.default;throw V._result}var $e={current:null},Z={transition:null},de={ReactCurrentDispatcher:$e,ReactCurrentBatchConfig:Z,ReactCurrentOwner:xe};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:Le,forEach:function(V,Q,Ce){Le(V,function(){Q.apply(this,arguments)},Ce)},count:function(V){var Q=0;return Le(V,function(){Q++}),Q},toArray:function(V){return Le(V,function(Q){return Q})||[]},only:function(V){if(!A(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Oe.Component=z,Oe.Fragment=t,Oe.Profiler=o,Oe.PureComponent=te,Oe.StrictMode=s,Oe.Suspense=y,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,Oe.act=ae,Oe.cloneElement=function(V,Q,Ce){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var Ne=H({},V.props),Ve=V.key,U=V.ref,ue=V._owner;if(Q!=null){if(Q.ref!==void 0&&(U=Q.ref,ue=xe.current),Q.key!==void 0&&(Ve=""+Q.key),V.type&&V.type.defaultProps)var Te=V.type.defaultProps;for(qe in Q)ie.call(Q,qe)&&!R.hasOwnProperty(qe)&&(Ne[qe]=Q[qe]===void 0&&Te!==void 0?Te[qe]:Q[qe])}var qe=arguments.length-2;if(qe===1)Ne.children=Ce;else if(1<qe){Te=Array(qe);for(var mt=0;mt<qe;mt++)Te[mt]=arguments[mt+2];Ne.children=Te}return{$$typeof:n,type:V.type,key:Ve,ref:U,props:Ne,_owner:ue}},Oe.createContext=function(V){return V={$$typeof:d,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:l,_context:V},V.Consumer=V},Oe.createElement=k,Oe.createFactory=function(V){var Q=k.bind(null,V);return Q.type=V,Q},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(V){return{$$typeof:p,render:V}},Oe.isValidElement=A,Oe.lazy=function(V){return{$$typeof:w,_payload:{_status:-1,_result:V},_init:De}},Oe.memo=function(V,Q){return{$$typeof:v,type:V,compare:Q===void 0?null:Q}},Oe.startTransition=function(V){var Q=Z.transition;Z.transition={};try{V()}finally{Z.transition=Q}},Oe.unstable_act=ae,Oe.useCallback=function(V,Q){return $e.current.useCallback(V,Q)},Oe.useContext=function(V){return $e.current.useContext(V)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(V){return $e.current.useDeferredValue(V)},Oe.useEffect=function(V,Q){return $e.current.useEffect(V,Q)},Oe.useId=function(){return $e.current.useId()},Oe.useImperativeHandle=function(V,Q,Ce){return $e.current.useImperativeHandle(V,Q,Ce)},Oe.useInsertionEffect=function(V,Q){return $e.current.useInsertionEffect(V,Q)},Oe.useLayoutEffect=function(V,Q){return $e.current.useLayoutEffect(V,Q)},Oe.useMemo=function(V,Q){return $e.current.useMemo(V,Q)},Oe.useReducer=function(V,Q,Ce){return $e.current.useReducer(V,Q,Ce)},Oe.useRef=function(V){return $e.current.useRef(V)},Oe.useState=function(V){return $e.current.useState(V)},Oe.useSyncExternalStore=function(V,Q,Ce){return $e.current.useSyncExternalStore(V,Q,Ce)},Oe.useTransition=function(){return $e.current.useTransition()},Oe.version="18.3.1",Oe}var ay;function Hf(){return ay||(ay=1,Qh.exports=$1()),Qh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ly;function q1(){if(ly)return il;ly=1;var n=Hf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(p,y,v){var w,E={},S=null,O=null;v!==void 0&&(S=""+v),y.key!==void 0&&(S=""+y.key),y.ref!==void 0&&(O=y.ref);for(w in y)s.call(y,w)&&!l.hasOwnProperty(w)&&(E[w]=y[w]);if(p&&p.defaultProps)for(w in y=p.defaultProps,y)E[w]===void 0&&(E[w]=y[w]);return{$$typeof:e,type:p,key:S,ref:O,props:E,_owner:o.current}}return il.Fragment=t,il.jsx=d,il.jsxs=d,il}var uy;function W1(){return uy||(uy=1,Kh.exports=q1()),Kh.exports}var f=W1(),q=Hf();const Gc=uv(q),H1=B1({__proto__:null,default:Gc},[q]);var oc={},Yh={exports:{}},sn={},Jh={exports:{}},Xh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy;function G1(){return cy||(cy=1,(function(n){function e(Z,de){var ae=Z.length;Z.push(de);e:for(;0<ae;){var V=ae-1>>>1,Q=Z[V];if(0<o(Q,de))Z[V]=de,Z[ae]=Q,ae=V;else break e}}function t(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var de=Z[0],ae=Z.pop();if(ae!==de){Z[0]=ae;e:for(var V=0,Q=Z.length,Ce=Q>>>1;V<Ce;){var Ne=2*(V+1)-1,Ve=Z[Ne],U=Ne+1,ue=Z[U];if(0>o(Ve,ae))U<Q&&0>o(ue,Ve)?(Z[V]=ue,Z[U]=ae,V=U):(Z[V]=Ve,Z[Ne]=ae,V=Ne);else if(U<Q&&0>o(ue,ae))Z[V]=ue,Z[U]=ae,V=U;else break e}}return de}function o(Z,de){var ae=Z.sortIndex-de.sortIndex;return ae!==0?ae:Z.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var d=Date,p=d.now();n.unstable_now=function(){return d.now()-p}}var y=[],v=[],w=1,E=null,S=3,O=!1,H=!1,W=!1,z=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ce(Z){for(var de=t(v);de!==null;){if(de.callback===null)s(v);else if(de.startTime<=Z)s(v),de.sortIndex=de.expirationTime,e(y,de);else break;de=t(v)}}function ke(Z){if(W=!1,ce(Z),!H)if(t(y)!==null)H=!0,De(ie);else{var de=t(v);de!==null&&$e(ke,de.startTime-Z)}}function ie(Z,de){H=!1,W&&(W=!1,re(k),k=-1),O=!0;var ae=S;try{for(ce(de),E=t(y);E!==null&&(!(E.expirationTime>de)||Z&&!P());){var V=E.callback;if(typeof V=="function"){E.callback=null,S=E.priorityLevel;var Q=V(E.expirationTime<=de);de=n.unstable_now(),typeof Q=="function"?E.callback=Q:E===t(y)&&s(y),ce(de)}else s(y);E=t(y)}if(E!==null)var Ce=!0;else{var Ne=t(v);Ne!==null&&$e(ke,Ne.startTime-de),Ce=!1}return Ce}finally{E=null,S=ae,O=!1}}var xe=!1,R=null,k=-1,C=5,A=-1;function P(){return!(n.unstable_now()-A<C)}function N(){if(R!==null){var Z=n.unstable_now();A=Z;var de=!0;try{de=R(!0,Z)}finally{de?I():(xe=!1,R=null)}}else xe=!1}var I;if(typeof te=="function")I=function(){te(N)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,Le=ye.port2;ye.port1.onmessage=N,I=function(){Le.postMessage(null)}}else I=function(){z(N,0)};function De(Z){R=Z,xe||(xe=!0,I())}function $e(Z,de){k=z(function(){Z(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_continueExecution=function(){H||O||(H=!0,De(ie))},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(y)},n.unstable_next=function(Z){switch(S){case 1:case 2:case 3:var de=3;break;default:de=S}var ae=S;S=de;try{return Z()}finally{S=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Z,de){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ae=S;S=Z;try{return de()}finally{S=ae}},n.unstable_scheduleCallback=function(Z,de,ae){var V=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?V+ae:V):ae=V,Z){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ae+Q,Z={id:w++,callback:de,priorityLevel:Z,startTime:ae,expirationTime:Q,sortIndex:-1},ae>V?(Z.sortIndex=ae,e(v,Z),t(y)===null&&Z===t(v)&&(W?(re(k),k=-1):W=!0,$e(ke,ae-V))):(Z.sortIndex=Q,e(y,Z),H||O||(H=!0,De(ie))),Z},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(Z){var de=S;return function(){var ae=S;S=de;try{return Z.apply(this,arguments)}finally{S=ae}}}})(Xh)),Xh}var dy;function K1(){return dy||(dy=1,Jh.exports=G1()),Jh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy;function Q1(){if(hy)return sn;hy=1;var n=Hf(),e=K1();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(r,i){d(r,i),d(r+"Capture",i)}function d(r,i){for(o[r]=i,r=0;r<i.length;r++)s.add(i[r])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},E={};function S(r){return y.call(E,r)?!0:y.call(w,r)?!1:v.test(r)?E[r]=!0:(w[r]=!0,!1)}function O(r,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function H(r,i,a,c){if(i===null||typeof i>"u"||O(r,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function W(r,i,a,c,h,m,x){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=r,this.type=i,this.sanitizeURL=m,this.removeEmptyString=x}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){z[r]=new W(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];z[i]=new W(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){z[r]=new W(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){z[r]=new W(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){z[r]=new W(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){z[r]=new W(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){z[r]=new W(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){z[r]=new W(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){z[r]=new W(r,5,!1,r.toLowerCase(),null,!1,!1)});var re=/[\-:]([a-z])/g;function te(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(re,te);z[i]=new W(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(re,te);z[i]=new W(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(re,te);z[i]=new W(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){z[r]=new W(r,1,!1,r.toLowerCase(),null,!1,!1)}),z.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){z[r]=new W(r,1,!1,r.toLowerCase(),null,!0,!0)});function ce(r,i,a,c){var h=z.hasOwnProperty(i)?z[i]:null;(h!==null?h.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(H(i,a,h,c)&&(a=null),c||h===null?S(i)&&(a===null?r.removeAttribute(i):r.setAttribute(i,""+a)):h.mustUseProperty?r[h.propertyName]=a===null?h.type===3?!1:"":a:(i=h.attributeName,c=h.attributeNamespace,a===null?r.removeAttribute(i):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,c?r.setAttributeNS(c,i,a):r.setAttribute(i,a))))}var ke=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),xe=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),P=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),Le=Symbol.for("react.memo"),De=Symbol.for("react.lazy"),$e=Symbol.for("react.offscreen"),Z=Symbol.iterator;function de(r){return r===null||typeof r!="object"?null:(r=Z&&r[Z]||r["@@iterator"],typeof r=="function"?r:null)}var ae=Object.assign,V;function Q(r){if(V===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);V=i&&i[1]||""}return`
`+V+r}var Ce=!1;function Ne(r,i){if(!r||Ce)return"";Ce=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var c=B}Reflect.construct(r,[],i)}else{try{i.call()}catch(B){c=B}r.call(i.prototype)}else{try{throw Error()}catch(B){c=B}r()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var h=B.stack.split(`
`),m=c.stack.split(`
`),x=h.length-1,b=m.length-1;1<=x&&0<=b&&h[x]!==m[b];)b--;for(;1<=x&&0<=b;x--,b--)if(h[x]!==m[b]){if(x!==1||b!==1)do if(x--,b--,0>b||h[x]!==m[b]){var D=`
`+h[x].replace(" at new "," at ");return r.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",r.displayName)),D}while(1<=x&&0<=b);break}}}finally{Ce=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?Q(r):""}function Ve(r){switch(r.tag){case 5:return Q(r.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return r=Ne(r.type,!1),r;case 11:return r=Ne(r.type.render,!1),r;case 1:return r=Ne(r.type,!0),r;default:return""}}function U(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case R:return"Fragment";case xe:return"Portal";case C:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case ye:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case P:return(r.displayName||"Context")+".Consumer";case A:return(r._context.displayName||"Context")+".Provider";case N:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Le:return i=r.displayName||null,i!==null?i:U(r.type)||"Memo";case De:i=r._payload,r=r._init;try{return U(r(i))}catch{}}return null}function ue(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(i);case 8:return i===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Te(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function qe(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function mt(r){var i=qe(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),c=""+r[i];if(!r.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,m=a.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return h.call(this)},set:function(x){c=""+x,m.call(this,x)}}),Object.defineProperty(r,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function jn(r){r._valueTracker||(r._valueTracker=mt(r))}function ti(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return r&&(c=qe(r)?r.checked?"true":"false":r.value),r=c,r!==a?(i.setValue(r),!0):!1}function ts(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Zi(r,i){var a=i.checked;return ae({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Wl(r,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Te(i.value!=null?i.value:a),r._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function eo(r,i){i=i.checked,i!=null&&ce(r,"checked",i,!1)}function ni(r,i){eo(r,i);var a=Te(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(c==="submit"||c==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?gt(r,i.type,a):i.hasOwnProperty("defaultValue")&&gt(r,i.type,Te(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function ha(r,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,a||i===r.value||(r.value=i),r.defaultValue=i}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function gt(r,i,a){(i!=="number"||ts(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var ct=Array.isArray;function Vn(r,i,a,c){if(r=r.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<r.length;a++)h=i.hasOwnProperty("$"+r[a].value),r[a].selected!==h&&(r[a].selected=h),h&&c&&(r[a].defaultSelected=!0)}else{for(a=""+Te(a),i=null,h=0;h<r.length;h++){if(r[h].value===a){r[h].selected=!0,c&&(r[h].defaultSelected=!0);return}i!==null||r[h].disabled||(i=r[h])}i!==null&&(i.selected=!0)}}function fa(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function pa(r,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(ct(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}r._wrapperState={initialValue:Te(a)}}function Hl(r,i){var a=Te(i.value),c=Te(i.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),i.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),c!=null&&(r.defaultValue=""+c)}function ns(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function ma(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function to(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?ma(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var rs,Gl=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,h){MSApp.execUnsafeLocalFunction(function(){return r(i,a,c,h)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(rs=rs||document.createElement("div"),rs.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=rs.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function ri(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var ss={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kl=["Webkit","ms","Moz","O"];Object.keys(ss).forEach(function(r){Kl.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),ss[i]=ss[r]})});function is(r,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||ss.hasOwnProperty(r)&&ss[r]?(""+i).trim():i+"px"}function no(r,i){r=r.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,h=is(a,i[a],c);a==="float"&&(a="cssFloat"),c?r.setProperty(a,h):r[a]=h}}var ga=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function On(r,i){if(i){if(ga[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function ro(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var os=null;function so(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Cr=null,Nr=null,lt=null;function ya(r){if(r=qa(r)){if(typeof Cr!="function")throw Error(t(280));var i=r.stateNode;i&&(i=xu(i),Cr(r.stateNode,r.type,i))}}function as(r){Nr?lt?lt.push(r):lt=[r]:Nr=r}function ls(){if(Nr){var r=Nr,i=lt;if(lt=Nr=null,ya(r),i)for(r=0;r<i.length;r++)ya(i[r])}}function Ql(r,i){return r(i)}function Yl(){}var er=!1;function Jl(r,i,a){if(er)return r(i,a);er=!0;try{return Ql(r,i,a)}finally{er=!1,(Nr!==null||lt!==null)&&(Yl(),ls())}}function si(r,i){var a=r.stateNode;if(a===null)return null;var c=xu(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var us=!1;if(p)try{var cs={};Object.defineProperty(cs,"passive",{get:function(){us=!0}}),window.addEventListener("test",cs,cs),window.removeEventListener("test",cs,cs)}catch{us=!1}function Xl(r,i,a,c,h,m,x,b,D){var B=Array.prototype.slice.call(arguments,3);try{i.apply(a,B)}catch(J){this.onError(J)}}var Rr=!1,tr=null,io=!1,Tn=null,Zl={onError:function(r){Rr=!0,tr=r}};function eu(r,i,a,c,h,m,x,b,D){Rr=!1,tr=null,Xl.apply(Zl,arguments)}function va(r,i,a,c,h,m,x,b,D){if(eu.apply(this,arguments),Rr){if(Rr){var B=tr;Rr=!1,tr=null}else throw Error(t(198));io||(io=!0,Tn=B)}}function Ln(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function _a(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function tu(r){if(Ln(r)!==r)throw Error(t(188))}function nu(r){var i=r.alternate;if(!i){if(i=Ln(r),i===null)throw Error(t(188));return i!==r?null:r}for(var a=r,c=i;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(c=h.return,c!==null){a=c;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return tu(h),r;if(m===c)return tu(h),i;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=h,c=m;else{for(var x=!1,b=h.child;b;){if(b===a){x=!0,a=h,c=m;break}if(b===c){x=!0,c=h,a=m;break}b=b.sibling}if(!x){for(b=m.child;b;){if(b===a){x=!0,a=m,c=h;break}if(b===c){x=!0,c=m,a=h;break}b=b.sibling}if(!x)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:i}function ru(r){return r=nu(r),r!==null?ii(r):null}function ii(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=ii(r);if(i!==null)return i;r=r.sibling}return null}var wa=e.unstable_scheduleCallback,oo=e.unstable_cancelCallback,oi=e.unstable_shouldYield,Pr=e.unstable_requestPaint,Ze=e.unstable_now,Sd=e.unstable_getCurrentPriorityLevel,ao=e.unstable_ImmediatePriority,xa=e.unstable_UserBlockingPriority,ai=e.unstable_NormalPriority,Ea=e.unstable_LowPriority,lo=e.unstable_IdlePriority,li=null,dn=null;function su(r){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(li,r,void 0,(r.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:ui,nr=Math.log,In=Math.LN2;function ui(r){return r>>>=0,r===0?32:31-(nr(r)/In|0)|0}var rr=64,ds=4194304;function Ge(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Dr(r,i){var a=r.pendingLanes;if(a===0)return 0;var c=0,h=r.suspendedLanes,m=r.pingedLanes,x=a&268435455;if(x!==0){var b=x&~h;b!==0?c=Ge(b):(m&=x,m!==0&&(c=Ge(m)))}else x=a&~h,x!==0?c=Ge(x):m!==0&&(c=Ge(m));if(c===0)return 0;if(i!==0&&i!==c&&(i&h)===0&&(h=c&-c,m=i&-i,h>=m||h===16&&(m&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=c;0<i;)a=31-hn(i),h=1<<a,c|=r[a],i&=~h;return c}function ci(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function di(r,i){for(var a=r.suspendedLanes,c=r.pingedLanes,h=r.expirationTimes,m=r.pendingLanes;0<m;){var x=31-hn(m),b=1<<x,D=h[x];D===-1?((b&a)===0||(b&c)!==0)&&(h[x]=ci(b,i)):D<=i&&(r.expiredLanes|=b),m&=~b}}function Ta(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Ia(){var r=rr;return rr<<=1,(rr&4194240)===0&&(rr=64),r}function Sa(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function hi(r,i,a){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-hn(i),r[i]=a}function kd(r,i){var a=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var c=r.eventTimes;for(r=r.expirationTimes;0<a;){var h=31-hn(a),m=1<<h;i[h]=0,c[h]=-1,r[h]=-1,a&=~m}}function ka(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var c=31-hn(a),h=1<<c;h&i|r[c]&i&&(r[c]|=i),a&=~h}}var ze=0;function sr(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var ba,uo,Aa,Ca,Na,ir=!1,co=[],or=null,ar=null,Dt=null,fi=new Map,jr=new Map,fn=[],iu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hs(r,i){switch(r){case"focusin":case"focusout":or=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":fi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":jr.delete(i.pointerId)}}function Mn(r,i,a,c,h,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[h]},i!==null&&(i=qa(i),i!==null&&uo(i)),r):(r.eventSystemFlags|=c,i=r.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),r)}function ou(r,i,a,c,h){switch(i){case"focusin":return or=Mn(or,r,i,a,c,h),!0;case"dragenter":return ar=Mn(ar,r,i,a,c,h),!0;case"mouseover":return Dt=Mn(Dt,r,i,a,c,h),!0;case"pointerover":var m=h.pointerId;return fi.set(m,Mn(fi.get(m)||null,r,i,a,c,h)),!0;case"gotpointercapture":return m=h.pointerId,jr.set(m,Mn(jr.get(m)||null,r,i,a,c,h)),!0}return!1}function ho(r){var i=yi(r.target);if(i!==null){var a=Ln(i);if(a!==null){if(i=a.tag,i===13){if(i=_a(a),i!==null){r.blockedOn=i,Na(r.priority,function(){Aa(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ye(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=fo(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var c=new a.constructor(a.type,a);os=c,a.target.dispatchEvent(c),os=null}else return i=qa(a),i!==null&&uo(i),r.blockedOn=a,!1;i.shift()}return!0}function au(r,i,a){Ye(r)&&a.delete(i)}function bd(){ir=!1,or!==null&&Ye(or)&&(or=null),ar!==null&&Ye(ar)&&(ar=null),Dt!==null&&Ye(Dt)&&(Dt=null),fi.forEach(au),jr.forEach(au)}function fs(r,i){r.blockedOn===i&&(r.blockedOn=null,ir||(ir=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bd)))}function ps(r){function i(h){return fs(h,r)}if(0<co.length){fs(co[0],r);for(var a=1;a<co.length;a++){var c=co[a];c.blockedOn===r&&(c.blockedOn=null)}}for(or!==null&&fs(or,r),ar!==null&&fs(ar,r),Dt!==null&&fs(Dt,r),fi.forEach(i),jr.forEach(i),a=0;a<fn.length;a++)c=fn[a],c.blockedOn===r&&(c.blockedOn=null);for(;0<fn.length&&(a=fn[0],a.blockedOn===null);)ho(a),a.blockedOn===null&&fn.shift()}var Vr=ke.ReactCurrentBatchConfig,Or=!0;function lr(r,i,a,c){var h=ze,m=Vr.transition;Vr.transition=null;try{ze=1,Ra(r,i,a,c)}finally{ze=h,Vr.transition=m}}function lu(r,i,a,c){var h=ze,m=Vr.transition;Vr.transition=null;try{ze=4,Ra(r,i,a,c)}finally{ze=h,Vr.transition=m}}function Ra(r,i,a,c){if(Or){var h=fo(r,i,a,c);if(h===null)Md(r,i,c,ur,a),hs(r,c);else if(ou(h,r,i,a,c))c.stopPropagation();else if(hs(r,c),i&4&&-1<iu.indexOf(r)){for(;h!==null;){var m=qa(h);if(m!==null&&ba(m),m=fo(r,i,a,c),m===null&&Md(r,i,c,ur,a),m===h)break;h=m}h!==null&&c.stopPropagation()}else Md(r,i,c,null,a)}}var ur=null;function fo(r,i,a,c){if(ur=null,r=so(c),r=yi(r),r!==null)if(i=Ln(r),i===null)r=null;else if(a=i.tag,a===13){if(r=_a(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return ur=r,null}function po(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sd()){case ao:return 1;case xa:return 4;case ai:case Ea:return 16;case lo:return 536870912;default:return 16}default:return 16}}var pn=null,mo=null,Lr=null;function uu(){if(Lr)return Lr;var r,i=mo,a=i.length,c,h="value"in pn?pn.value:pn.textContent,m=h.length;for(r=0;r<a&&i[r]===h[r];r++);var x=a-r;for(c=1;c<=x&&i[a-c]===h[m-c];c++);return Lr=h.slice(r,1<c?1-c:void 0)}function pi(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function cr(){return!0}function Pa(){return!1}function Ft(r){function i(a,c,h,m,x){this._reactName=a,this._targetInst=h,this.type=c,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var b in r)r.hasOwnProperty(b)&&(a=r[b],this[b]=a?a(m):m[b]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?cr:Pa,this.isPropagationStopped=Pa,this}return ae(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=cr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=cr)},persist:function(){},isPersistent:cr}),i}var dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mi=Ft(dr),ms=ae({},dr,{view:0,detail:0}),go=Ft(ms),yo,vo,mn,gi=ae({},ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Re,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==mn&&(mn&&r.type==="mousemove"?(yo=r.screenX-mn.screenX,vo=r.screenY-mn.screenY):vo=yo=0,mn=r),yo)},movementY:function(r){return"movementY"in r?r.movementY:vo}}),Da=Ft(gi),cu=ae({},gi,{dataTransfer:0}),du=Ft(cu),_o=ae({},ms,{relatedTarget:0}),jt=Ft(_o),hu=ae({},dr,{animationName:0,elapsedTime:0,pseudoElement:0}),fu=Ft(hu),gs=ae({},dr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),u=Ft(gs),g=ae({},dr,{data:0}),_=Ft(g),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ne(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=$[r])?!!i[r]:!1}function Re(){return ne}var dt=ae({},ms,{key:function(r){if(r.key){var i=T[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=pi(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?M[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Re,charCode:function(r){return r.type==="keypress"?pi(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?pi(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Qe=Ft(dt),yt=ae({},gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gn=Ft(yt),Mr=ae({},ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Re}),hr=Ft(Mr),fr=ae({},dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),wo=Ft(fr),ja=ae({},gi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ox=Ft(ja),Lx=[9,13,27,32],Ad=p&&"CompositionEvent"in window,Va=null;p&&"documentMode"in document&&(Va=document.documentMode);var Mx=p&&"TextEvent"in window&&!Va,Xp=p&&(!Ad||Va&&8<Va&&11>=Va),Zp=" ",em=!1;function tm(r,i){switch(r){case"keyup":return Lx.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var xo=!1;function Ux(r,i){switch(r){case"compositionend":return nm(i);case"keypress":return i.which!==32?null:(em=!0,Zp);case"textInput":return r=i.data,r===Zp&&em?null:r;default:return null}}function Fx(r,i){if(xo)return r==="compositionend"||!Ad&&tm(r,i)?(r=uu(),Lr=mo=pn=null,xo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Xp&&i.locale!=="ko"?null:i.data;default:return null}}var zx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rm(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!zx[r.type]:i==="textarea"}function sm(r,i,a,c){as(c),i=vu(i,"onChange"),0<i.length&&(a=new mi("onChange","change",null,a,c),r.push({event:a,listeners:i}))}var Oa=null,La=null;function Bx(r){Em(r,0)}function pu(r){var i=ko(r);if(ti(i))return r}function $x(r,i){if(r==="change")return i}var im=!1;if(p){var Cd;if(p){var Nd="oninput"in document;if(!Nd){var om=document.createElement("div");om.setAttribute("oninput","return;"),Nd=typeof om.oninput=="function"}Cd=Nd}else Cd=!1;im=Cd&&(!document.documentMode||9<document.documentMode)}function am(){Oa&&(Oa.detachEvent("onpropertychange",lm),La=Oa=null)}function lm(r){if(r.propertyName==="value"&&pu(La)){var i=[];sm(i,La,r,so(r)),Jl(Bx,i)}}function qx(r,i,a){r==="focusin"?(am(),Oa=i,La=a,Oa.attachEvent("onpropertychange",lm)):r==="focusout"&&am()}function Wx(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return pu(La)}function Hx(r,i){if(r==="click")return pu(i)}function Gx(r,i){if(r==="input"||r==="change")return pu(i)}function Kx(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Un=typeof Object.is=="function"?Object.is:Kx;function Ma(r,i){if(Un(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var h=a[c];if(!y.call(i,h)||!Un(r[h],i[h]))return!1}return!0}function um(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function cm(r,i){var a=um(r);r=0;for(var c;a;){if(a.nodeType===3){if(c=r+a.textContent.length,r<=i&&c>=i)return{node:a,offset:i-r};r=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=um(a)}}function dm(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?dm(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function hm(){for(var r=window,i=ts();i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=ts(r.document)}return i}function Rd(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function Qx(r){var i=hm(),a=r.focusedElem,c=r.selectionRange;if(i!==a&&a&&a.ownerDocument&&dm(a.ownerDocument.documentElement,a)){if(c!==null&&Rd(a)){if(i=c.start,r=c.end,r===void 0&&(r=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(r,a.value.length);else if(r=(i=a.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var h=a.textContent.length,m=Math.min(c.start,h);c=c.end===void 0?m:Math.min(c.end,h),!r.extend&&m>c&&(h=c,c=m,m=h),h=cm(a,m);var x=cm(a,c);h&&x&&(r.rangeCount!==1||r.anchorNode!==h.node||r.anchorOffset!==h.offset||r.focusNode!==x.node||r.focusOffset!==x.offset)&&(i=i.createRange(),i.setStart(h.node,h.offset),r.removeAllRanges(),m>c?(r.addRange(i),r.extend(x.node,x.offset)):(i.setEnd(x.node,x.offset),r.addRange(i)))}}for(i=[],r=a;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)r=i[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Yx=p&&"documentMode"in document&&11>=document.documentMode,Eo=null,Pd=null,Ua=null,Dd=!1;function fm(r,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Dd||Eo==null||Eo!==ts(c)||(c=Eo,"selectionStart"in c&&Rd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ua&&Ma(Ua,c)||(Ua=c,c=vu(Pd,"onSelect"),0<c.length&&(i=new mi("onSelect","select",null,i,a),r.push({event:i,listeners:c}),i.target=Eo)))}function mu(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var To={animationend:mu("Animation","AnimationEnd"),animationiteration:mu("Animation","AnimationIteration"),animationstart:mu("Animation","AnimationStart"),transitionend:mu("Transition","TransitionEnd")},jd={},pm={};p&&(pm=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function gu(r){if(jd[r])return jd[r];if(!To[r])return r;var i=To[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in pm)return jd[r]=i[a];return r}var mm=gu("animationend"),gm=gu("animationiteration"),ym=gu("animationstart"),vm=gu("transitionend"),_m=new Map,wm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ys(r,i){_m.set(r,i),l(i,[r])}for(var Vd=0;Vd<wm.length;Vd++){var Od=wm[Vd],Jx=Od.toLowerCase(),Xx=Od[0].toUpperCase()+Od.slice(1);ys(Jx,"on"+Xx)}ys(mm,"onAnimationEnd"),ys(gm,"onAnimationIteration"),ys(ym,"onAnimationStart"),ys("dblclick","onDoubleClick"),ys("focusin","onFocus"),ys("focusout","onBlur"),ys(vm,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fa));function xm(r,i,a){var c=r.type||"unknown-event";r.currentTarget=a,va(c,i,void 0,r),r.currentTarget=null}function Em(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var c=r[a],h=c.event;c=c.listeners;e:{var m=void 0;if(i)for(var x=c.length-1;0<=x;x--){var b=c[x],D=b.instance,B=b.currentTarget;if(b=b.listener,D!==m&&h.isPropagationStopped())break e;xm(h,b,B),m=D}else for(x=0;x<c.length;x++){if(b=c[x],D=b.instance,B=b.currentTarget,b=b.listener,D!==m&&h.isPropagationStopped())break e;xm(h,b,B),m=D}}}if(io)throw r=Tn,io=!1,Tn=null,r}function et(r,i){var a=i[qd];a===void 0&&(a=i[qd]=new Set);var c=r+"__bubble";a.has(c)||(Tm(i,r,2,!1),a.add(c))}function Ld(r,i,a){var c=0;i&&(c|=4),Tm(a,r,c,i)}var yu="_reactListening"+Math.random().toString(36).slice(2);function za(r){if(!r[yu]){r[yu]=!0,s.forEach(function(a){a!=="selectionchange"&&(Zx.has(a)||Ld(a,!1,r),Ld(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[yu]||(i[yu]=!0,Ld("selectionchange",!1,i))}}function Tm(r,i,a,c){switch(po(i)){case 1:var h=lr;break;case 4:h=lu;break;default:h=Ra}a=h.bind(null,i,a,r),h=void 0,!us||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),c?h!==void 0?r.addEventListener(i,a,{capture:!0,passive:h}):r.addEventListener(i,a,!0):h!==void 0?r.addEventListener(i,a,{passive:h}):r.addEventListener(i,a,!1)}function Md(r,i,a,c,h){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var b=c.stateNode.containerInfo;if(b===h||b.nodeType===8&&b.parentNode===h)break;if(x===4)for(x=c.return;x!==null;){var D=x.tag;if((D===3||D===4)&&(D=x.stateNode.containerInfo,D===h||D.nodeType===8&&D.parentNode===h))return;x=x.return}for(;b!==null;){if(x=yi(b),x===null)return;if(D=x.tag,D===5||D===6){c=m=x;continue e}b=b.parentNode}}c=c.return}Jl(function(){var B=m,J=so(a),X=[];e:{var Y=_m.get(r);if(Y!==void 0){var oe=mi,fe=r;switch(r){case"keypress":if(pi(a)===0)break e;case"keydown":case"keyup":oe=Qe;break;case"focusin":fe="focus",oe=jt;break;case"focusout":fe="blur",oe=jt;break;case"beforeblur":case"afterblur":oe=jt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Da;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=hr;break;case mm:case gm:case ym:oe=fu;break;case vm:oe=wo;break;case"scroll":oe=go;break;case"wheel":oe=Ox;break;case"copy":case"cut":case"paste":oe=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=gn}var pe=(i&4)!==0,ht=!pe&&r==="scroll",L=pe?Y!==null?Y+"Capture":null:Y;pe=[];for(var j=B,F;j!==null;){F=j;var ee=F.stateNode;if(F.tag===5&&ee!==null&&(F=ee,L!==null&&(ee=si(j,L),ee!=null&&pe.push(Ba(j,ee,F)))),ht)break;j=j.return}0<pe.length&&(Y=new oe(Y,fe,null,a,J),X.push({event:Y,listeners:pe}))}}if((i&7)===0){e:{if(Y=r==="mouseover"||r==="pointerover",oe=r==="mouseout"||r==="pointerout",Y&&a!==os&&(fe=a.relatedTarget||a.fromElement)&&(yi(fe)||fe[Ur]))break e;if((oe||Y)&&(Y=J.window===J?J:(Y=J.ownerDocument)?Y.defaultView||Y.parentWindow:window,oe?(fe=a.relatedTarget||a.toElement,oe=B,fe=fe?yi(fe):null,fe!==null&&(ht=Ln(fe),fe!==ht||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(oe=null,fe=B),oe!==fe)){if(pe=Da,ee="onMouseLeave",L="onMouseEnter",j="mouse",(r==="pointerout"||r==="pointerover")&&(pe=gn,ee="onPointerLeave",L="onPointerEnter",j="pointer"),ht=oe==null?Y:ko(oe),F=fe==null?Y:ko(fe),Y=new pe(ee,j+"leave",oe,a,J),Y.target=ht,Y.relatedTarget=F,ee=null,yi(J)===B&&(pe=new pe(L,j+"enter",fe,a,J),pe.target=F,pe.relatedTarget=ht,ee=pe),ht=ee,oe&&fe)t:{for(pe=oe,L=fe,j=0,F=pe;F;F=Io(F))j++;for(F=0,ee=L;ee;ee=Io(ee))F++;for(;0<j-F;)pe=Io(pe),j--;for(;0<F-j;)L=Io(L),F--;for(;j--;){if(pe===L||L!==null&&pe===L.alternate)break t;pe=Io(pe),L=Io(L)}pe=null}else pe=null;oe!==null&&Im(X,Y,oe,pe,!1),fe!==null&&ht!==null&&Im(X,ht,fe,pe,!0)}}e:{if(Y=B?ko(B):window,oe=Y.nodeName&&Y.nodeName.toLowerCase(),oe==="select"||oe==="input"&&Y.type==="file")var me=$x;else if(rm(Y))if(im)me=Gx;else{me=Wx;var _e=qx}else(oe=Y.nodeName)&&oe.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(me=Hx);if(me&&(me=me(r,B))){sm(X,me,a,J);break e}_e&&_e(r,Y,B),r==="focusout"&&(_e=Y._wrapperState)&&_e.controlled&&Y.type==="number"&&gt(Y,"number",Y.value)}switch(_e=B?ko(B):window,r){case"focusin":(rm(_e)||_e.contentEditable==="true")&&(Eo=_e,Pd=B,Ua=null);break;case"focusout":Ua=Pd=Eo=null;break;case"mousedown":Dd=!0;break;case"contextmenu":case"mouseup":case"dragend":Dd=!1,fm(X,a,J);break;case"selectionchange":if(Yx)break;case"keydown":case"keyup":fm(X,a,J)}var we;if(Ad)e:{switch(r){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else xo?tm(r,a)&&(Ie="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(Xp&&a.locale!=="ko"&&(xo||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&xo&&(we=uu()):(pn=J,mo="value"in pn?pn.value:pn.textContent,xo=!0)),_e=vu(B,Ie),0<_e.length&&(Ie=new _(Ie,r,null,a,J),X.push({event:Ie,listeners:_e}),we?Ie.data=we:(we=nm(a),we!==null&&(Ie.data=we)))),(we=Mx?Ux(r,a):Fx(r,a))&&(B=vu(B,"onBeforeInput"),0<B.length&&(J=new _("onBeforeInput","beforeinput",null,a,J),X.push({event:J,listeners:B}),J.data=we))}Em(X,i)})}function Ba(r,i,a){return{instance:r,listener:i,currentTarget:a}}function vu(r,i){for(var a=i+"Capture",c=[];r!==null;){var h=r,m=h.stateNode;h.tag===5&&m!==null&&(h=m,m=si(r,a),m!=null&&c.unshift(Ba(r,m,h)),m=si(r,i),m!=null&&c.push(Ba(r,m,h))),r=r.return}return c}function Io(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Im(r,i,a,c,h){for(var m=i._reactName,x=[];a!==null&&a!==c;){var b=a,D=b.alternate,B=b.stateNode;if(D!==null&&D===c)break;b.tag===5&&B!==null&&(b=B,h?(D=si(a,m),D!=null&&x.unshift(Ba(a,D,b))):h||(D=si(a,m),D!=null&&x.push(Ba(a,D,b)))),a=a.return}x.length!==0&&r.push({event:i,listeners:x})}var e1=/\r\n?/g,t1=/\u0000|\uFFFD/g;function Sm(r){return(typeof r=="string"?r:""+r).replace(e1,`
`).replace(t1,"")}function _u(r,i,a){if(i=Sm(i),Sm(r)!==i&&a)throw Error(t(425))}function wu(){}var Ud=null,Fd=null;function zd(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Bd=typeof setTimeout=="function"?setTimeout:void 0,n1=typeof clearTimeout=="function"?clearTimeout:void 0,km=typeof Promise=="function"?Promise:void 0,r1=typeof queueMicrotask=="function"?queueMicrotask:typeof km<"u"?function(r){return km.resolve(null).then(r).catch(s1)}:Bd;function s1(r){setTimeout(function(){throw r})}function $d(r,i){var a=i,c=0;do{var h=a.nextSibling;if(r.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(c===0){r.removeChild(h),ps(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=h}while(a);ps(i)}function vs(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function bm(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return r;i--}else a==="/$"&&i++}r=r.previousSibling}return null}var So=Math.random().toString(36).slice(2),pr="__reactFiber$"+So,$a="__reactProps$"+So,Ur="__reactContainer$"+So,qd="__reactEvents$"+So,i1="__reactListeners$"+So,o1="__reactHandles$"+So;function yi(r){var i=r[pr];if(i)return i;for(var a=r.parentNode;a;){if(i=a[Ur]||a[pr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=bm(r);r!==null;){if(a=r[pr])return a;r=bm(r)}return i}r=a,a=r.parentNode}return null}function qa(r){return r=r[pr]||r[Ur],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ko(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function xu(r){return r[$a]||null}var Wd=[],bo=-1;function _s(r){return{current:r}}function tt(r){0>bo||(r.current=Wd[bo],Wd[bo]=null,bo--)}function Je(r,i){bo++,Wd[bo]=r.current,r.current=i}var ws={},zt=_s(ws),Zt=_s(!1),vi=ws;function Ao(r,i){var a=r.type.contextTypes;if(!a)return ws;var c=r.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var h={},m;for(m in a)h[m]=i[m];return c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=h),h}function en(r){return r=r.childContextTypes,r!=null}function Eu(){tt(Zt),tt(zt)}function Am(r,i,a){if(zt.current!==ws)throw Error(t(168));Je(zt,i),Je(Zt,a)}function Cm(r,i,a){var c=r.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var h in c)if(!(h in i))throw Error(t(108,ue(r)||"Unknown",h));return ae({},a,c)}function Tu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ws,vi=zt.current,Je(zt,r),Je(Zt,Zt.current),!0}function Nm(r,i,a){var c=r.stateNode;if(!c)throw Error(t(169));a?(r=Cm(r,i,vi),c.__reactInternalMemoizedMergedChildContext=r,tt(Zt),tt(zt),Je(zt,r)):tt(Zt),Je(Zt,a)}var Fr=null,Iu=!1,Hd=!1;function Rm(r){Fr===null?Fr=[r]:Fr.push(r)}function a1(r){Iu=!0,Rm(r)}function xs(){if(!Hd&&Fr!==null){Hd=!0;var r=0,i=ze;try{var a=Fr;for(ze=1;r<a.length;r++){var c=a[r];do c=c(!0);while(c!==null)}Fr=null,Iu=!1}catch(h){throw Fr!==null&&(Fr=Fr.slice(r+1)),wa(ao,xs),h}finally{ze=i,Hd=!1}}return null}var Co=[],No=0,Su=null,ku=0,Sn=[],kn=0,_i=null,zr=1,Br="";function wi(r,i){Co[No++]=ku,Co[No++]=Su,Su=r,ku=i}function Pm(r,i,a){Sn[kn++]=zr,Sn[kn++]=Br,Sn[kn++]=_i,_i=r;var c=zr;r=Br;var h=32-hn(c)-1;c&=~(1<<h),a+=1;var m=32-hn(i)+h;if(30<m){var x=h-h%5;m=(c&(1<<x)-1).toString(32),c>>=x,h-=x,zr=1<<32-hn(i)+h|a<<h|c,Br=m+r}else zr=1<<m|a<<h|c,Br=r}function Gd(r){r.return!==null&&(wi(r,1),Pm(r,1,0))}function Kd(r){for(;r===Su;)Su=Co[--No],Co[No]=null,ku=Co[--No],Co[No]=null;for(;r===_i;)_i=Sn[--kn],Sn[kn]=null,Br=Sn[--kn],Sn[kn]=null,zr=Sn[--kn],Sn[kn]=null}var yn=null,vn=null,st=!1,Fn=null;function Dm(r,i){var a=Nn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=r,i=r.deletions,i===null?(r.deletions=[a],r.flags|=16):i.push(a)}function jm(r,i){switch(r.tag){case 5:var a=r.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,yn=r,vn=vs(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,yn=r,vn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=_i!==null?{id:zr,overflow:Br}:null,r.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Nn(18,null,null,0),a.stateNode=i,a.return=r,r.child=a,yn=r,vn=null,!0):!1;default:return!1}}function Qd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Yd(r){if(st){var i=vn;if(i){var a=i;if(!jm(r,i)){if(Qd(r))throw Error(t(418));i=vs(a.nextSibling);var c=yn;i&&jm(r,i)?Dm(c,a):(r.flags=r.flags&-4097|2,st=!1,yn=r)}}else{if(Qd(r))throw Error(t(418));r.flags=r.flags&-4097|2,st=!1,yn=r}}}function Vm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;yn=r}function bu(r){if(r!==yn)return!1;if(!st)return Vm(r),st=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!zd(r.type,r.memoizedProps)),i&&(i=vn)){if(Qd(r))throw Om(),Error(t(418));for(;i;)Dm(r,i),i=vs(i.nextSibling)}if(Vm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(i===0){vn=vs(r.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}r=r.nextSibling}vn=null}}else vn=yn?vs(r.stateNode.nextSibling):null;return!0}function Om(){for(var r=vn;r;)r=vs(r.nextSibling)}function Ro(){vn=yn=null,st=!1}function Jd(r){Fn===null?Fn=[r]:Fn.push(r)}var l1=ke.ReactCurrentBatchConfig;function Wa(r,i,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,r));var h=c,m=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(x){var b=h.refs;x===null?delete b[m]:b[m]=x},i._stringRef=m,i)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function Au(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Lm(r){var i=r._init;return i(r._payload)}function Mm(r){function i(L,j){if(r){var F=L.deletions;F===null?(L.deletions=[j],L.flags|=16):F.push(j)}}function a(L,j){if(!r)return null;for(;j!==null;)i(L,j),j=j.sibling;return null}function c(L,j){for(L=new Map;j!==null;)j.key!==null?L.set(j.key,j):L.set(j.index,j),j=j.sibling;return L}function h(L,j){return L=Cs(L,j),L.index=0,L.sibling=null,L}function m(L,j,F){return L.index=F,r?(F=L.alternate,F!==null?(F=F.index,F<j?(L.flags|=2,j):F):(L.flags|=2,j)):(L.flags|=1048576,j)}function x(L){return r&&L.alternate===null&&(L.flags|=2),L}function b(L,j,F,ee){return j===null||j.tag!==6?(j=Bh(F,L.mode,ee),j.return=L,j):(j=h(j,F),j.return=L,j)}function D(L,j,F,ee){var me=F.type;return me===R?J(L,j,F.props.children,ee,F.key):j!==null&&(j.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===De&&Lm(me)===j.type)?(ee=h(j,F.props),ee.ref=Wa(L,j,F),ee.return=L,ee):(ee=Xu(F.type,F.key,F.props,null,L.mode,ee),ee.ref=Wa(L,j,F),ee.return=L,ee)}function B(L,j,F,ee){return j===null||j.tag!==4||j.stateNode.containerInfo!==F.containerInfo||j.stateNode.implementation!==F.implementation?(j=$h(F,L.mode,ee),j.return=L,j):(j=h(j,F.children||[]),j.return=L,j)}function J(L,j,F,ee,me){return j===null||j.tag!==7?(j=Ai(F,L.mode,ee,me),j.return=L,j):(j=h(j,F),j.return=L,j)}function X(L,j,F){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Bh(""+j,L.mode,F),j.return=L,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ie:return F=Xu(j.type,j.key,j.props,null,L.mode,F),F.ref=Wa(L,null,j),F.return=L,F;case xe:return j=$h(j,L.mode,F),j.return=L,j;case De:var ee=j._init;return X(L,ee(j._payload),F)}if(ct(j)||de(j))return j=Ai(j,L.mode,F,null),j.return=L,j;Au(L,j)}return null}function Y(L,j,F,ee){var me=j!==null?j.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return me!==null?null:b(L,j,""+F,ee);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case ie:return F.key===me?D(L,j,F,ee):null;case xe:return F.key===me?B(L,j,F,ee):null;case De:return me=F._init,Y(L,j,me(F._payload),ee)}if(ct(F)||de(F))return me!==null?null:J(L,j,F,ee,null);Au(L,F)}return null}function oe(L,j,F,ee,me){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return L=L.get(F)||null,b(j,L,""+ee,me);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case ie:return L=L.get(ee.key===null?F:ee.key)||null,D(j,L,ee,me);case xe:return L=L.get(ee.key===null?F:ee.key)||null,B(j,L,ee,me);case De:var _e=ee._init;return oe(L,j,F,_e(ee._payload),me)}if(ct(ee)||de(ee))return L=L.get(F)||null,J(j,L,ee,me,null);Au(j,ee)}return null}function fe(L,j,F,ee){for(var me=null,_e=null,we=j,Ie=j=0,Rt=null;we!==null&&Ie<F.length;Ie++){we.index>Ie?(Rt=we,we=null):Rt=we.sibling;var He=Y(L,we,F[Ie],ee);if(He===null){we===null&&(we=Rt);break}r&&we&&He.alternate===null&&i(L,we),j=m(He,j,Ie),_e===null?me=He:_e.sibling=He,_e=He,we=Rt}if(Ie===F.length)return a(L,we),st&&wi(L,Ie),me;if(we===null){for(;Ie<F.length;Ie++)we=X(L,F[Ie],ee),we!==null&&(j=m(we,j,Ie),_e===null?me=we:_e.sibling=we,_e=we);return st&&wi(L,Ie),me}for(we=c(L,we);Ie<F.length;Ie++)Rt=oe(we,L,Ie,F[Ie],ee),Rt!==null&&(r&&Rt.alternate!==null&&we.delete(Rt.key===null?Ie:Rt.key),j=m(Rt,j,Ie),_e===null?me=Rt:_e.sibling=Rt,_e=Rt);return r&&we.forEach(function(Ns){return i(L,Ns)}),st&&wi(L,Ie),me}function pe(L,j,F,ee){var me=de(F);if(typeof me!="function")throw Error(t(150));if(F=me.call(F),F==null)throw Error(t(151));for(var _e=me=null,we=j,Ie=j=0,Rt=null,He=F.next();we!==null&&!He.done;Ie++,He=F.next()){we.index>Ie?(Rt=we,we=null):Rt=we.sibling;var Ns=Y(L,we,He.value,ee);if(Ns===null){we===null&&(we=Rt);break}r&&we&&Ns.alternate===null&&i(L,we),j=m(Ns,j,Ie),_e===null?me=Ns:_e.sibling=Ns,_e=Ns,we=Rt}if(He.done)return a(L,we),st&&wi(L,Ie),me;if(we===null){for(;!He.done;Ie++,He=F.next())He=X(L,He.value,ee),He!==null&&(j=m(He,j,Ie),_e===null?me=He:_e.sibling=He,_e=He);return st&&wi(L,Ie),me}for(we=c(L,we);!He.done;Ie++,He=F.next())He=oe(we,L,Ie,He.value,ee),He!==null&&(r&&He.alternate!==null&&we.delete(He.key===null?Ie:He.key),j=m(He,j,Ie),_e===null?me=He:_e.sibling=He,_e=He);return r&&we.forEach(function(z1){return i(L,z1)}),st&&wi(L,Ie),me}function ht(L,j,F,ee){if(typeof F=="object"&&F!==null&&F.type===R&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case ie:e:{for(var me=F.key,_e=j;_e!==null;){if(_e.key===me){if(me=F.type,me===R){if(_e.tag===7){a(L,_e.sibling),j=h(_e,F.props.children),j.return=L,L=j;break e}}else if(_e.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===De&&Lm(me)===_e.type){a(L,_e.sibling),j=h(_e,F.props),j.ref=Wa(L,_e,F),j.return=L,L=j;break e}a(L,_e);break}else i(L,_e);_e=_e.sibling}F.type===R?(j=Ai(F.props.children,L.mode,ee,F.key),j.return=L,L=j):(ee=Xu(F.type,F.key,F.props,null,L.mode,ee),ee.ref=Wa(L,j,F),ee.return=L,L=ee)}return x(L);case xe:e:{for(_e=F.key;j!==null;){if(j.key===_e)if(j.tag===4&&j.stateNode.containerInfo===F.containerInfo&&j.stateNode.implementation===F.implementation){a(L,j.sibling),j=h(j,F.children||[]),j.return=L,L=j;break e}else{a(L,j);break}else i(L,j);j=j.sibling}j=$h(F,L.mode,ee),j.return=L,L=j}return x(L);case De:return _e=F._init,ht(L,j,_e(F._payload),ee)}if(ct(F))return fe(L,j,F,ee);if(de(F))return pe(L,j,F,ee);Au(L,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,j!==null&&j.tag===6?(a(L,j.sibling),j=h(j,F),j.return=L,L=j):(a(L,j),j=Bh(F,L.mode,ee),j.return=L,L=j),x(L)):a(L,j)}return ht}var Po=Mm(!0),Um=Mm(!1),Cu=_s(null),Nu=null,Do=null,Xd=null;function Zd(){Xd=Do=Nu=null}function eh(r){var i=Cu.current;tt(Cu),r._currentValue=i}function th(r,i,a){for(;r!==null;){var c=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),r===a)break;r=r.return}}function jo(r,i){Nu=r,Xd=Do=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(tn=!0),r.firstContext=null)}function bn(r){var i=r._currentValue;if(Xd!==r)if(r={context:r,memoizedValue:i,next:null},Do===null){if(Nu===null)throw Error(t(308));Do=r,Nu.dependencies={lanes:0,firstContext:r}}else Do=Do.next=r;return i}var xi=null;function nh(r){xi===null?xi=[r]:xi.push(r)}function Fm(r,i,a,c){var h=i.interleaved;return h===null?(a.next=a,nh(i)):(a.next=h.next,h.next=a),i.interleaved=a,$r(r,c)}function $r(r,i){r.lanes|=i;var a=r.alternate;for(a!==null&&(a.lanes|=i),a=r,r=r.return;r!==null;)r.childLanes|=i,a=r.alternate,a!==null&&(a.childLanes|=i),a=r,r=r.return;return a.tag===3?a.stateNode:null}var Es=!1;function rh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zm(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function qr(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function Ts(r,i,a){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(We&2)!==0){var h=c.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),c.pending=i,$r(r,a)}return h=c.interleaved,h===null?(i.next=i,nh(c)):(i.next=h.next,h.next=i),c.interleaved=i,$r(r,a)}function Ru(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=r.pendingLanes,a|=c,i.lanes=a,ka(r,a)}}function Bm(r,i){var a=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?h=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?h=m=i:m=m.next=i}else h=m=i;a={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:c.shared,effects:c.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}function Pu(r,i,a,c){var h=r.updateQueue;Es=!1;var m=h.firstBaseUpdate,x=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var D=b,B=D.next;D.next=null,x===null?m=B:x.next=B,x=D;var J=r.alternate;J!==null&&(J=J.updateQueue,b=J.lastBaseUpdate,b!==x&&(b===null?J.firstBaseUpdate=B:b.next=B,J.lastBaseUpdate=D))}if(m!==null){var X=h.baseState;x=0,J=B=D=null,b=m;do{var Y=b.lane,oe=b.eventTime;if((c&Y)===Y){J!==null&&(J=J.next={eventTime:oe,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var fe=r,pe=b;switch(Y=i,oe=a,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){X=fe.call(oe,X,Y);break e}X=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,Y=typeof fe=="function"?fe.call(oe,X,Y):fe,Y==null)break e;X=ae({},X,Y);break e;case 2:Es=!0}}b.callback!==null&&b.lane!==0&&(r.flags|=64,Y=h.effects,Y===null?h.effects=[b]:Y.push(b))}else oe={eventTime:oe,lane:Y,tag:b.tag,payload:b.payload,callback:b.callback,next:null},J===null?(B=J=oe,D=X):J=J.next=oe,x|=Y;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;Y=b,b=Y.next,Y.next=null,h.lastBaseUpdate=Y,h.shared.pending=null}}while(!0);if(J===null&&(D=X),h.baseState=D,h.firstBaseUpdate=B,h.lastBaseUpdate=J,i=h.shared.interleaved,i!==null){h=i;do x|=h.lane,h=h.next;while(h!==i)}else m===null&&(h.shared.lanes=0);Ii|=x,r.lanes=x,r.memoizedState=X}}function $m(r,i,a){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var c=r[i],h=c.callback;if(h!==null){if(c.callback=null,c=a,typeof h!="function")throw Error(t(191,h));h.call(c)}}}var Ha={},mr=_s(Ha),Ga=_s(Ha),Ka=_s(Ha);function Ei(r){if(r===Ha)throw Error(t(174));return r}function sh(r,i){switch(Je(Ka,i),Je(Ga,r),Je(mr,Ha),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:to(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=to(i,r)}tt(mr),Je(mr,i)}function Vo(){tt(mr),tt(Ga),tt(Ka)}function qm(r){Ei(Ka.current);var i=Ei(mr.current),a=to(i,r.type);i!==a&&(Je(Ga,r),Je(mr,a))}function ih(r){Ga.current===r&&(tt(mr),tt(Ga))}var it=_s(0);function Du(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var oh=[];function ah(){for(var r=0;r<oh.length;r++)oh[r]._workInProgressVersionPrimary=null;oh.length=0}var ju=ke.ReactCurrentDispatcher,lh=ke.ReactCurrentBatchConfig,Ti=0,ot=null,St=null,Ct=null,Vu=!1,Qa=!1,Ya=0,u1=0;function Bt(){throw Error(t(321))}function uh(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!Un(r[a],i[a]))return!1;return!0}function ch(r,i,a,c,h,m){if(Ti=m,ot=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ju.current=r===null||r.memoizedState===null?f1:p1,r=a(c,h),Qa){m=0;do{if(Qa=!1,Ya=0,25<=m)throw Error(t(301));m+=1,Ct=St=null,i.updateQueue=null,ju.current=m1,r=a(c,h)}while(Qa)}if(ju.current=Mu,i=St!==null&&St.next!==null,Ti=0,Ct=St=ot=null,Vu=!1,i)throw Error(t(300));return r}function dh(){var r=Ya!==0;return Ya=0,r}function gr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?ot.memoizedState=Ct=r:Ct=Ct.next=r,Ct}function An(){if(St===null){var r=ot.alternate;r=r!==null?r.memoizedState:null}else r=St.next;var i=Ct===null?ot.memoizedState:Ct.next;if(i!==null)Ct=i,St=r;else{if(r===null)throw Error(t(310));St=r,r={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Ct===null?ot.memoizedState=Ct=r:Ct=Ct.next=r}return Ct}function Ja(r,i){return typeof i=="function"?i(r):i}function hh(r){var i=An(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=St,h=c.baseQueue,m=a.pending;if(m!==null){if(h!==null){var x=h.next;h.next=m.next,m.next=x}c.baseQueue=h=m,a.pending=null}if(h!==null){m=h.next,c=c.baseState;var b=x=null,D=null,B=m;do{var J=B.lane;if((Ti&J)===J)D!==null&&(D=D.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:r(c,B.action);else{var X={lane:J,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};D===null?(b=D=X,x=c):D=D.next=X,ot.lanes|=J,Ii|=J}B=B.next}while(B!==null&&B!==m);D===null?x=c:D.next=b,Un(c,i.memoizedState)||(tn=!0),i.memoizedState=c,i.baseState=x,i.baseQueue=D,a.lastRenderedState=c}if(r=a.interleaved,r!==null){h=r;do m=h.lane,ot.lanes|=m,Ii|=m,h=h.next;while(h!==r)}else h===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function fh(r){var i=An(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=a.dispatch,h=a.pending,m=i.memoizedState;if(h!==null){a.pending=null;var x=h=h.next;do m=r(m,x.action),x=x.next;while(x!==h);Un(m,i.memoizedState)||(tn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,c]}function Wm(){}function Hm(r,i){var a=ot,c=An(),h=i(),m=!Un(c.memoizedState,h);if(m&&(c.memoizedState=h,tn=!0),c=c.queue,ph(Qm.bind(null,a,c,r),[r]),c.getSnapshot!==i||m||Ct!==null&&Ct.memoizedState.tag&1){if(a.flags|=2048,Xa(9,Km.bind(null,a,c,h,i),void 0,null),Nt===null)throw Error(t(349));(Ti&30)!==0||Gm(a,i,h)}return h}function Gm(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=ot.updateQueue,i===null?(i={lastEffect:null,stores:null},ot.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function Km(r,i,a,c){i.value=a,i.getSnapshot=c,Ym(i)&&Jm(r)}function Qm(r,i,a){return a(function(){Ym(i)&&Jm(r)})}function Ym(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!Un(r,a)}catch{return!0}}function Jm(r){var i=$r(r,1);i!==null&&qn(i,r,1,-1)}function Xm(r){var i=gr();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:r},i.queue=r,r=r.dispatch=h1.bind(null,ot,r),[i.memoizedState,r]}function Xa(r,i,a,c){return r={tag:r,create:i,destroy:a,deps:c,next:null},i=ot.updateQueue,i===null?(i={lastEffect:null,stores:null},ot.updateQueue=i,i.lastEffect=r.next=r):(a=i.lastEffect,a===null?i.lastEffect=r.next=r:(c=a.next,a.next=r,r.next=c,i.lastEffect=r)),r}function Zm(){return An().memoizedState}function Ou(r,i,a,c){var h=gr();ot.flags|=r,h.memoizedState=Xa(1|i,a,void 0,c===void 0?null:c)}function Lu(r,i,a,c){var h=An();c=c===void 0?null:c;var m=void 0;if(St!==null){var x=St.memoizedState;if(m=x.destroy,c!==null&&uh(c,x.deps)){h.memoizedState=Xa(i,a,m,c);return}}ot.flags|=r,h.memoizedState=Xa(1|i,a,m,c)}function eg(r,i){return Ou(8390656,8,r,i)}function ph(r,i){return Lu(2048,8,r,i)}function tg(r,i){return Lu(4,2,r,i)}function ng(r,i){return Lu(4,4,r,i)}function rg(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function sg(r,i,a){return a=a!=null?a.concat([r]):null,Lu(4,4,rg.bind(null,i,r),a)}function mh(){}function ig(r,i){var a=An();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&uh(i,c[1])?c[0]:(a.memoizedState=[r,i],r)}function og(r,i){var a=An();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&uh(i,c[1])?c[0]:(r=r(),a.memoizedState=[r,i],r)}function ag(r,i,a){return(Ti&21)===0?(r.baseState&&(r.baseState=!1,tn=!0),r.memoizedState=a):(Un(a,i)||(a=Ia(),ot.lanes|=a,Ii|=a,r.baseState=!0),i)}function c1(r,i){var a=ze;ze=a!==0&&4>a?a:4,r(!0);var c=lh.transition;lh.transition={};try{r(!1),i()}finally{ze=a,lh.transition=c}}function lg(){return An().memoizedState}function d1(r,i,a){var c=bs(r);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},ug(r))cg(i,a);else if(a=Fm(r,i,a,c),a!==null){var h=Yt();qn(a,r,c,h),dg(a,i,c)}}function h1(r,i,a){var c=bs(r),h={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(ug(r))cg(i,h);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var x=i.lastRenderedState,b=m(x,a);if(h.hasEagerState=!0,h.eagerState=b,Un(b,x)){var D=i.interleaved;D===null?(h.next=h,nh(i)):(h.next=D.next,D.next=h),i.interleaved=h;return}}catch{}finally{}a=Fm(r,i,h,c),a!==null&&(h=Yt(),qn(a,r,c,h),dg(a,i,c))}}function ug(r){var i=r.alternate;return r===ot||i!==null&&i===ot}function cg(r,i){Qa=Vu=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function dg(r,i,a){if((a&4194240)!==0){var c=i.lanes;c&=r.pendingLanes,a|=c,i.lanes=a,ka(r,a)}}var Mu={readContext:bn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},f1={readContext:bn,useCallback:function(r,i){return gr().memoizedState=[r,i===void 0?null:i],r},useContext:bn,useEffect:eg,useImperativeHandle:function(r,i,a){return a=a!=null?a.concat([r]):null,Ou(4194308,4,rg.bind(null,i,r),a)},useLayoutEffect:function(r,i){return Ou(4194308,4,r,i)},useInsertionEffect:function(r,i){return Ou(4,2,r,i)},useMemo:function(r,i){var a=gr();return i=i===void 0?null:i,r=r(),a.memoizedState=[r,i],r},useReducer:function(r,i,a){var c=gr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},c.queue=r,r=r.dispatch=d1.bind(null,ot,r),[c.memoizedState,r]},useRef:function(r){var i=gr();return r={current:r},i.memoizedState=r},useState:Xm,useDebugValue:mh,useDeferredValue:function(r){return gr().memoizedState=r},useTransition:function(){var r=Xm(!1),i=r[0];return r=c1.bind(null,r[1]),gr().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,a){var c=ot,h=gr();if(st){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Nt===null)throw Error(t(349));(Ti&30)!==0||Gm(c,i,a)}h.memoizedState=a;var m={value:a,getSnapshot:i};return h.queue=m,eg(Qm.bind(null,c,m,r),[r]),c.flags|=2048,Xa(9,Km.bind(null,c,m,a,i),void 0,null),a},useId:function(){var r=gr(),i=Nt.identifierPrefix;if(st){var a=Br,c=zr;a=(c&~(1<<32-hn(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=Ya++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=u1++,i=":"+i+"r"+a.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},p1={readContext:bn,useCallback:ig,useContext:bn,useEffect:ph,useImperativeHandle:sg,useInsertionEffect:tg,useLayoutEffect:ng,useMemo:og,useReducer:hh,useRef:Zm,useState:function(){return hh(Ja)},useDebugValue:mh,useDeferredValue:function(r){var i=An();return ag(i,St.memoizedState,r)},useTransition:function(){var r=hh(Ja)[0],i=An().memoizedState;return[r,i]},useMutableSource:Wm,useSyncExternalStore:Hm,useId:lg,unstable_isNewReconciler:!1},m1={readContext:bn,useCallback:ig,useContext:bn,useEffect:ph,useImperativeHandle:sg,useInsertionEffect:tg,useLayoutEffect:ng,useMemo:og,useReducer:fh,useRef:Zm,useState:function(){return fh(Ja)},useDebugValue:mh,useDeferredValue:function(r){var i=An();return St===null?i.memoizedState=r:ag(i,St.memoizedState,r)},useTransition:function(){var r=fh(Ja)[0],i=An().memoizedState;return[r,i]},useMutableSource:Wm,useSyncExternalStore:Hm,useId:lg,unstable_isNewReconciler:!1};function zn(r,i){if(r&&r.defaultProps){i=ae({},i),r=r.defaultProps;for(var a in r)i[a]===void 0&&(i[a]=r[a]);return i}return i}function gh(r,i,a,c){i=r.memoizedState,a=a(c,i),a=a==null?i:ae({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Uu={isMounted:function(r){return(r=r._reactInternals)?Ln(r)===r:!1},enqueueSetState:function(r,i,a){r=r._reactInternals;var c=Yt(),h=bs(r),m=qr(c,h);m.payload=i,a!=null&&(m.callback=a),i=Ts(r,m,h),i!==null&&(qn(i,r,h,c),Ru(i,r,h))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var c=Yt(),h=bs(r),m=qr(c,h);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=Ts(r,m,h),i!==null&&(qn(i,r,h,c),Ru(i,r,h))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=Yt(),c=bs(r),h=qr(a,c);h.tag=2,i!=null&&(h.callback=i),i=Ts(r,h,c),i!==null&&(qn(i,r,c,a),Ru(i,r,c))}};function hg(r,i,a,c,h,m,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,m,x):i.prototype&&i.prototype.isPureReactComponent?!Ma(a,c)||!Ma(h,m):!0}function fg(r,i,a){var c=!1,h=ws,m=i.contextType;return typeof m=="object"&&m!==null?m=bn(m):(h=en(i)?vi:zt.current,c=i.contextTypes,m=(c=c!=null)?Ao(r,h):ws),i=new i(a,m),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Uu,r.stateNode=i,i._reactInternals=r,c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=h,r.__reactInternalMemoizedMaskedChildContext=m),i}function pg(r,i,a,c){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==r&&Uu.enqueueReplaceState(i,i.state,null)}function yh(r,i,a,c){var h=r.stateNode;h.props=a,h.state=r.memoizedState,h.refs={},rh(r);var m=i.contextType;typeof m=="object"&&m!==null?h.context=bn(m):(m=en(i)?vi:zt.current,h.context=Ao(r,m)),h.state=r.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(gh(r,i,m,a),h.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(i=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),i!==h.state&&Uu.enqueueReplaceState(h,h.state,null),Pu(r,a,h,c),h.state=r.memoizedState),typeof h.componentDidMount=="function"&&(r.flags|=4194308)}function Oo(r,i){try{var a="",c=i;do a+=Ve(c),c=c.return;while(c);var h=a}catch(m){h=`
Error generating stack: `+m.message+`
`+m.stack}return{value:r,source:i,stack:h,digest:null}}function vh(r,i,a){return{value:r,source:null,stack:a??null,digest:i??null}}function _h(r,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var g1=typeof WeakMap=="function"?WeakMap:Map;function mg(r,i,a){a=qr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){Hu||(Hu=!0,jh=c),_h(r,i)},a}function gg(r,i,a){a=qr(-1,a),a.tag=3;var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var h=i.value;a.payload=function(){return c(h)},a.callback=function(){_h(r,i)}}var m=r.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){_h(r,i),typeof c!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var x=i.stack;this.componentDidCatch(i.value,{componentStack:x!==null?x:""})}),a}function yg(r,i,a){var c=r.pingCache;if(c===null){c=r.pingCache=new g1;var h=new Set;c.set(i,h)}else h=c.get(i),h===void 0&&(h=new Set,c.set(i,h));h.has(a)||(h.add(a),r=N1.bind(null,r,i,a),i.then(r,r))}function vg(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function _g(r,i,a,c,h){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=qr(-1,1),i.tag=2,Ts(a,i,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=h,r)}var y1=ke.ReactCurrentOwner,tn=!1;function Qt(r,i,a,c){i.child=r===null?Um(i,null,a,c):Po(i,r.child,a,c)}function wg(r,i,a,c,h){a=a.render;var m=i.ref;return jo(i,h),c=ch(r,i,a,c,m,h),a=dh(),r!==null&&!tn?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~h,Wr(r,i,h)):(st&&a&&Gd(i),i.flags|=1,Qt(r,i,c,h),i.child)}function xg(r,i,a,c,h){if(r===null){var m=a.type;return typeof m=="function"&&!zh(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=m,Eg(r,i,m,c,h)):(r=Xu(a.type,null,c,i,i.mode,h),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,(r.lanes&h)===0){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:Ma,a(x,c)&&r.ref===i.ref)return Wr(r,i,h)}return i.flags|=1,r=Cs(m,c),r.ref=i.ref,r.return=i,i.child=r}function Eg(r,i,a,c,h){if(r!==null){var m=r.memoizedProps;if(Ma(m,c)&&r.ref===i.ref)if(tn=!1,i.pendingProps=c=m,(r.lanes&h)!==0)(r.flags&131072)!==0&&(tn=!0);else return i.lanes=r.lanes,Wr(r,i,h)}return wh(r,i,a,c,h)}function Tg(r,i,a){var c=i.pendingProps,h=c.children,m=r!==null?r.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(Mo,_n),_n|=a;else{if((a&1073741824)===0)return r=m!==null?m.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,Je(Mo,_n),_n|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,Je(Mo,_n),_n|=c}else m!==null?(c=m.baseLanes|a,i.memoizedState=null):c=a,Je(Mo,_n),_n|=c;return Qt(r,i,h,a),i.child}function Ig(r,i){var a=i.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function wh(r,i,a,c,h){var m=en(a)?vi:zt.current;return m=Ao(i,m),jo(i,h),a=ch(r,i,a,c,m,h),c=dh(),r!==null&&!tn?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~h,Wr(r,i,h)):(st&&c&&Gd(i),i.flags|=1,Qt(r,i,a,h),i.child)}function Sg(r,i,a,c,h){if(en(a)){var m=!0;Tu(i)}else m=!1;if(jo(i,h),i.stateNode===null)zu(r,i),fg(i,a,c),yh(i,a,c,h),c=!0;else if(r===null){var x=i.stateNode,b=i.memoizedProps;x.props=b;var D=x.context,B=a.contextType;typeof B=="object"&&B!==null?B=bn(B):(B=en(a)?vi:zt.current,B=Ao(i,B));var J=a.getDerivedStateFromProps,X=typeof J=="function"||typeof x.getSnapshotBeforeUpdate=="function";X||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(b!==c||D!==B)&&pg(i,x,c,B),Es=!1;var Y=i.memoizedState;x.state=Y,Pu(i,c,x,h),D=i.memoizedState,b!==c||Y!==D||Zt.current||Es?(typeof J=="function"&&(gh(i,a,J,c),D=i.memoizedState),(b=Es||hg(i,a,b,c,Y,D,B))?(X||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(i.flags|=4194308)):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=D),x.props=c,x.state=D,x.context=B,c=b):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{x=i.stateNode,zm(r,i),b=i.memoizedProps,B=i.type===i.elementType?b:zn(i.type,b),x.props=B,X=i.pendingProps,Y=x.context,D=a.contextType,typeof D=="object"&&D!==null?D=bn(D):(D=en(a)?vi:zt.current,D=Ao(i,D));var oe=a.getDerivedStateFromProps;(J=typeof oe=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(b!==X||Y!==D)&&pg(i,x,c,D),Es=!1,Y=i.memoizedState,x.state=Y,Pu(i,c,x,h);var fe=i.memoizedState;b!==X||Y!==fe||Zt.current||Es?(typeof oe=="function"&&(gh(i,a,oe,c),fe=i.memoizedState),(B=Es||hg(i,a,B,c,Y,fe,D)||!1)?(J||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(c,fe,D),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(c,fe,D)),typeof x.componentDidUpdate=="function"&&(i.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof x.componentDidUpdate!="function"||b===r.memoizedProps&&Y===r.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&Y===r.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=fe),x.props=c,x.state=fe,x.context=D,c=B):(typeof x.componentDidUpdate!="function"||b===r.memoizedProps&&Y===r.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&Y===r.memoizedState||(i.flags|=1024),c=!1)}return xh(r,i,a,c,m,h)}function xh(r,i,a,c,h,m){Ig(r,i);var x=(i.flags&128)!==0;if(!c&&!x)return h&&Nm(i,a,!1),Wr(r,i,m);c=i.stateNode,y1.current=i;var b=x&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,r!==null&&x?(i.child=Po(i,r.child,null,m),i.child=Po(i,null,b,m)):Qt(r,i,b,m),i.memoizedState=c.state,h&&Nm(i,a,!0),i.child}function kg(r){var i=r.stateNode;i.pendingContext?Am(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Am(r,i.context,!1),sh(r,i.containerInfo)}function bg(r,i,a,c,h){return Ro(),Jd(h),i.flags|=256,Qt(r,i,a,c),i.child}var Eh={dehydrated:null,treeContext:null,retryLane:0};function Th(r){return{baseLanes:r,cachePool:null,transitions:null}}function Ag(r,i,a){var c=i.pendingProps,h=it.current,m=!1,x=(i.flags&128)!==0,b;if((b=x)||(b=r!==null&&r.memoizedState===null?!1:(h&2)!==0),b?(m=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(h|=1),Je(it,h&1),r===null)return Yd(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(x=c.children,r=c.fallback,m?(c=i.mode,m=i.child,x={mode:"hidden",children:x},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=x):m=Zu(x,c,0,null),r=Ai(r,c,a,null),m.return=i,r.return=i,m.sibling=r,i.child=m,i.child.memoizedState=Th(a),i.memoizedState=Eh,r):Ih(i,x));if(h=r.memoizedState,h!==null&&(b=h.dehydrated,b!==null))return v1(r,i,x,c,b,h,a);if(m){m=c.fallback,x=i.mode,h=r.child,b=h.sibling;var D={mode:"hidden",children:c.children};return(x&1)===0&&i.child!==h?(c=i.child,c.childLanes=0,c.pendingProps=D,i.deletions=null):(c=Cs(h,D),c.subtreeFlags=h.subtreeFlags&14680064),b!==null?m=Cs(b,m):(m=Ai(m,x,a,null),m.flags|=2),m.return=i,c.return=i,c.sibling=m,i.child=c,c=m,m=i.child,x=r.child.memoizedState,x=x===null?Th(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},m.memoizedState=x,m.childLanes=r.childLanes&~a,i.memoizedState=Eh,c}return m=r.child,r=m.sibling,c=Cs(m,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,r!==null&&(a=i.deletions,a===null?(i.deletions=[r],i.flags|=16):a.push(r)),i.child=c,i.memoizedState=null,c}function Ih(r,i){return i=Zu({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function Fu(r,i,a,c){return c!==null&&Jd(c),Po(i,r.child,null,a),r=Ih(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function v1(r,i,a,c,h,m,x){if(a)return i.flags&256?(i.flags&=-257,c=vh(Error(t(422))),Fu(r,i,x,c)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(m=c.fallback,h=i.mode,c=Zu({mode:"visible",children:c.children},h,0,null),m=Ai(m,h,x,null),m.flags|=2,c.return=i,m.return=i,c.sibling=m,i.child=c,(i.mode&1)!==0&&Po(i,r.child,null,x),i.child.memoizedState=Th(x),i.memoizedState=Eh,m);if((i.mode&1)===0)return Fu(r,i,x,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var b=c.dgst;return c=b,m=Error(t(419)),c=vh(m,c,void 0),Fu(r,i,x,c)}if(b=(x&r.childLanes)!==0,tn||b){if(c=Nt,c!==null){switch(x&-x){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(c.suspendedLanes|x))!==0?0:h,h!==0&&h!==m.retryLane&&(m.retryLane=h,$r(r,h),qn(c,r,h,-1))}return Fh(),c=vh(Error(t(421))),Fu(r,i,x,c)}return h.data==="$?"?(i.flags|=128,i.child=r.child,i=R1.bind(null,r),h._reactRetry=i,null):(r=m.treeContext,vn=vs(h.nextSibling),yn=i,st=!0,Fn=null,r!==null&&(Sn[kn++]=zr,Sn[kn++]=Br,Sn[kn++]=_i,zr=r.id,Br=r.overflow,_i=i),i=Ih(i,c.children),i.flags|=4096,i)}function Cg(r,i,a){r.lanes|=i;var c=r.alternate;c!==null&&(c.lanes|=i),th(r.return,i,a)}function Sh(r,i,a,c,h){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:h}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=h)}function Ng(r,i,a){var c=i.pendingProps,h=c.revealOrder,m=c.tail;if(Qt(r,i,c.children,a),c=it.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Cg(r,a,i);else if(r.tag===19)Cg(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}if(Je(it,c),(i.mode&1)===0)i.memoizedState=null;else switch(h){case"forwards":for(a=i.child,h=null;a!==null;)r=a.alternate,r!==null&&Du(r)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Sh(i,!1,h,a,m);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(r=h.alternate,r!==null&&Du(r)===null){i.child=h;break}r=h.sibling,h.sibling=a,a=h,h=r}Sh(i,!0,a,null,m);break;case"together":Sh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function zu(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function Wr(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),Ii|=i.lanes,(a&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,a=Cs(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=Cs(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function _1(r,i,a){switch(i.tag){case 3:kg(i),Ro();break;case 5:qm(i);break;case 1:en(i.type)&&Tu(i);break;case 4:sh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,h=i.memoizedProps.value;Je(Cu,c._currentValue),c._currentValue=h;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Je(it,it.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Ag(r,i,a):(Je(it,it.current&1),r=Wr(r,i,a),r!==null?r.sibling:null);Je(it,it.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(r.flags&128)!==0){if(c)return Ng(r,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Je(it,it.current),c)break;return null;case 22:case 23:return i.lanes=0,Tg(r,i,a)}return Wr(r,i,a)}var Rg,kh,Pg,Dg;Rg=function(r,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},kh=function(){},Pg=function(r,i,a,c){var h=r.memoizedProps;if(h!==c){r=i.stateNode,Ei(mr.current);var m=null;switch(a){case"input":h=Zi(r,h),c=Zi(r,c),m=[];break;case"select":h=ae({},h,{value:void 0}),c=ae({},c,{value:void 0}),m=[];break;case"textarea":h=fa(r,h),c=fa(r,c),m=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(r.onclick=wu)}On(a,c);var x;a=null;for(B in h)if(!c.hasOwnProperty(B)&&h.hasOwnProperty(B)&&h[B]!=null)if(B==="style"){var b=h[B];for(x in b)b.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?m||(m=[]):(m=m||[]).push(B,null));for(B in c){var D=c[B];if(b=h!=null?h[B]:void 0,c.hasOwnProperty(B)&&D!==b&&(D!=null||b!=null))if(B==="style")if(b){for(x in b)!b.hasOwnProperty(x)||D&&D.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in D)D.hasOwnProperty(x)&&b[x]!==D[x]&&(a||(a={}),a[x]=D[x])}else a||(m||(m=[]),m.push(B,a)),a=D;else B==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,b=b?b.__html:void 0,D!=null&&b!==D&&(m=m||[]).push(B,D)):B==="children"?typeof D!="string"&&typeof D!="number"||(m=m||[]).push(B,""+D):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(D!=null&&B==="onScroll"&&et("scroll",r),m||b===D||(m=[])):(m=m||[]).push(B,D))}a&&(m=m||[]).push("style",a);var B=m;(i.updateQueue=B)&&(i.flags|=4)}},Dg=function(r,i,a,c){a!==c&&(i.flags|=4)};function Za(r,i){if(!st)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function $t(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,c=0;if(i)for(var h=r.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=c,r.childLanes=a,i}function w1(r,i,a){var c=i.pendingProps;switch(Kd(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(i),null;case 1:return en(i.type)&&Eu(),$t(i),null;case 3:return c=i.stateNode,Vo(),tt(Zt),tt(zt),ah(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(bu(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Fn!==null&&(Lh(Fn),Fn=null))),kh(r,i),$t(i),null;case 5:ih(i);var h=Ei(Ka.current);if(a=i.type,r!==null&&i.stateNode!=null)Pg(r,i,a,c,h),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return $t(i),null}if(r=Ei(mr.current),bu(i)){c=i.stateNode,a=i.type;var m=i.memoizedProps;switch(c[pr]=i,c[$a]=m,r=(i.mode&1)!==0,a){case"dialog":et("cancel",c),et("close",c);break;case"iframe":case"object":case"embed":et("load",c);break;case"video":case"audio":for(h=0;h<Fa.length;h++)et(Fa[h],c);break;case"source":et("error",c);break;case"img":case"image":case"link":et("error",c),et("load",c);break;case"details":et("toggle",c);break;case"input":Wl(c,m),et("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},et("invalid",c);break;case"textarea":pa(c,m),et("invalid",c)}On(a,m),h=null;for(var x in m)if(m.hasOwnProperty(x)){var b=m[x];x==="children"?typeof b=="string"?c.textContent!==b&&(m.suppressHydrationWarning!==!0&&_u(c.textContent,b,r),h=["children",b]):typeof b=="number"&&c.textContent!==""+b&&(m.suppressHydrationWarning!==!0&&_u(c.textContent,b,r),h=["children",""+b]):o.hasOwnProperty(x)&&b!=null&&x==="onScroll"&&et("scroll",c)}switch(a){case"input":jn(c),ha(c,m,!0);break;case"textarea":jn(c),ns(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=wu)}c=h,i.updateQueue=c,c!==null&&(i.flags|=4)}else{x=h.nodeType===9?h:h.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=ma(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=x.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof c.is=="string"?r=x.createElement(a,{is:c.is}):(r=x.createElement(a),a==="select"&&(x=r,c.multiple?x.multiple=!0:c.size&&(x.size=c.size))):r=x.createElementNS(r,a),r[pr]=i,r[$a]=c,Rg(r,i,!1,!1),i.stateNode=r;e:{switch(x=ro(a,c),a){case"dialog":et("cancel",r),et("close",r),h=c;break;case"iframe":case"object":case"embed":et("load",r),h=c;break;case"video":case"audio":for(h=0;h<Fa.length;h++)et(Fa[h],r);h=c;break;case"source":et("error",r),h=c;break;case"img":case"image":case"link":et("error",r),et("load",r),h=c;break;case"details":et("toggle",r),h=c;break;case"input":Wl(r,c),h=Zi(r,c),et("invalid",r);break;case"option":h=c;break;case"select":r._wrapperState={wasMultiple:!!c.multiple},h=ae({},c,{value:void 0}),et("invalid",r);break;case"textarea":pa(r,c),h=fa(r,c),et("invalid",r);break;default:h=c}On(a,h),b=h;for(m in b)if(b.hasOwnProperty(m)){var D=b[m];m==="style"?no(r,D):m==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Gl(r,D)):m==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&ri(r,D):typeof D=="number"&&ri(r,""+D):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?D!=null&&m==="onScroll"&&et("scroll",r):D!=null&&ce(r,m,D,x))}switch(a){case"input":jn(r),ha(r,c,!1);break;case"textarea":jn(r),ns(r);break;case"option":c.value!=null&&r.setAttribute("value",""+Te(c.value));break;case"select":r.multiple=!!c.multiple,m=c.value,m!=null?Vn(r,!!c.multiple,m,!1):c.defaultValue!=null&&Vn(r,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(r.onclick=wu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return $t(i),null;case 6:if(r&&i.stateNode!=null)Dg(r,i,r.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=Ei(Ka.current),Ei(mr.current),bu(i)){if(c=i.stateNode,a=i.memoizedProps,c[pr]=i,(m=c.nodeValue!==a)&&(r=yn,r!==null))switch(r.tag){case 3:_u(c.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&_u(c.nodeValue,a,(r.mode&1)!==0)}m&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[pr]=i,i.stateNode=c}return $t(i),null;case 13:if(tt(it),c=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(st&&vn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Om(),Ro(),i.flags|=98560,m=!1;else if(m=bu(i),c!==null&&c.dehydrated!==null){if(r===null){if(!m)throw Error(t(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[pr]=i}else Ro(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;$t(i),m=!1}else Fn!==null&&(Lh(Fn),Fn=null),m=!0;if(!m)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(r!==null&&r.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(it.current&1)!==0?kt===0&&(kt=3):Fh())),i.updateQueue!==null&&(i.flags|=4),$t(i),null);case 4:return Vo(),kh(r,i),r===null&&za(i.stateNode.containerInfo),$t(i),null;case 10:return eh(i.type._context),$t(i),null;case 17:return en(i.type)&&Eu(),$t(i),null;case 19:if(tt(it),m=i.memoizedState,m===null)return $t(i),null;if(c=(i.flags&128)!==0,x=m.rendering,x===null)if(c)Za(m,!1);else{if(kt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(x=Du(r),x!==null){for(i.flags|=128,Za(m,!1),c=x.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)m=a,r=c,m.flags&=14680066,x=m.alternate,x===null?(m.childLanes=0,m.lanes=r,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=x.childLanes,m.lanes=x.lanes,m.child=x.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=x.memoizedProps,m.memoizedState=x.memoizedState,m.updateQueue=x.updateQueue,m.type=x.type,r=x.dependencies,m.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Je(it,it.current&1|2),i.child}r=r.sibling}m.tail!==null&&Ze()>Uo&&(i.flags|=128,c=!0,Za(m,!1),i.lanes=4194304)}else{if(!c)if(r=Du(x),r!==null){if(i.flags|=128,c=!0,a=r.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Za(m,!0),m.tail===null&&m.tailMode==="hidden"&&!x.alternate&&!st)return $t(i),null}else 2*Ze()-m.renderingStartTime>Uo&&a!==1073741824&&(i.flags|=128,c=!0,Za(m,!1),i.lanes=4194304);m.isBackwards?(x.sibling=i.child,i.child=x):(a=m.last,a!==null?a.sibling=x:i.child=x,m.last=x)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=Ze(),i.sibling=null,a=it.current,Je(it,c?a&1|2:a&1),i):($t(i),null);case 22:case 23:return Uh(),c=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(_n&1073741824)!==0&&($t(i),i.subtreeFlags&6&&(i.flags|=8192)):$t(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function x1(r,i){switch(Kd(i),i.tag){case 1:return en(i.type)&&Eu(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Vo(),tt(Zt),tt(zt),ah(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return ih(i),null;case 13:if(tt(it),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Ro()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return tt(it),null;case 4:return Vo(),null;case 10:return eh(i.type._context),null;case 22:case 23:return Uh(),null;case 24:return null;default:return null}}var Bu=!1,qt=!1,E1=typeof WeakSet=="function"?WeakSet:Set,he=null;function Lo(r,i){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ut(r,i,c)}else a.current=null}function bh(r,i,a){try{a()}catch(c){ut(r,i,c)}}var jg=!1;function T1(r,i){if(Ud=Or,r=hm(),Rd(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var h=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var x=0,b=-1,D=-1,B=0,J=0,X=r,Y=null;t:for(;;){for(var oe;X!==a||h!==0&&X.nodeType!==3||(b=x+h),X!==m||c!==0&&X.nodeType!==3||(D=x+c),X.nodeType===3&&(x+=X.nodeValue.length),(oe=X.firstChild)!==null;)Y=X,X=oe;for(;;){if(X===r)break t;if(Y===a&&++B===h&&(b=x),Y===m&&++J===c&&(D=x),(oe=X.nextSibling)!==null)break;X=Y,Y=X.parentNode}X=oe}a=b===-1||D===-1?null:{start:b,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Fd={focusedElem:r,selectionRange:a},Or=!1,he=i;he!==null;)if(i=he,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,he=r;else for(;he!==null;){i=he;try{var fe=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,ht=fe.memoizedState,L=i.stateNode,j=L.getSnapshotBeforeUpdate(i.elementType===i.type?pe:zn(i.type,pe),ht);L.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var F=i.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){ut(i,i.return,ee)}if(r=i.sibling,r!==null){r.return=i.return,he=r;break}he=i.return}return fe=jg,jg=!1,fe}function el(r,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&r)===r){var m=h.destroy;h.destroy=void 0,m!==void 0&&bh(i,a,m)}h=h.next}while(h!==c)}}function $u(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&r)===r){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function Ah(r){var i=r.ref;if(i!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof i=="function"?i(r):i.current=r}}function Vg(r){var i=r.alternate;i!==null&&(r.alternate=null,Vg(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[pr],delete i[$a],delete i[qd],delete i[i1],delete i[o1])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Og(r){return r.tag===5||r.tag===3||r.tag===4}function Lg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Og(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Ch(r,i,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(r,i):a.insertBefore(r,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(r,a)):(i=a,i.appendChild(r)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=wu));else if(c!==4&&(r=r.child,r!==null))for(Ch(r,i,a),r=r.sibling;r!==null;)Ch(r,i,a),r=r.sibling}function Nh(r,i,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(c!==4&&(r=r.child,r!==null))for(Nh(r,i,a),r=r.sibling;r!==null;)Nh(r,i,a),r=r.sibling}var Vt=null,Bn=!1;function Is(r,i,a){for(a=a.child;a!==null;)Mg(r,i,a),a=a.sibling}function Mg(r,i,a){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(li,a)}catch{}switch(a.tag){case 5:qt||Lo(a,i);case 6:var c=Vt,h=Bn;Vt=null,Is(r,i,a),Vt=c,Bn=h,Vt!==null&&(Bn?(r=Vt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):Vt.removeChild(a.stateNode));break;case 18:Vt!==null&&(Bn?(r=Vt,a=a.stateNode,r.nodeType===8?$d(r.parentNode,a):r.nodeType===1&&$d(r,a),ps(r)):$d(Vt,a.stateNode));break;case 4:c=Vt,h=Bn,Vt=a.stateNode.containerInfo,Bn=!0,Is(r,i,a),Vt=c,Bn=h;break;case 0:case 11:case 14:case 15:if(!qt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var m=h,x=m.destroy;m=m.tag,x!==void 0&&((m&2)!==0||(m&4)!==0)&&bh(a,i,x),h=h.next}while(h!==c)}Is(r,i,a);break;case 1:if(!qt&&(Lo(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(b){ut(a,i,b)}Is(r,i,a);break;case 21:Is(r,i,a);break;case 22:a.mode&1?(qt=(c=qt)||a.memoizedState!==null,Is(r,i,a),qt=c):Is(r,i,a);break;default:Is(r,i,a)}}function Ug(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new E1),i.forEach(function(c){var h=P1.bind(null,r,c);a.has(c)||(a.add(c),c.then(h,h))})}}function $n(r,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];try{var m=r,x=i,b=x;e:for(;b!==null;){switch(b.tag){case 5:Vt=b.stateNode,Bn=!1;break e;case 3:Vt=b.stateNode.containerInfo,Bn=!0;break e;case 4:Vt=b.stateNode.containerInfo,Bn=!0;break e}b=b.return}if(Vt===null)throw Error(t(160));Mg(m,x,h),Vt=null,Bn=!1;var D=h.alternate;D!==null&&(D.return=null),h.return=null}catch(B){ut(h,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Fg(i,r),i=i.sibling}function Fg(r,i){var a=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if($n(i,r),yr(r),c&4){try{el(3,r,r.return),$u(3,r)}catch(pe){ut(r,r.return,pe)}try{el(5,r,r.return)}catch(pe){ut(r,r.return,pe)}}break;case 1:$n(i,r),yr(r),c&512&&a!==null&&Lo(a,a.return);break;case 5:if($n(i,r),yr(r),c&512&&a!==null&&Lo(a,a.return),r.flags&32){var h=r.stateNode;try{ri(h,"")}catch(pe){ut(r,r.return,pe)}}if(c&4&&(h=r.stateNode,h!=null)){var m=r.memoizedProps,x=a!==null?a.memoizedProps:m,b=r.type,D=r.updateQueue;if(r.updateQueue=null,D!==null)try{b==="input"&&m.type==="radio"&&m.name!=null&&eo(h,m),ro(b,x);var B=ro(b,m);for(x=0;x<D.length;x+=2){var J=D[x],X=D[x+1];J==="style"?no(h,X):J==="dangerouslySetInnerHTML"?Gl(h,X):J==="children"?ri(h,X):ce(h,J,X,B)}switch(b){case"input":ni(h,m);break;case"textarea":Hl(h,m);break;case"select":var Y=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!m.multiple;var oe=m.value;oe!=null?Vn(h,!!m.multiple,oe,!1):Y!==!!m.multiple&&(m.defaultValue!=null?Vn(h,!!m.multiple,m.defaultValue,!0):Vn(h,!!m.multiple,m.multiple?[]:"",!1))}h[$a]=m}catch(pe){ut(r,r.return,pe)}}break;case 6:if($n(i,r),yr(r),c&4){if(r.stateNode===null)throw Error(t(162));h=r.stateNode,m=r.memoizedProps;try{h.nodeValue=m}catch(pe){ut(r,r.return,pe)}}break;case 3:if($n(i,r),yr(r),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ps(i.containerInfo)}catch(pe){ut(r,r.return,pe)}break;case 4:$n(i,r),yr(r);break;case 13:$n(i,r),yr(r),h=r.child,h.flags&8192&&(m=h.memoizedState!==null,h.stateNode.isHidden=m,!m||h.alternate!==null&&h.alternate.memoizedState!==null||(Dh=Ze())),c&4&&Ug(r);break;case 22:if(J=a!==null&&a.memoizedState!==null,r.mode&1?(qt=(B=qt)||J,$n(i,r),qt=B):$n(i,r),yr(r),c&8192){if(B=r.memoizedState!==null,(r.stateNode.isHidden=B)&&!J&&(r.mode&1)!==0)for(he=r,J=r.child;J!==null;){for(X=he=J;he!==null;){switch(Y=he,oe=Y.child,Y.tag){case 0:case 11:case 14:case 15:el(4,Y,Y.return);break;case 1:Lo(Y,Y.return);var fe=Y.stateNode;if(typeof fe.componentWillUnmount=="function"){c=Y,a=Y.return;try{i=c,fe.props=i.memoizedProps,fe.state=i.memoizedState,fe.componentWillUnmount()}catch(pe){ut(c,a,pe)}}break;case 5:Lo(Y,Y.return);break;case 22:if(Y.memoizedState!==null){$g(X);continue}}oe!==null?(oe.return=Y,he=oe):$g(X)}J=J.sibling}e:for(J=null,X=r;;){if(X.tag===5){if(J===null){J=X;try{h=X.stateNode,B?(m=h.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(b=X.stateNode,D=X.memoizedProps.style,x=D!=null&&D.hasOwnProperty("display")?D.display:null,b.style.display=is("display",x))}catch(pe){ut(r,r.return,pe)}}}else if(X.tag===6){if(J===null)try{X.stateNode.nodeValue=B?"":X.memoizedProps}catch(pe){ut(r,r.return,pe)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===r)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===r)break e;for(;X.sibling===null;){if(X.return===null||X.return===r)break e;J===X&&(J=null),X=X.return}J===X&&(J=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:$n(i,r),yr(r),c&4&&Ug(r);break;case 21:break;default:$n(i,r),yr(r)}}function yr(r){var i=r.flags;if(i&2){try{e:{for(var a=r.return;a!==null;){if(Og(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(ri(h,""),c.flags&=-33);var m=Lg(r);Nh(r,m,h);break;case 3:case 4:var x=c.stateNode.containerInfo,b=Lg(r);Ch(r,b,x);break;default:throw Error(t(161))}}catch(D){ut(r,r.return,D)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function I1(r,i,a){he=r,zg(r)}function zg(r,i,a){for(var c=(r.mode&1)!==0;he!==null;){var h=he,m=h.child;if(h.tag===22&&c){var x=h.memoizedState!==null||Bu;if(!x){var b=h.alternate,D=b!==null&&b.memoizedState!==null||qt;b=Bu;var B=qt;if(Bu=x,(qt=D)&&!B)for(he=h;he!==null;)x=he,D=x.child,x.tag===22&&x.memoizedState!==null?qg(h):D!==null?(D.return=x,he=D):qg(h);for(;m!==null;)he=m,zg(m),m=m.sibling;he=h,Bu=b,qt=B}Bg(r)}else(h.subtreeFlags&8772)!==0&&m!==null?(m.return=h,he=m):Bg(r)}}function Bg(r){for(;he!==null;){var i=he;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:qt||$u(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!qt)if(a===null)c.componentDidMount();else{var h=i.elementType===i.type?a.memoizedProps:zn(i.type,a.memoizedProps);c.componentDidUpdate(h,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&$m(i,m,c);break;case 3:var x=i.updateQueue;if(x!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}$m(i,x,a)}break;case 5:var b=i.stateNode;if(a===null&&i.flags&4){a=b;var D=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var J=B.memoizedState;if(J!==null){var X=J.dehydrated;X!==null&&ps(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}qt||i.flags&512&&Ah(i)}catch(Y){ut(i,i.return,Y)}}if(i===r){he=null;break}if(a=i.sibling,a!==null){a.return=i.return,he=a;break}he=i.return}}function $g(r){for(;he!==null;){var i=he;if(i===r){he=null;break}var a=i.sibling;if(a!==null){a.return=i.return,he=a;break}he=i.return}}function qg(r){for(;he!==null;){var i=he;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{$u(4,i)}catch(D){ut(i,a,D)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var h=i.return;try{c.componentDidMount()}catch(D){ut(i,h,D)}}var m=i.return;try{Ah(i)}catch(D){ut(i,m,D)}break;case 5:var x=i.return;try{Ah(i)}catch(D){ut(i,x,D)}}}catch(D){ut(i,i.return,D)}if(i===r){he=null;break}var b=i.sibling;if(b!==null){b.return=i.return,he=b;break}he=i.return}}var S1=Math.ceil,qu=ke.ReactCurrentDispatcher,Rh=ke.ReactCurrentOwner,Cn=ke.ReactCurrentBatchConfig,We=0,Nt=null,vt=null,Ot=0,_n=0,Mo=_s(0),kt=0,tl=null,Ii=0,Wu=0,Ph=0,nl=null,nn=null,Dh=0,Uo=1/0,Hr=null,Hu=!1,jh=null,Ss=null,Gu=!1,ks=null,Ku=0,rl=0,Vh=null,Qu=-1,Yu=0;function Yt(){return(We&6)!==0?Ze():Qu!==-1?Qu:Qu=Ze()}function bs(r){return(r.mode&1)===0?1:(We&2)!==0&&Ot!==0?Ot&-Ot:l1.transition!==null?(Yu===0&&(Yu=Ia()),Yu):(r=ze,r!==0||(r=window.event,r=r===void 0?16:po(r.type)),r)}function qn(r,i,a,c){if(50<rl)throw rl=0,Vh=null,Error(t(185));hi(r,a,c),((We&2)===0||r!==Nt)&&(r===Nt&&((We&2)===0&&(Wu|=a),kt===4&&As(r,Ot)),rn(r,c),a===1&&We===0&&(i.mode&1)===0&&(Uo=Ze()+500,Iu&&xs()))}function rn(r,i){var a=r.callbackNode;di(r,i);var c=Dr(r,r===Nt?Ot:0);if(c===0)a!==null&&oo(a),r.callbackNode=null,r.callbackPriority=0;else if(i=c&-c,r.callbackPriority!==i){if(a!=null&&oo(a),i===1)r.tag===0?a1(Hg.bind(null,r)):Rm(Hg.bind(null,r)),r1(function(){(We&6)===0&&xs()}),a=null;else{switch(sr(c)){case 1:a=ao;break;case 4:a=xa;break;case 16:a=ai;break;case 536870912:a=lo;break;default:a=ai}a=ey(a,Wg.bind(null,r))}r.callbackPriority=i,r.callbackNode=a}}function Wg(r,i){if(Qu=-1,Yu=0,(We&6)!==0)throw Error(t(327));var a=r.callbackNode;if(Fo()&&r.callbackNode!==a)return null;var c=Dr(r,r===Nt?Ot:0);if(c===0)return null;if((c&30)!==0||(c&r.expiredLanes)!==0||i)i=Ju(r,c);else{i=c;var h=We;We|=2;var m=Kg();(Nt!==r||Ot!==i)&&(Hr=null,Uo=Ze()+500,ki(r,i));do try{A1();break}catch(b){Gg(r,b)}while(!0);Zd(),qu.current=m,We=h,vt!==null?i=0:(Nt=null,Ot=0,i=kt)}if(i!==0){if(i===2&&(h=Ta(r),h!==0&&(c=h,i=Oh(r,h))),i===1)throw a=tl,ki(r,0),As(r,c),rn(r,Ze()),a;if(i===6)As(r,c);else{if(h=r.current.alternate,(c&30)===0&&!k1(h)&&(i=Ju(r,c),i===2&&(m=Ta(r),m!==0&&(c=m,i=Oh(r,m))),i===1))throw a=tl,ki(r,0),As(r,c),rn(r,Ze()),a;switch(r.finishedWork=h,r.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:bi(r,nn,Hr);break;case 3:if(As(r,c),(c&130023424)===c&&(i=Dh+500-Ze(),10<i)){if(Dr(r,0)!==0)break;if(h=r.suspendedLanes,(h&c)!==c){Yt(),r.pingedLanes|=r.suspendedLanes&h;break}r.timeoutHandle=Bd(bi.bind(null,r,nn,Hr),i);break}bi(r,nn,Hr);break;case 4:if(As(r,c),(c&4194240)===c)break;for(i=r.eventTimes,h=-1;0<c;){var x=31-hn(c);m=1<<x,x=i[x],x>h&&(h=x),c&=~m}if(c=h,c=Ze()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*S1(c/1960))-c,10<c){r.timeoutHandle=Bd(bi.bind(null,r,nn,Hr),c);break}bi(r,nn,Hr);break;case 5:bi(r,nn,Hr);break;default:throw Error(t(329))}}}return rn(r,Ze()),r.callbackNode===a?Wg.bind(null,r):null}function Oh(r,i){var a=nl;return r.current.memoizedState.isDehydrated&&(ki(r,i).flags|=256),r=Ju(r,i),r!==2&&(i=nn,nn=a,i!==null&&Lh(i)),r}function Lh(r){nn===null?nn=r:nn.push.apply(nn,r)}function k1(r){for(var i=r;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var h=a[c],m=h.getSnapshot;h=h.value;try{if(!Un(m(),h))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function As(r,i){for(i&=~Ph,i&=~Wu,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var a=31-hn(i),c=1<<a;r[a]=-1,i&=~c}}function Hg(r){if((We&6)!==0)throw Error(t(327));Fo();var i=Dr(r,0);if((i&1)===0)return rn(r,Ze()),null;var a=Ju(r,i);if(r.tag!==0&&a===2){var c=Ta(r);c!==0&&(i=c,a=Oh(r,c))}if(a===1)throw a=tl,ki(r,0),As(r,i),rn(r,Ze()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,bi(r,nn,Hr),rn(r,Ze()),null}function Mh(r,i){var a=We;We|=1;try{return r(i)}finally{We=a,We===0&&(Uo=Ze()+500,Iu&&xs())}}function Si(r){ks!==null&&ks.tag===0&&(We&6)===0&&Fo();var i=We;We|=1;var a=Cn.transition,c=ze;try{if(Cn.transition=null,ze=1,r)return r()}finally{ze=c,Cn.transition=a,We=i,(We&6)===0&&xs()}}function Uh(){_n=Mo.current,tt(Mo)}function ki(r,i){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,n1(a)),vt!==null)for(a=vt.return;a!==null;){var c=a;switch(Kd(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Eu();break;case 3:Vo(),tt(Zt),tt(zt),ah();break;case 5:ih(c);break;case 4:Vo();break;case 13:tt(it);break;case 19:tt(it);break;case 10:eh(c.type._context);break;case 22:case 23:Uh()}a=a.return}if(Nt=r,vt=r=Cs(r.current,null),Ot=_n=i,kt=0,tl=null,Ph=Wu=Ii=0,nn=nl=null,xi!==null){for(i=0;i<xi.length;i++)if(a=xi[i],c=a.interleaved,c!==null){a.interleaved=null;var h=c.next,m=a.pending;if(m!==null){var x=m.next;m.next=h,c.next=x}a.pending=c}xi=null}return r}function Gg(r,i){do{var a=vt;try{if(Zd(),ju.current=Mu,Vu){for(var c=ot.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Vu=!1}if(Ti=0,Ct=St=ot=null,Qa=!1,Ya=0,Rh.current=null,a===null||a.return===null){kt=1,tl=i,vt=null;break}e:{var m=r,x=a.return,b=a,D=i;if(i=Ot,b.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var B=D,J=b,X=J.tag;if((J.mode&1)===0&&(X===0||X===11||X===15)){var Y=J.alternate;Y?(J.updateQueue=Y.updateQueue,J.memoizedState=Y.memoizedState,J.lanes=Y.lanes):(J.updateQueue=null,J.memoizedState=null)}var oe=vg(x);if(oe!==null){oe.flags&=-257,_g(oe,x,b,m,i),oe.mode&1&&yg(m,B,i),i=oe,D=B;var fe=i.updateQueue;if(fe===null){var pe=new Set;pe.add(D),i.updateQueue=pe}else fe.add(D);break e}else{if((i&1)===0){yg(m,B,i),Fh();break e}D=Error(t(426))}}else if(st&&b.mode&1){var ht=vg(x);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),_g(ht,x,b,m,i),Jd(Oo(D,b));break e}}m=D=Oo(D,b),kt!==4&&(kt=2),nl===null?nl=[m]:nl.push(m),m=x;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var L=mg(m,D,i);Bm(m,L);break e;case 1:b=D;var j=m.type,F=m.stateNode;if((m.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Ss===null||!Ss.has(F)))){m.flags|=65536,i&=-i,m.lanes|=i;var ee=gg(m,b,i);Bm(m,ee);break e}}m=m.return}while(m!==null)}Yg(a)}catch(me){i=me,vt===a&&a!==null&&(vt=a=a.return);continue}break}while(!0)}function Kg(){var r=qu.current;return qu.current=Mu,r===null?Mu:r}function Fh(){(kt===0||kt===3||kt===2)&&(kt=4),Nt===null||(Ii&268435455)===0&&(Wu&268435455)===0||As(Nt,Ot)}function Ju(r,i){var a=We;We|=2;var c=Kg();(Nt!==r||Ot!==i)&&(Hr=null,ki(r,i));do try{b1();break}catch(h){Gg(r,h)}while(!0);if(Zd(),We=a,qu.current=c,vt!==null)throw Error(t(261));return Nt=null,Ot=0,kt}function b1(){for(;vt!==null;)Qg(vt)}function A1(){for(;vt!==null&&!oi();)Qg(vt)}function Qg(r){var i=Zg(r.alternate,r,_n);r.memoizedProps=r.pendingProps,i===null?Yg(r):vt=i,Rh.current=null}function Yg(r){var i=r;do{var a=i.alternate;if(r=i.return,(i.flags&32768)===0){if(a=w1(a,i,_n),a!==null){vt=a;return}}else{if(a=x1(a,i),a!==null){a.flags&=32767,vt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{kt=6,vt=null;return}}if(i=i.sibling,i!==null){vt=i;return}vt=i=r}while(i!==null);kt===0&&(kt=5)}function bi(r,i,a){var c=ze,h=Cn.transition;try{Cn.transition=null,ze=1,C1(r,i,a,c)}finally{Cn.transition=h,ze=c}return null}function C1(r,i,a,c){do Fo();while(ks!==null);if((We&6)!==0)throw Error(t(327));a=r.finishedWork;var h=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var m=a.lanes|a.childLanes;if(kd(r,m),r===Nt&&(vt=Nt=null,Ot=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Gu||(Gu=!0,ey(ai,function(){return Fo(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=Cn.transition,Cn.transition=null;var x=ze;ze=1;var b=We;We|=4,Rh.current=null,T1(r,a),Fg(a,r),Qx(Fd),Or=!!Ud,Fd=Ud=null,r.current=a,I1(a),Pr(),We=b,ze=x,Cn.transition=m}else r.current=a;if(Gu&&(Gu=!1,ks=r,Ku=h),m=r.pendingLanes,m===0&&(Ss=null),su(a.stateNode),rn(r,Ze()),i!==null)for(c=r.onRecoverableError,a=0;a<i.length;a++)h=i[a],c(h.value,{componentStack:h.stack,digest:h.digest});if(Hu)throw Hu=!1,r=jh,jh=null,r;return(Ku&1)!==0&&r.tag!==0&&Fo(),m=r.pendingLanes,(m&1)!==0?r===Vh?rl++:(rl=0,Vh=r):rl=0,xs(),null}function Fo(){if(ks!==null){var r=sr(Ku),i=Cn.transition,a=ze;try{if(Cn.transition=null,ze=16>r?16:r,ks===null)var c=!1;else{if(r=ks,ks=null,Ku=0,(We&6)!==0)throw Error(t(331));var h=We;for(We|=4,he=r.current;he!==null;){var m=he,x=m.child;if((he.flags&16)!==0){var b=m.deletions;if(b!==null){for(var D=0;D<b.length;D++){var B=b[D];for(he=B;he!==null;){var J=he;switch(J.tag){case 0:case 11:case 15:el(8,J,m)}var X=J.child;if(X!==null)X.return=J,he=X;else for(;he!==null;){J=he;var Y=J.sibling,oe=J.return;if(Vg(J),J===B){he=null;break}if(Y!==null){Y.return=oe,he=Y;break}he=oe}}}var fe=m.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var ht=pe.sibling;pe.sibling=null,pe=ht}while(pe!==null)}}he=m}}if((m.subtreeFlags&2064)!==0&&x!==null)x.return=m,he=x;else e:for(;he!==null;){if(m=he,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:el(9,m,m.return)}var L=m.sibling;if(L!==null){L.return=m.return,he=L;break e}he=m.return}}var j=r.current;for(he=j;he!==null;){x=he;var F=x.child;if((x.subtreeFlags&2064)!==0&&F!==null)F.return=x,he=F;else e:for(x=j;he!==null;){if(b=he,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:$u(9,b)}}catch(me){ut(b,b.return,me)}if(b===x){he=null;break e}var ee=b.sibling;if(ee!==null){ee.return=b.return,he=ee;break e}he=b.return}}if(We=h,xs(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(li,r)}catch{}c=!0}return c}finally{ze=a,Cn.transition=i}}return!1}function Jg(r,i,a){i=Oo(a,i),i=mg(r,i,1),r=Ts(r,i,1),i=Yt(),r!==null&&(hi(r,1,i),rn(r,i))}function ut(r,i,a){if(r.tag===3)Jg(r,r,a);else for(;i!==null;){if(i.tag===3){Jg(i,r,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ss===null||!Ss.has(c))){r=Oo(a,r),r=gg(i,r,1),i=Ts(i,r,1),r=Yt(),i!==null&&(hi(i,1,r),rn(i,r));break}}i=i.return}}function N1(r,i,a){var c=r.pingCache;c!==null&&c.delete(i),i=Yt(),r.pingedLanes|=r.suspendedLanes&a,Nt===r&&(Ot&a)===a&&(kt===4||kt===3&&(Ot&130023424)===Ot&&500>Ze()-Dh?ki(r,0):Ph|=a),rn(r,i)}function Xg(r,i){i===0&&((r.mode&1)===0?i=1:(i=ds,ds<<=1,(ds&130023424)===0&&(ds=4194304)));var a=Yt();r=$r(r,i),r!==null&&(hi(r,i,a),rn(r,a))}function R1(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),Xg(r,a)}function P1(r,i){var a=0;switch(r.tag){case 13:var c=r.stateNode,h=r.memoizedState;h!==null&&(a=h.retryLane);break;case 19:c=r.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),Xg(r,a)}var Zg;Zg=function(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps||Zt.current)tn=!0;else{if((r.lanes&a)===0&&(i.flags&128)===0)return tn=!1,_1(r,i,a);tn=(r.flags&131072)!==0}else tn=!1,st&&(i.flags&1048576)!==0&&Pm(i,ku,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;zu(r,i),r=i.pendingProps;var h=Ao(i,zt.current);jo(i,a),h=ch(null,i,c,r,h,a);var m=dh();return i.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,en(c)?(m=!0,Tu(i)):m=!1,i.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,rh(i),h.updater=Uu,i.stateNode=h,h._reactInternals=i,yh(i,c,r,a),i=xh(null,i,c,!0,m,a)):(i.tag=0,st&&m&&Gd(i),Qt(null,i,h,a),i=i.child),i;case 16:c=i.elementType;e:{switch(zu(r,i),r=i.pendingProps,h=c._init,c=h(c._payload),i.type=c,h=i.tag=j1(c),r=zn(c,r),h){case 0:i=wh(null,i,c,r,a);break e;case 1:i=Sg(null,i,c,r,a);break e;case 11:i=wg(null,i,c,r,a);break e;case 14:i=xg(null,i,c,zn(c.type,r),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:zn(c,h),wh(r,i,c,h,a);case 1:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:zn(c,h),Sg(r,i,c,h,a);case 3:e:{if(kg(i),r===null)throw Error(t(387));c=i.pendingProps,m=i.memoizedState,h=m.element,zm(r,i),Pu(i,c,null,a);var x=i.memoizedState;if(c=x.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){h=Oo(Error(t(423)),i),i=bg(r,i,c,a,h);break e}else if(c!==h){h=Oo(Error(t(424)),i),i=bg(r,i,c,a,h);break e}else for(vn=vs(i.stateNode.containerInfo.firstChild),yn=i,st=!0,Fn=null,a=Um(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ro(),c===h){i=Wr(r,i,a);break e}Qt(r,i,c,a)}i=i.child}return i;case 5:return qm(i),r===null&&Yd(i),c=i.type,h=i.pendingProps,m=r!==null?r.memoizedProps:null,x=h.children,zd(c,h)?x=null:m!==null&&zd(c,m)&&(i.flags|=32),Ig(r,i),Qt(r,i,x,a),i.child;case 6:return r===null&&Yd(i),null;case 13:return Ag(r,i,a);case 4:return sh(i,i.stateNode.containerInfo),c=i.pendingProps,r===null?i.child=Po(i,null,c,a):Qt(r,i,c,a),i.child;case 11:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:zn(c,h),wg(r,i,c,h,a);case 7:return Qt(r,i,i.pendingProps,a),i.child;case 8:return Qt(r,i,i.pendingProps.children,a),i.child;case 12:return Qt(r,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,h=i.pendingProps,m=i.memoizedProps,x=h.value,Je(Cu,c._currentValue),c._currentValue=x,m!==null)if(Un(m.value,x)){if(m.children===h.children&&!Zt.current){i=Wr(r,i,a);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var b=m.dependencies;if(b!==null){x=m.child;for(var D=b.firstContext;D!==null;){if(D.context===c){if(m.tag===1){D=qr(-1,a&-a),D.tag=2;var B=m.updateQueue;if(B!==null){B=B.shared;var J=B.pending;J===null?D.next=D:(D.next=J.next,J.next=D),B.pending=D}}m.lanes|=a,D=m.alternate,D!==null&&(D.lanes|=a),th(m.return,a,i),b.lanes|=a;break}D=D.next}}else if(m.tag===10)x=m.type===i.type?null:m.child;else if(m.tag===18){if(x=m.return,x===null)throw Error(t(341));x.lanes|=a,b=x.alternate,b!==null&&(b.lanes|=a),th(x,a,i),x=m.sibling}else x=m.child;if(x!==null)x.return=m;else for(x=m;x!==null;){if(x===i){x=null;break}if(m=x.sibling,m!==null){m.return=x.return,x=m;break}x=x.return}m=x}Qt(r,i,h.children,a),i=i.child}return i;case 9:return h=i.type,c=i.pendingProps.children,jo(i,a),h=bn(h),c=c(h),i.flags|=1,Qt(r,i,c,a),i.child;case 14:return c=i.type,h=zn(c,i.pendingProps),h=zn(c.type,h),xg(r,i,c,h,a);case 15:return Eg(r,i,i.type,i.pendingProps,a);case 17:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:zn(c,h),zu(r,i),i.tag=1,en(c)?(r=!0,Tu(i)):r=!1,jo(i,a),fg(i,c,h),yh(i,c,h,a),xh(null,i,c,!0,r,a);case 19:return Ng(r,i,a);case 22:return Tg(r,i,a)}throw Error(t(156,i.tag))};function ey(r,i){return wa(r,i)}function D1(r,i,a,c){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(r,i,a,c){return new D1(r,i,a,c)}function zh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function j1(r){if(typeof r=="function")return zh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===N)return 11;if(r===Le)return 14}return 2}function Cs(r,i){var a=r.alternate;return a===null?(a=Nn(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Xu(r,i,a,c,h,m){var x=2;if(c=r,typeof r=="function")zh(r)&&(x=1);else if(typeof r=="string")x=5;else e:switch(r){case R:return Ai(a.children,h,m,i);case k:x=8,h|=8;break;case C:return r=Nn(12,a,i,h|2),r.elementType=C,r.lanes=m,r;case I:return r=Nn(13,a,i,h),r.elementType=I,r.lanes=m,r;case ye:return r=Nn(19,a,i,h),r.elementType=ye,r.lanes=m,r;case $e:return Zu(a,h,m,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case A:x=10;break e;case P:x=9;break e;case N:x=11;break e;case Le:x=14;break e;case De:x=16,c=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=Nn(x,a,i,h),i.elementType=r,i.type=c,i.lanes=m,i}function Ai(r,i,a,c){return r=Nn(7,r,c,i),r.lanes=a,r}function Zu(r,i,a,c){return r=Nn(22,r,c,i),r.elementType=$e,r.lanes=a,r.stateNode={isHidden:!1},r}function Bh(r,i,a){return r=Nn(6,r,null,i),r.lanes=a,r}function $h(r,i,a){return i=Nn(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function V1(r,i,a,c,h){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sa(0),this.expirationTimes=Sa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sa(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function qh(r,i,a,c,h,m,x,b,D){return r=new V1(r,i,a,b,D),i===1?(i=1,m===!0&&(i|=8)):i=0,m=Nn(3,null,null,i),r.current=m,m.stateNode=r,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},rh(m),r}function O1(r,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xe,key:c==null?null:""+c,children:r,containerInfo:i,implementation:a}}function ty(r){if(!r)return ws;r=r._reactInternals;e:{if(Ln(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(en(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(en(a))return Cm(r,a,i)}return i}function ny(r,i,a,c,h,m,x,b,D){return r=qh(a,c,!0,r,h,m,x,b,D),r.context=ty(null),a=r.current,c=Yt(),h=bs(a),m=qr(c,h),m.callback=i??null,Ts(a,m,h),r.current.lanes=h,hi(r,h,c),rn(r,c),r}function ec(r,i,a,c){var h=i.current,m=Yt(),x=bs(h);return a=ty(a),i.context===null?i.context=a:i.pendingContext=a,i=qr(m,x),i.payload={element:r},c=c===void 0?null:c,c!==null&&(i.callback=c),r=Ts(h,i,x),r!==null&&(qn(r,h,x,m),Ru(r,h,x)),x}function tc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function ry(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function Wh(r,i){ry(r,i),(r=r.alternate)&&ry(r,i)}function L1(){return null}var sy=typeof reportError=="function"?reportError:function(r){console.error(r)};function Hh(r){this._internalRoot=r}nc.prototype.render=Hh.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));ec(r,i,null,null)},nc.prototype.unmount=Hh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;Si(function(){ec(null,r,null,null)}),i[Ur]=null}};function nc(r){this._internalRoot=r}nc.prototype.unstable_scheduleHydration=function(r){if(r){var i=Ca();r={blockedOn:null,target:r,priority:i};for(var a=0;a<fn.length&&i!==0&&i<fn[a].priority;a++);fn.splice(a,0,r),a===0&&ho(r)}};function Gh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function rc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function iy(){}function M1(r,i,a,c,h){if(h){if(typeof c=="function"){var m=c;c=function(){var B=tc(x);m.call(B)}}var x=ny(i,c,r,0,null,!1,!1,"",iy);return r._reactRootContainer=x,r[Ur]=x.current,za(r.nodeType===8?r.parentNode:r),Si(),x}for(;h=r.lastChild;)r.removeChild(h);if(typeof c=="function"){var b=c;c=function(){var B=tc(D);b.call(B)}}var D=qh(r,0,!1,null,null,!1,!1,"",iy);return r._reactRootContainer=D,r[Ur]=D.current,za(r.nodeType===8?r.parentNode:r),Si(function(){ec(i,D,a,c)}),D}function sc(r,i,a,c,h){var m=a._reactRootContainer;if(m){var x=m;if(typeof h=="function"){var b=h;h=function(){var D=tc(x);b.call(D)}}ec(i,x,r,h)}else x=M1(a,i,r,h,c);return tc(x)}ba=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var a=Ge(i.pendingLanes);a!==0&&(ka(i,a|1),rn(i,Ze()),(We&6)===0&&(Uo=Ze()+500,xs()))}break;case 13:Si(function(){var c=$r(r,1);if(c!==null){var h=Yt();qn(c,r,1,h)}}),Wh(r,1)}},uo=function(r){if(r.tag===13){var i=$r(r,134217728);if(i!==null){var a=Yt();qn(i,r,134217728,a)}Wh(r,134217728)}},Aa=function(r){if(r.tag===13){var i=bs(r),a=$r(r,i);if(a!==null){var c=Yt();qn(a,r,i,c)}Wh(r,i)}},Ca=function(){return ze},Na=function(r,i){var a=ze;try{return ze=r,i()}finally{ze=a}},Cr=function(r,i,a){switch(i){case"input":if(ni(r,a),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==r&&c.form===r.form){var h=xu(c);if(!h)throw Error(t(90));ti(c),ni(c,h)}}}break;case"textarea":Hl(r,a);break;case"select":i=a.value,i!=null&&Vn(r,!!a.multiple,i,!1)}},Ql=Mh,Yl=Si;var U1={usingClientEntryPoint:!1,Events:[qa,ko,xu,as,ls,Mh]},sl={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},F1={bundleType:sl.bundleType,version:sl.version,rendererPackageName:sl.rendererPackageName,rendererConfig:sl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ke.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ru(r),r===null?null:r.stateNode},findFiberByHostInstance:sl.findFiberByHostInstance||L1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{li=ic.inject(F1),dn=ic}catch{}}return sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U1,sn.createPortal=function(r,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gh(i))throw Error(t(200));return O1(r,i,null,a)},sn.createRoot=function(r,i){if(!Gh(r))throw Error(t(299));var a=!1,c="",h=sy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(h=i.onRecoverableError)),i=qh(r,1,!1,null,null,a,!1,c,h),r[Ur]=i.current,za(r.nodeType===8?r.parentNode:r),new Hh(i)},sn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ru(i),r=r===null?null:r.stateNode,r},sn.flushSync=function(r){return Si(r)},sn.hydrate=function(r,i,a){if(!rc(i))throw Error(t(200));return sc(null,r,i,!0,a)},sn.hydrateRoot=function(r,i,a){if(!Gh(r))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,h=!1,m="",x=sy;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),i=ny(i,null,r,1,a??null,h,!1,m,x),r[Ur]=i.current,za(r),c)for(r=0;r<c.length;r++)a=c[r],h=a._getVersion,h=h(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,h]:i.mutableSourceEagerHydrationData.push(a,h);return new nc(i)},sn.render=function(r,i,a){if(!rc(i))throw Error(t(200));return sc(null,r,i,!1,a)},sn.unmountComponentAtNode=function(r){if(!rc(r))throw Error(t(40));return r._reactRootContainer?(Si(function(){sc(null,null,r,!1,function(){r._reactRootContainer=null,r[Ur]=null})}),!0):!1},sn.unstable_batchedUpdates=Mh,sn.unstable_renderSubtreeIntoContainer=function(r,i,a,c){if(!rc(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return sc(r,i,a,!1,c)},sn.version="18.3.1-next-f1338f8080-20240426",sn}var fy;function cv(){if(fy)return Yh.exports;fy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Yh.exports=Q1(),Yh.exports}var py;function Y1(){if(py)return oc;py=1;var n=cv();return oc.createRoot=n.createRoot,oc.hydrateRoot=n.hydrateRoot,oc}var J1=Y1();const X1=uv(J1);cv();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xl(){return xl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},xl.apply(this,arguments)}var Os;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Os||(Os={}));const my="popstate";function Z1(n){n===void 0&&(n={});function e(o,l){let{pathname:d="/",search:p="",hash:y=""}=Hi(o.location.hash.substr(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),vf("",{pathname:d,search:p,hash:y},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let d=o.document.querySelector("base"),p="";if(d&&d.getAttribute("href")){let y=o.location.href,v=y.indexOf("#");p=v===-1?y:y.slice(0,v)}return p+"#"+(typeof l=="string"?l:dv(l))}function s(o,l){Kc(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return tE(e,t,s,n)}function Tt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Kc(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eE(){return Math.random().toString(36).substr(2,8)}function gy(n,e){return{usr:n.state,key:n.key,idx:e}}function vf(n,e,t,s){return t===void 0&&(t=null),xl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Hi(e):e,{state:t,key:e&&e.key||s||eE()})}function dv(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Hi(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function tE(n,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,d=o.history,p=Os.Pop,y=null,v=w();v==null&&(v=0,d.replaceState(xl({},d.state,{idx:v}),""));function w(){return(d.state||{idx:null}).idx}function E(){p=Os.Pop;let z=w(),re=z==null?null:z-v;v=z,y&&y({action:p,location:W.location,delta:re})}function S(z,re){p=Os.Push;let te=vf(W.location,z,re);t&&t(te,z),v=w()+1;let ce=gy(te,v),ke=W.createHref(te);try{d.pushState(ce,"",ke)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;o.location.assign(ke)}l&&y&&y({action:p,location:W.location,delta:1})}function O(z,re){p=Os.Replace;let te=vf(W.location,z,re);t&&t(te,z),v=w();let ce=gy(te,v),ke=W.createHref(te);d.replaceState(ce,"",ke),l&&y&&y({action:p,location:W.location,delta:0})}function H(z){let re=o.location.origin!=="null"?o.location.origin:o.location.href,te=typeof z=="string"?z:dv(z);return te=te.replace(/ $/,"%20"),Tt(re,"No window.location.(origin|href) available to create URL for href: "+te),new URL(te,re)}let W={get action(){return p},get location(){return n(o,d)},listen(z){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(my,E),y=z,()=>{o.removeEventListener(my,E),y=null}},createHref(z){return e(o,z)},createURL:H,encodeLocation(z){let re=H(z);return{pathname:re.pathname,search:re.search,hash:re.hash}},push:S,replace:O,go(z){return d.go(z)}};return W}var yy;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(yy||(yy={}));function nE(n,e,t){return t===void 0&&(t="/"),rE(n,e,t)}function rE(n,e,t,s){let o=typeof e=="string"?Hi(e):e,l=pv(o.pathname||"/",t);if(l==null)return null;let d=hv(n);sE(d);let p=null;for(let y=0;p==null&&y<d.length;++y){let v=gE(l);p=fE(d[y],v)}return p}function hv(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,d,p)=>{let y={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};y.relativePath.startsWith("/")&&(Tt(y.relativePath.startsWith(s),'Absolute route path "'+y.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),y.relativePath=y.relativePath.slice(s.length));let v=Li([s,y.relativePath]),w=t.concat(y);l.children&&l.children.length>0&&(Tt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),hv(l.children,e,w,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:dE(v,l.index),routesMeta:w})};return n.forEach((l,d)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,d);else for(let y of fv(l.path))o(l,d,y)}),e}function fv(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let d=fv(s.join("/")),p=[];return p.push(...d.map(y=>y===""?l:[l,y].join("/"))),o&&p.push(...d),p.map(y=>n.startsWith("/")&&y===""?"/":y)}function sE(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:hE(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const iE=/^:[\w-]+$/,oE=3,aE=2,lE=1,uE=10,cE=-2,vy=n=>n==="*";function dE(n,e){let t=n.split("/"),s=t.length;return t.some(vy)&&(s+=cE),e&&(s+=aE),t.filter(o=>!vy(o)).reduce((o,l)=>o+(iE.test(l)?oE:l===""?lE:uE),s)}function hE(n,e){return n.length===e.length&&n.slice(0,-1).every((s,o)=>s===e[o])?n[n.length-1]-e[e.length-1]:0}function fE(n,e,t){let{routesMeta:s}=n,o={},l="/",d=[];for(let p=0;p<s.length;++p){let y=s[p],v=p===s.length-1,w=l==="/"?e:e.slice(l.length)||"/",E=pE({path:y.relativePath,caseSensitive:y.caseSensitive,end:v},w),S=y.route;if(!E)return null;Object.assign(o,E.params),d.push({params:o,pathname:Li([l,E.pathname]),pathnameBase:xE(Li([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=Li([l,E.pathnameBase]))}return d}function pE(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=mE(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:s.reduce((v,w,E)=>{let{paramName:S,isOptional:O}=w;if(S==="*"){let W=p[E]||"";d=l.slice(0,l.length-W.length).replace(/(.)\/+$/,"$1")}const H=p[E];return O&&!H?v[S]=void 0:v[S]=(H||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:d,pattern:n}}function mE(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Kc(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,y)=>(s.push({paramName:p,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function gE(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kc(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function pv(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}const yE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vE=n=>yE.test(n);function _E(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof n=="string"?Hi(n):n,l;if(t)if(vE(t))l=t;else{if(t.includes("//")){let d=t;t=t.replace(/\/\/+/g,"/"),Kc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+t))}t.startsWith("/")?l=_y(t.substring(1),"/"):l=_y(t,e)}else l=e;return{pathname:l,search:EE(s),hash:TE(o)}}function _y(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Zh(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wE(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function mv(n,e){let t=wE(n);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function gv(n,e,t,s){s===void 0&&(s=!1);let o;typeof n=="string"?o=Hi(n):(o=xl({},n),Tt(!o.pathname||!o.pathname.includes("?"),Zh("?","pathname","search",o)),Tt(!o.pathname||!o.pathname.includes("#"),Zh("#","pathname","hash",o)),Tt(!o.search||!o.search.includes("#"),Zh("#","search","hash",o)));let l=n===""||o.pathname==="",d=l?"/":o.pathname,p;if(d==null)p=t;else{let E=e.length-1;if(!s&&d.startsWith("..")){let S=d.split("/");for(;S[0]==="..";)S.shift(),E-=1;o.pathname=S.join("/")}p=E>=0?e[E]:"/"}let y=_E(o,p),v=d&&d!=="/"&&d.endsWith("/"),w=(l||d===".")&&t.endsWith("/");return!y.pathname.endsWith("/")&&(v||w)&&(y.pathname+="/"),y}const Li=n=>n.join("/").replace(/\/\/+/g,"/"),xE=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),EE=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,TE=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function IE(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const yv=["post","put","patch","delete"];new Set(yv);const SE=["get",...yv];new Set(SE);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function El(){return El=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},El.apply(this,arguments)}const Gf=q.createContext(null),kE=q.createContext(null),Dl=q.createContext(null),Qc=q.createContext(null),Ys=q.createContext({outlet:null,matches:[],isDataRoute:!1}),vv=q.createContext(null);function jl(){return q.useContext(Qc)!=null}function Kf(){return jl()||Tt(!1),q.useContext(Qc).location}function _v(n){q.useContext(Dl).static||q.useLayoutEffect(n)}function es(){let{isDataRoute:n}=q.useContext(Ys);return n?UE():bE()}function bE(){jl()||Tt(!1);let n=q.useContext(Gf),{basename:e,future:t,navigator:s}=q.useContext(Dl),{matches:o}=q.useContext(Ys),{pathname:l}=Kf(),d=JSON.stringify(mv(o,t.v7_relativeSplatPath)),p=q.useRef(!1);return _v(()=>{p.current=!0}),q.useCallback(function(v,w){if(w===void 0&&(w={}),!p.current)return;if(typeof v=="number"){s.go(v);return}let E=gv(v,JSON.parse(d),l,w.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Li([e,E.pathname])),(w.replace?s.replace:s.push)(E,w.state,w)},[e,s,d,l,n])}function wv(){let{matches:n}=q.useContext(Ys),e=n[n.length-1];return e?e.params:{}}function AE(n,e){return CE(n,e)}function CE(n,e,t,s){jl()||Tt(!1);let{navigator:o}=q.useContext(Dl),{matches:l}=q.useContext(Ys),d=l[l.length-1],p=d?d.params:{};d&&d.pathname;let y=d?d.pathnameBase:"/";d&&d.route;let v=Kf(),w;if(e){var E;let z=typeof e=="string"?Hi(e):e;y==="/"||(E=z.pathname)!=null&&E.startsWith(y)||Tt(!1),w=z}else w=v;let S=w.pathname||"/",O=S;if(y!=="/"){let z=y.replace(/^\//,"").split("/");O="/"+S.replace(/^\//,"").split("/").slice(z.length).join("/")}let H=nE(n,{pathname:O}),W=jE(H&&H.map(z=>Object.assign({},z,{params:Object.assign({},p,z.params),pathname:Li([y,o.encodeLocation?o.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?y:Li([y,o.encodeLocation?o.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),l,t,s);return e&&W?q.createElement(Qc.Provider,{value:{location:El({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:Os.Pop}},W):W}function NE(){let n=ME(),e=IE(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:o},t):null,null)}const RE=q.createElement(NE,null);class PE extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?q.createElement(Ys.Provider,{value:this.props.routeContext},q.createElement(vv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function DE(n){let{routeContext:e,match:t,children:s}=n,o=q.useContext(Gf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),q.createElement(Ys.Provider,{value:e},s)}function jE(n,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let d=n,p=(o=t)==null?void 0:o.errors;if(p!=null){let w=d.findIndex(E=>E.route.id&&(p==null?void 0:p[E.route.id])!==void 0);w>=0||Tt(!1),d=d.slice(0,Math.min(d.length,w+1))}let y=!1,v=-1;if(t&&s&&s.v7_partialHydration)for(let w=0;w<d.length;w++){let E=d[w];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(v=w),E.route.id){let{loaderData:S,errors:O}=t,H=E.route.loader&&S[E.route.id]===void 0&&(!O||O[E.route.id]===void 0);if(E.route.lazy||H){y=!0,v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}return d.reduceRight((w,E,S)=>{let O,H=!1,W=null,z=null;t&&(O=p&&E.route.id?p[E.route.id]:void 0,W=E.route.errorElement||RE,y&&(v<0&&S===0?(FE("route-fallback"),H=!0,z=null):v===S&&(H=!0,z=E.route.hydrateFallbackElement||null)));let re=e.concat(d.slice(0,S+1)),te=()=>{let ce;return O?ce=W:H?ce=z:E.route.Component?ce=q.createElement(E.route.Component,null):E.route.element?ce=E.route.element:ce=w,q.createElement(DE,{match:E,routeContext:{outlet:w,matches:re,isDataRoute:t!=null},children:ce})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?q.createElement(PE,{location:t.location,revalidation:t.revalidation,component:W,error:O,children:te(),routeContext:{outlet:null,matches:re,isDataRoute:!0}}):te()},null)}var xv=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(xv||{}),Ev=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Ev||{});function VE(n){let e=q.useContext(Gf);return e||Tt(!1),e}function OE(n){let e=q.useContext(kE);return e||Tt(!1),e}function LE(n){let e=q.useContext(Ys);return e||Tt(!1),e}function Tv(n){let e=LE(),t=e.matches[e.matches.length-1];return t.route.id||Tt(!1),t.route.id}function ME(){var n;let e=q.useContext(vv),t=OE(),s=Tv();return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function UE(){let{router:n}=VE(xv.UseNavigateStable),e=Tv(Ev.UseNavigateStable),t=q.useRef(!1);return _v(()=>{t.current=!0}),q.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,El({fromRouteId:e},l)))},[n,e])}const wy={};function FE(n,e,t){wy[n]||(wy[n]=!0)}function zE(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Wn(n){let{to:e,replace:t,state:s,relative:o}=n;jl()||Tt(!1);let{future:l,static:d}=q.useContext(Dl),{matches:p}=q.useContext(Ys),{pathname:y}=Kf(),v=es(),w=gv(e,mv(p,l.v7_relativeSplatPath),y,o==="path"),E=JSON.stringify(w);return q.useEffect(()=>v(JSON.parse(E),{replace:t,state:s,relative:o}),[v,E,o,t,s]),null}function Jt(n){Tt(!1)}function BE(n){let{basename:e="/",children:t=null,location:s,navigationType:o=Os.Pop,navigator:l,static:d=!1,future:p}=n;jl()&&Tt(!1);let y=e.replace(/^\/*/,"/"),v=q.useMemo(()=>({basename:y,navigator:l,static:d,future:El({v7_relativeSplatPath:!1},p)}),[y,p,l,d]);typeof s=="string"&&(s=Hi(s));let{pathname:w="/",search:E="",hash:S="",state:O=null,key:H="default"}=s,W=q.useMemo(()=>{let z=pv(w,y);return z==null?null:{location:{pathname:z,search:E,hash:S,state:O,key:H},navigationType:o}},[y,w,E,S,O,H,o]);return W==null?null:q.createElement(Dl.Provider,{value:v},q.createElement(Qc.Provider,{children:t,value:W}))}function $E(n){let{children:e,location:t}=n;return AE(_f(e),t)}new Promise(()=>{});function _f(n,e){e===void 0&&(e=[]);let t=[];return q.Children.forEach(n,(s,o)=>{if(!q.isValidElement(s))return;let l=[...e,o];if(s.type===q.Fragment){t.push.apply(t,_f(s.props.children,l));return}s.type!==Jt&&Tt(!1),!s.props.index||!s.props.children||Tt(!1);let d={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=_f(s.props.children,l)),t.push(d)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const qE="6";try{window.__reactRouterVersion=qE}catch{}const WE="startTransition",xy=H1[WE];function HE(n){let{basename:e,children:t,future:s,window:o}=n,l=q.useRef();l.current==null&&(l.current=Z1({window:o,v5Compat:!0}));let d=l.current,[p,y]=q.useState({action:d.action,location:d.location}),{v7_startTransition:v}=s||{},w=q.useCallback(E=>{v&&xy?xy(()=>y(E)):y(E)},[y,v]);return q.useLayoutEffect(()=>d.listen(w),[d,w]),q.useEffect(()=>zE(s),[s]),q.createElement(BE,{basename:e,children:t,location:p.location,navigationType:p.action,navigator:d,future:s})}var Ey;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Ey||(Ey={}));var Ty;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Ty||(Ty={}));const GE=()=>{};var Iy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},KE=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],d=n[t++],p=n[t++],y=((o&7)<<18|(l&63)<<12|(d&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const l=n[t++],d=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},Sv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],d=o+1<n.length,p=d?n[o+1]:0,y=o+2<n.length,v=y?n[o+2]:0,w=l>>2,E=(l&3)<<4|p>>4;let S=(p&15)<<2|v>>6,O=v&63;y||(O=64,d||(S=64)),s.push(t[w],t[E],t[S],t[O])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Iv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):KE(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],p=o<n.length?t[n.charAt(o)]:0;++o;const v=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||p==null||v==null||E==null)throw new QE;const S=l<<2|p>>4;if(s.push(S),v!==64){const O=p<<4&240|v>>2;if(s.push(O),E!==64){const H=v<<6&192|E;s.push(H)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class QE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YE=function(n){const e=Iv(n);return Sv.encodeByteArray(e,!0)},Tc=function(n){return YE(n).replace(/\./g,"")},kv=function(n){try{return Sv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=()=>JE().__FIREBASE_DEFAULTS__,ZE=()=>{if(typeof process>"u"||typeof Iy>"u")return;const n=Iy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},eT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&kv(n[1]);return e&&JSON.parse(e)},Yc=()=>{try{return GE()||XE()||ZE()||eT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},bv=n=>{var e,t;return(t=(e=Yc())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},tT=n=>{const e=bv(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Av=()=>{var n;return(n=Yc())==null?void 0:n.config},Cv=n=>{var e;return(e=Yc())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Nv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Tc(JSON.stringify(t)),Tc(JSON.stringify(d)),""].join(".")}const pl={};function sT(){const n={prod:[],emulator:[]};for(const e of Object.keys(pl))pl[e]?n.emulator.push(e):n.prod.push(e);return n}function iT(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Sy=!1;function Rv(n,e){if(typeof window>"u"||typeof document>"u"||!sa(window.location.host)||pl[n]===e||pl[n]||Sy)return;pl[n]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=sT().prod.length>0;function d(){const S=document.getElementById(s);S&&S.remove()}function p(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,O){S.setAttribute("width","24"),S.setAttribute("id",O),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function v(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Sy=!0,d()},S}function w(S,O){S.setAttribute("id",O),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=iT(s),O=t("text"),H=document.getElementById(O)||document.createElement("span"),W=t("learnmore"),z=document.getElementById(W)||document.createElement("a"),re=t("preprendIcon"),te=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ce=S.element;p(ce),w(z,W);const ke=v();y(te,re),ce.append(te,H,z,ke),document.body.appendChild(ce)}l?(H.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function aT(){var e;const n=(e=Yc())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Qf(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function uT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cT(){const n=Kt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function dT(){return!aT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yf(){try{return typeof indexedDB=="object"}catch{return!1}}function Jf(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}function Pv(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="FirebaseError";class Zn extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=hT,Object.setPrototypeOf(this,Zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gi.prototype.create)}}class Gi{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?fT(l,s):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new Zn(o,p,s)}}function fT(n,e){return n.replace(pT,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const pT=/\{\$([^}]+)}/g;function mT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function $s(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],d=e[o];if(ky(l)&&ky(d)){if(!$s(l,d))return!1}else if(l!==d)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function ky(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function gT(n,e){const t=new yT(n,e);return t.subscribe.bind(t)}class yT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");vT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=ef),o.error===void 0&&(o.error=ef),o.complete===void 0&&(o.complete=ef);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vT(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ef(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=1e3,wT=2,xT=14400*1e3,ET=.5;function by(n,e=_T,t=wT){const s=e*Math.pow(t,n),o=Math.round(ET*s*(Math.random()-.5)*2);return Math.min(xT,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(n){return n&&n._delegate?n._delegate:n}class Yn{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new nT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ST(e))try{this.getOrInitializeService({instanceIdentifier:Pi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pi){return this.instances.has(e)}getOptions(e=Pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);s===p&&d.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:IT(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Pi){return this.component?this.component.multipleInstances?e:Pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IT(n){return n===Pi?void 0:n}function ST(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new TT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const bT={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},AT=Me.INFO,CT={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},NT=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=CT[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jc{constructor(e){this.name=e,this._logLevel=AT,this._logHandler=NT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const RT=(n,e)=>e.some(t=>n instanceof t);let Ay,Cy;function PT(){return Ay||(Ay=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DT(){return Cy||(Cy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dv=new WeakMap,wf=new WeakMap,jv=new WeakMap,tf=new WeakMap,Xf=new WeakMap;function jT(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",d)},l=()=>{t(Ms(n.result)),o()},d=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Dv.set(t,n)}).catch(()=>{}),Xf.set(e,n),e}function VT(n){if(wf.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",d),n.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",d),n.addEventListener("abort",d)});wf.set(n,e)}let xf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return wf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||jv.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ms(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function OT(n){xf=n(xf)}function LT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(nf(this),e,...t);return jv.set(s,e.sort?e.sort():[e]),Ms(s)}:DT().includes(n)?function(...e){return n.apply(nf(this),e),Ms(Dv.get(this))}:function(...e){return Ms(n.apply(nf(this),e))}}function MT(n){return typeof n=="function"?LT(n):(n instanceof IDBTransaction&&VT(n),RT(n,PT())?new Proxy(n,xf):n)}function Ms(n){if(n instanceof IDBRequest)return jT(n);if(tf.has(n))return tf.get(n);const e=MT(n);return e!==n&&(tf.set(n,e),Xf.set(e,n)),e}const nf=n=>Xf.get(n);function Vv(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const d=indexedDB.open(n,e),p=Ms(d);return s&&d.addEventListener("upgradeneeded",y=>{s(Ms(d.result),y.oldVersion,y.newVersion,Ms(d.transaction),y)}),t&&d.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),p.then(y=>{l&&y.addEventListener("close",()=>l()),o&&y.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const UT=["get","getKey","getAll","getAllKeys","count"],FT=["put","add","delete","clear"],rf=new Map;function Ny(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(rf.get(e))return rf.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=FT.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||UT.includes(t)))return;const l=async function(d,...p){const y=this.transaction(d,o?"readwrite":"readonly");let v=y.store;return s&&(v=v.index(p.shift())),(await Promise.all([v[t](...p),o&&y.done]))[0]};return rf.set(e,l),l}OT(n=>({...n,get:(e,t,s)=>Ny(e,t)||n.get(e,t,s),has:(e,t)=>!!Ny(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(BT(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function BT(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ef="@firebase/app",Ry="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=new Jc("@firebase/app"),$T="@firebase/app-compat",qT="@firebase/analytics-compat",WT="@firebase/analytics",HT="@firebase/app-check-compat",GT="@firebase/app-check",KT="@firebase/auth",QT="@firebase/auth-compat",YT="@firebase/database",JT="@firebase/data-connect",XT="@firebase/database-compat",ZT="@firebase/functions",eI="@firebase/functions-compat",tI="@firebase/installations",nI="@firebase/installations-compat",rI="@firebase/messaging",sI="@firebase/messaging-compat",iI="@firebase/performance",oI="@firebase/performance-compat",aI="@firebase/remote-config",lI="@firebase/remote-config-compat",uI="@firebase/storage",cI="@firebase/storage-compat",dI="@firebase/firestore",hI="@firebase/ai",fI="@firebase/firestore-compat",pI="firebase",mI="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="[DEFAULT]",gI={[Ef]:"fire-core",[$T]:"fire-core-compat",[WT]:"fire-analytics",[qT]:"fire-analytics-compat",[GT]:"fire-app-check",[HT]:"fire-app-check-compat",[KT]:"fire-auth",[QT]:"fire-auth-compat",[YT]:"fire-rtdb",[JT]:"fire-data-connect",[XT]:"fire-rtdb-compat",[ZT]:"fire-fn",[eI]:"fire-fn-compat",[tI]:"fire-iid",[nI]:"fire-iid-compat",[rI]:"fire-fcm",[sI]:"fire-fcm-compat",[iI]:"fire-perf",[oI]:"fire-perf-compat",[aI]:"fire-rc",[lI]:"fire-rc-compat",[uI]:"fire-gcs",[cI]:"fire-gcs-compat",[dI]:"fire-fst",[fI]:"fire-fst-compat",[hI]:"fire-vertex","fire-js":"fire-js",[pI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new Map,yI=new Map,If=new Map;function Py(n,e){try{n.container.addComponent(e)}catch(t){Yr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Sr(n){const e=n.name;if(If.has(e))return Yr.debug(`There were multiple attempts to register component ${e}.`),!1;If.set(e,n);for(const t of Ic.values())Py(t,n);for(const t of yI.values())Py(t,n);return!0}function Ki(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Rn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Us=new Gi("app","Firebase",vI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Yn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=mI;function Ov(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Tf,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Us.create("bad-app-name",{appName:String(o)});if(t||(t=Av()),!t)throw Us.create("no-options");const l=Ic.get(o);if(l){if($s(t,l.options)&&$s(s,l.config))return l;throw Us.create("duplicate-app",{appName:o})}const d=new kT(o);for(const y of If.values())d.addComponent(y);const p=new _I(t,s,d);return Ic.set(o,p),p}function Zf(n=Tf){const e=Ic.get(n);if(!e&&n===Tf&&Av())return Ov();if(!e)throw Us.create("no-app",{appName:n});return e}function Dn(n,e,t){let s=gI[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yr.warn(d.join(" "));return}Sr(new Yn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="firebase-heartbeat-database",xI=1,Tl="firebase-heartbeat-store";let sf=null;function Lv(){return sf||(sf=Vv(wI,xI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Tl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Us.create("idb-open",{originalErrorMessage:n.message})})),sf}async function EI(n){try{const t=(await Lv()).transaction(Tl),s=await t.objectStore(Tl).get(Mv(n));return await t.done,s}catch(e){if(e instanceof Zn)Yr.warn(e.message);else{const t=Us.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yr.warn(t.message)}}}async function Dy(n,e){try{const s=(await Lv()).transaction(Tl,"readwrite");await s.objectStore(Tl).put(e,Mv(n)),await s.done}catch(t){if(t instanceof Zn)Yr.warn(t.message);else{const s=Us.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Yr.warn(s.message)}}}function Mv(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=1024,II=30;class SI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new bI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=jy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>II){const d=AI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Yr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=jy(),{heartbeatsToSend:s,unsentEntries:o}=kI(this._heartbeatsCache.heartbeats),l=Tc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Yr.warn(t),""}}}function jy(){return new Date().toISOString().substring(0,10)}function kI(n,e=TI){const t=[];let s=n.slice();for(const o of n){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),Vy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Vy(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class bI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yf()?Jf().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await EI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Dy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Dy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Vy(n){return Tc(JSON.stringify({version:2,heartbeats:n})).length}function AI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(n){Sr(new Yn("platform-logger",e=>new zT(e),"PRIVATE")),Sr(new Yn("heartbeat",e=>new SI(e),"PRIVATE")),Dn(Ef,Ry,n),Dn(Ef,Ry,"esm2020"),Dn("fire-js","")}CI("");var NI="firebase",RI="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn(NI,RI,"app");var Oy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fs,Uv;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,k){function C(){}C.prototype=k.prototype,R.F=k.prototype,R.prototype=new C,R.prototype.constructor=R,R.D=function(A,P,N){for(var I=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)I[ye-2]=arguments[ye];return k.prototype[P].apply(A,I)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,k,C){C||(C=0);const A=Array(16);if(typeof k=="string")for(var P=0;P<16;++P)A[P]=k.charCodeAt(C++)|k.charCodeAt(C++)<<8|k.charCodeAt(C++)<<16|k.charCodeAt(C++)<<24;else for(P=0;P<16;++P)A[P]=k[C++]|k[C++]<<8|k[C++]<<16|k[C++]<<24;k=R.g[0],C=R.g[1],P=R.g[2];let N=R.g[3],I;I=k+(N^C&(P^N))+A[0]+3614090360&4294967295,k=C+(I<<7&4294967295|I>>>25),I=N+(P^k&(C^P))+A[1]+3905402710&4294967295,N=k+(I<<12&4294967295|I>>>20),I=P+(C^N&(k^C))+A[2]+606105819&4294967295,P=N+(I<<17&4294967295|I>>>15),I=C+(k^P&(N^k))+A[3]+3250441966&4294967295,C=P+(I<<22&4294967295|I>>>10),I=k+(N^C&(P^N))+A[4]+4118548399&4294967295,k=C+(I<<7&4294967295|I>>>25),I=N+(P^k&(C^P))+A[5]+1200080426&4294967295,N=k+(I<<12&4294967295|I>>>20),I=P+(C^N&(k^C))+A[6]+2821735955&4294967295,P=N+(I<<17&4294967295|I>>>15),I=C+(k^P&(N^k))+A[7]+4249261313&4294967295,C=P+(I<<22&4294967295|I>>>10),I=k+(N^C&(P^N))+A[8]+1770035416&4294967295,k=C+(I<<7&4294967295|I>>>25),I=N+(P^k&(C^P))+A[9]+2336552879&4294967295,N=k+(I<<12&4294967295|I>>>20),I=P+(C^N&(k^C))+A[10]+4294925233&4294967295,P=N+(I<<17&4294967295|I>>>15),I=C+(k^P&(N^k))+A[11]+2304563134&4294967295,C=P+(I<<22&4294967295|I>>>10),I=k+(N^C&(P^N))+A[12]+1804603682&4294967295,k=C+(I<<7&4294967295|I>>>25),I=N+(P^k&(C^P))+A[13]+4254626195&4294967295,N=k+(I<<12&4294967295|I>>>20),I=P+(C^N&(k^C))+A[14]+2792965006&4294967295,P=N+(I<<17&4294967295|I>>>15),I=C+(k^P&(N^k))+A[15]+1236535329&4294967295,C=P+(I<<22&4294967295|I>>>10),I=k+(P^N&(C^P))+A[1]+4129170786&4294967295,k=C+(I<<5&4294967295|I>>>27),I=N+(C^P&(k^C))+A[6]+3225465664&4294967295,N=k+(I<<9&4294967295|I>>>23),I=P+(k^C&(N^k))+A[11]+643717713&4294967295,P=N+(I<<14&4294967295|I>>>18),I=C+(N^k&(P^N))+A[0]+3921069994&4294967295,C=P+(I<<20&4294967295|I>>>12),I=k+(P^N&(C^P))+A[5]+3593408605&4294967295,k=C+(I<<5&4294967295|I>>>27),I=N+(C^P&(k^C))+A[10]+38016083&4294967295,N=k+(I<<9&4294967295|I>>>23),I=P+(k^C&(N^k))+A[15]+3634488961&4294967295,P=N+(I<<14&4294967295|I>>>18),I=C+(N^k&(P^N))+A[4]+3889429448&4294967295,C=P+(I<<20&4294967295|I>>>12),I=k+(P^N&(C^P))+A[9]+568446438&4294967295,k=C+(I<<5&4294967295|I>>>27),I=N+(C^P&(k^C))+A[14]+3275163606&4294967295,N=k+(I<<9&4294967295|I>>>23),I=P+(k^C&(N^k))+A[3]+4107603335&4294967295,P=N+(I<<14&4294967295|I>>>18),I=C+(N^k&(P^N))+A[8]+1163531501&4294967295,C=P+(I<<20&4294967295|I>>>12),I=k+(P^N&(C^P))+A[13]+2850285829&4294967295,k=C+(I<<5&4294967295|I>>>27),I=N+(C^P&(k^C))+A[2]+4243563512&4294967295,N=k+(I<<9&4294967295|I>>>23),I=P+(k^C&(N^k))+A[7]+1735328473&4294967295,P=N+(I<<14&4294967295|I>>>18),I=C+(N^k&(P^N))+A[12]+2368359562&4294967295,C=P+(I<<20&4294967295|I>>>12),I=k+(C^P^N)+A[5]+4294588738&4294967295,k=C+(I<<4&4294967295|I>>>28),I=N+(k^C^P)+A[8]+2272392833&4294967295,N=k+(I<<11&4294967295|I>>>21),I=P+(N^k^C)+A[11]+1839030562&4294967295,P=N+(I<<16&4294967295|I>>>16),I=C+(P^N^k)+A[14]+4259657740&4294967295,C=P+(I<<23&4294967295|I>>>9),I=k+(C^P^N)+A[1]+2763975236&4294967295,k=C+(I<<4&4294967295|I>>>28),I=N+(k^C^P)+A[4]+1272893353&4294967295,N=k+(I<<11&4294967295|I>>>21),I=P+(N^k^C)+A[7]+4139469664&4294967295,P=N+(I<<16&4294967295|I>>>16),I=C+(P^N^k)+A[10]+3200236656&4294967295,C=P+(I<<23&4294967295|I>>>9),I=k+(C^P^N)+A[13]+681279174&4294967295,k=C+(I<<4&4294967295|I>>>28),I=N+(k^C^P)+A[0]+3936430074&4294967295,N=k+(I<<11&4294967295|I>>>21),I=P+(N^k^C)+A[3]+3572445317&4294967295,P=N+(I<<16&4294967295|I>>>16),I=C+(P^N^k)+A[6]+76029189&4294967295,C=P+(I<<23&4294967295|I>>>9),I=k+(C^P^N)+A[9]+3654602809&4294967295,k=C+(I<<4&4294967295|I>>>28),I=N+(k^C^P)+A[12]+3873151461&4294967295,N=k+(I<<11&4294967295|I>>>21),I=P+(N^k^C)+A[15]+530742520&4294967295,P=N+(I<<16&4294967295|I>>>16),I=C+(P^N^k)+A[2]+3299628645&4294967295,C=P+(I<<23&4294967295|I>>>9),I=k+(P^(C|~N))+A[0]+4096336452&4294967295,k=C+(I<<6&4294967295|I>>>26),I=N+(C^(k|~P))+A[7]+1126891415&4294967295,N=k+(I<<10&4294967295|I>>>22),I=P+(k^(N|~C))+A[14]+2878612391&4294967295,P=N+(I<<15&4294967295|I>>>17),I=C+(N^(P|~k))+A[5]+4237533241&4294967295,C=P+(I<<21&4294967295|I>>>11),I=k+(P^(C|~N))+A[12]+1700485571&4294967295,k=C+(I<<6&4294967295|I>>>26),I=N+(C^(k|~P))+A[3]+2399980690&4294967295,N=k+(I<<10&4294967295|I>>>22),I=P+(k^(N|~C))+A[10]+4293915773&4294967295,P=N+(I<<15&4294967295|I>>>17),I=C+(N^(P|~k))+A[1]+2240044497&4294967295,C=P+(I<<21&4294967295|I>>>11),I=k+(P^(C|~N))+A[8]+1873313359&4294967295,k=C+(I<<6&4294967295|I>>>26),I=N+(C^(k|~P))+A[15]+4264355552&4294967295,N=k+(I<<10&4294967295|I>>>22),I=P+(k^(N|~C))+A[6]+2734768916&4294967295,P=N+(I<<15&4294967295|I>>>17),I=C+(N^(P|~k))+A[13]+1309151649&4294967295,C=P+(I<<21&4294967295|I>>>11),I=k+(P^(C|~N))+A[4]+4149444226&4294967295,k=C+(I<<6&4294967295|I>>>26),I=N+(C^(k|~P))+A[11]+3174756917&4294967295,N=k+(I<<10&4294967295|I>>>22),I=P+(k^(N|~C))+A[2]+718787259&4294967295,P=N+(I<<15&4294967295|I>>>17),I=C+(N^(P|~k))+A[9]+3951481745&4294967295,R.g[0]=R.g[0]+k&4294967295,R.g[1]=R.g[1]+(P+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+P&4294967295,R.g[3]=R.g[3]+N&4294967295}s.prototype.v=function(R,k){k===void 0&&(k=R.length);const C=k-this.blockSize,A=this.C;let P=this.h,N=0;for(;N<k;){if(P==0)for(;N<=C;)o(this,R,N),N+=this.blockSize;if(typeof R=="string"){for(;N<k;)if(A[P++]=R.charCodeAt(N++),P==this.blockSize){o(this,A),P=0;break}}else for(;N<k;)if(A[P++]=R[N++],P==this.blockSize){o(this,A),P=0;break}}this.h=P,this.o+=k},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var k=1;k<R.length-8;++k)R[k]=0;k=this.o*8;for(var C=R.length-8;C<R.length;++C)R[C]=k&255,k/=256;for(this.v(R),R=Array(16),k=0,C=0;C<4;++C)for(let A=0;A<32;A+=8)R[k++]=this.g[C]>>>A&255;return R};function l(R,k){var C=p;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=k(R)}function d(R,k){this.h=k;const C=[];let A=!0;for(let P=R.length-1;P>=0;P--){const N=R[P]|0;A&&N==k||(C[P]=N,A=!1)}this.g=C}var p={};function y(R){return-128<=R&&R<128?l(R,function(k){return new d([k|0],k<0?-1:0)}):new d([R|0],R<0?-1:0)}function v(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return z(v(-R));const k=[];let C=1;for(let A=0;R>=C;A++)k[A]=R/C|0,C*=4294967296;return new d(k,0)}function w(R,k){if(R.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(R.charAt(0)=="-")return z(w(R.substring(1),k));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=v(Math.pow(k,8));let A=E;for(let N=0;N<R.length;N+=8){var P=Math.min(8,R.length-N);const I=parseInt(R.substring(N,N+P),k);P<8?(P=v(Math.pow(k,P)),A=A.j(P).add(v(I))):(A=A.j(C),A=A.add(v(I)))}return A}var E=y(0),S=y(1),O=y(16777216);n=d.prototype,n.m=function(){if(W(this))return-z(this).m();let R=0,k=1;for(let C=0;C<this.g.length;C++){const A=this.i(C);R+=(A>=0?A:4294967296+A)*k,k*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(H(this))return"0";if(W(this))return"-"+z(this).toString(R);const k=v(Math.pow(R,6));var C=this;let A="";for(;;){const P=ke(C,k).g;C=re(C,P.j(k));let N=((C.g.length>0?C.g[0]:C.h)>>>0).toString(R);if(C=P,H(C))return N+A;for(;N.length<6;)N="0"+N;A=N+A}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function H(R){if(R.h!=0)return!1;for(let k=0;k<R.g.length;k++)if(R.g[k]!=0)return!1;return!0}function W(R){return R.h==-1}n.l=function(R){return R=re(this,R),W(R)?-1:H(R)?0:1};function z(R){const k=R.g.length,C=[];for(let A=0;A<k;A++)C[A]=~R.g[A];return new d(C,~R.h).add(S)}n.abs=function(){return W(this)?z(this):this},n.add=function(R){const k=Math.max(this.g.length,R.g.length),C=[];let A=0;for(let P=0;P<=k;P++){let N=A+(this.i(P)&65535)+(R.i(P)&65535),I=(N>>>16)+(this.i(P)>>>16)+(R.i(P)>>>16);A=I>>>16,N&=65535,I&=65535,C[P]=I<<16|N}return new d(C,C[C.length-1]&-2147483648?-1:0)};function re(R,k){return R.add(z(k))}n.j=function(R){if(H(this)||H(R))return E;if(W(this))return W(R)?z(this).j(z(R)):z(z(this).j(R));if(W(R))return z(this.j(z(R)));if(this.l(O)<0&&R.l(O)<0)return v(this.m()*R.m());const k=this.g.length+R.g.length,C=[];for(var A=0;A<2*k;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(let P=0;P<R.g.length;P++){const N=this.i(A)>>>16,I=this.i(A)&65535,ye=R.i(P)>>>16,Le=R.i(P)&65535;C[2*A+2*P]+=I*Le,te(C,2*A+2*P),C[2*A+2*P+1]+=N*Le,te(C,2*A+2*P+1),C[2*A+2*P+1]+=I*ye,te(C,2*A+2*P+1),C[2*A+2*P+2]+=N*ye,te(C,2*A+2*P+2)}for(R=0;R<k;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=k;R<2*k;R++)C[R]=0;return new d(C,0)};function te(R,k){for(;(R[k]&65535)!=R[k];)R[k+1]+=R[k]>>>16,R[k]&=65535,k++}function ce(R,k){this.g=R,this.h=k}function ke(R,k){if(H(k))throw Error("division by zero");if(H(R))return new ce(E,E);if(W(R))return k=ke(z(R),k),new ce(z(k.g),z(k.h));if(W(k))return k=ke(R,z(k)),new ce(z(k.g),k.h);if(R.g.length>30){if(W(R)||W(k))throw Error("slowDivide_ only works with positive integers.");for(var C=S,A=k;A.l(R)<=0;)C=ie(C),A=ie(A);var P=xe(C,1),N=xe(A,1);for(A=xe(A,2),C=xe(C,2);!H(A);){var I=N.add(A);I.l(R)<=0&&(P=P.add(C),N=I),A=xe(A,1),C=xe(C,1)}return k=re(R,P.j(k)),new ce(P,k)}for(P=E;R.l(k)>=0;){for(C=Math.max(1,Math.floor(R.m()/k.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),N=v(C),I=N.j(k);W(I)||I.l(R)>0;)C-=A,N=v(C),I=N.j(k);H(N)&&(N=S),P=P.add(N),R=re(R,I)}return new ce(P,R)}n.B=function(R){return ke(this,R).h},n.and=function(R){const k=Math.max(this.g.length,R.g.length),C=[];for(let A=0;A<k;A++)C[A]=this.i(A)&R.i(A);return new d(C,this.h&R.h)},n.or=function(R){const k=Math.max(this.g.length,R.g.length),C=[];for(let A=0;A<k;A++)C[A]=this.i(A)|R.i(A);return new d(C,this.h|R.h)},n.xor=function(R){const k=Math.max(this.g.length,R.g.length),C=[];for(let A=0;A<k;A++)C[A]=this.i(A)^R.i(A);return new d(C,this.h^R.h)};function ie(R){const k=R.g.length+1,C=[];for(let A=0;A<k;A++)C[A]=R.i(A)<<1|R.i(A-1)>>>31;return new d(C,R.h)}function xe(R,k){const C=k>>5;k%=32;const A=R.g.length-C,P=[];for(let N=0;N<A;N++)P[N]=k>0?R.i(N+C)>>>k|R.i(N+C+1)<<32-k:R.i(N+C);return new d(P,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Uv=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=w,Fs=d}).apply(typeof Oy<"u"?Oy:typeof self<"u"?self:typeof window<"u"?window:{});var ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fv,ul,zv,fc,Sf,Bv,$v,qv;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ac=="object"&&ac];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,g){if(g)e:{var _=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var M=u[T];if(!(M in _))break e;_=_[M]}u=u[u.length-1],T=_[u],g=g(T),g!=T&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var _=[],T;for(T in g)Object.prototype.hasOwnProperty.call(g,T)&&_.push([T,g[T]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},d=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function y(u,g,_){return u.call.apply(u.bind,arguments)}function v(u,g,_){return v=y,v.apply(null,arguments)}function w(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function E(u,g){function _(){}_.prototype=g.prototype,u.Z=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(T,M,$){for(var ne=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)ne[Re-2]=arguments[Re];return g.prototype[M].apply(T,ne)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function O(u){const g=u.length;if(g>0){const _=Array(g);for(let T=0;T<g;T++)_[T]=u[T];return _}return[]}function H(u,g){for(let T=1;T<arguments.length;T++){const M=arguments[T];var _=typeof M;if(_=_!="object"?_:M?Array.isArray(M)?"array":_:"null",_=="array"||_=="object"&&typeof M.length=="number"){_=u.length||0;const $=M.length||0;u.length=_+$;for(let ne=0;ne<$;ne++)u[_+ne]=M[ne]}else u.push(M)}}class W{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function z(u){d.setTimeout(()=>{throw u},0)}function re(){var u=R;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class te{constructor(){this.h=this.g=null}add(g,_){const T=ce.get();T.set(g,_),this.h?this.h.next=T:this.g=T,this.h=T}}var ce=new W(()=>new ke,u=>u.reset());class ke{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,xe=!1,R=new te,k=()=>{const u=Promise.resolve(void 0);ie=()=>{u.then(C)}};function C(){for(var u;u=re();){try{u.h.call(u.g)}catch(_){z(_)}var g=ce;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}xe=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var N=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};d.addEventListener("test",_,g),d.removeEventListener("test",_,g)}catch{}return u})();function I(u){return/^[\s\xa0]*$/.test(u)}function ye(u,g){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}E(ye,P),ye.prototype.init=function(u,g){const _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(_=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ye.Z.h.call(this)},ye.prototype.h=function(){ye.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Le="closure_listenable_"+(Math.random()*1e6|0),De=0;function $e(u,g,_,T,M){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!T,this.ha=M,this.key=++De,this.da=this.fa=!1}function Z(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function de(u,g,_){for(const T in u)g.call(_,u[T],T,u)}function ae(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function V(u){const g={};for(const _ in u)g[_]=u[_];return g}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ce(u,g){let _,T;for(let M=1;M<arguments.length;M++){T=arguments[M];for(_ in T)u[_]=T[_];for(let $=0;$<Q.length;$++)_=Q[$],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function Ne(u){this.src=u,this.g={},this.h=0}Ne.prototype.add=function(u,g,_,T,M){const $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);const ne=U(u,g,T,M);return ne>-1?(g=u[ne],_||(g.fa=!1)):(g=new $e(g,this.src,$,!!T,M),g.fa=_,u.push(g)),g};function Ve(u,g){const _=g.type;if(_ in u.g){var T=u.g[_],M=Array.prototype.indexOf.call(T,g,void 0),$;($=M>=0)&&Array.prototype.splice.call(T,M,1),$&&(Z(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function U(u,g,_,T){for(let M=0;M<u.length;++M){const $=u[M];if(!$.da&&$.listener==g&&$.capture==!!_&&$.ha==T)return M}return-1}var ue="closure_lm_"+(Math.random()*1e6|0),Te={};function qe(u,g,_,T,M){if(Array.isArray(g)){for(let $=0;$<g.length;$++)qe(u,g[$],_,T,M);return null}return _=ha(_),u&&u[Le]?u.J(g,_,p(T)?!!T.capture:!1,M):mt(u,g,_,!1,T,M)}function mt(u,g,_,T,M,$){if(!g)throw Error("Invalid event type");const ne=p(M)?!!M.capture:!!M;let Re=eo(u);if(Re||(u[ue]=Re=new Ne(u)),_=Re.add(g,_,T,ne,$),_.proxy)return _;if(T=jn(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)N||(M=ne),M===void 0&&(M=!1),u.addEventListener(g.toString(),T,M);else if(u.attachEvent)u.attachEvent(Zi(g.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function jn(){function u(_){return g.call(u.src,u.listener,_)}const g=Wl;return u}function ti(u,g,_,T,M){if(Array.isArray(g))for(var $=0;$<g.length;$++)ti(u,g[$],_,T,M);else T=p(T)?!!T.capture:!!T,_=ha(_),u&&u[Le]?(u=u.i,$=String(g).toString(),$ in u.g&&(g=u.g[$],_=U(g,_,T,M),_>-1&&(Z(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete u.g[$],u.h--)))):u&&(u=eo(u))&&(g=u.g[g.toString()],u=-1,g&&(u=U(g,_,T,M)),(_=u>-1?g[u]:null)&&ts(_))}function ts(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Le])Ve(g.i,u);else{var _=u.type,T=u.proxy;g.removeEventListener?g.removeEventListener(_,T,u.capture):g.detachEvent?g.detachEvent(Zi(_),T):g.addListener&&g.removeListener&&g.removeListener(T),(_=eo(g))?(Ve(_,u),_.h==0&&(_.src=null,g[ue]=null)):Z(u)}}}function Zi(u){return u in Te?Te[u]:Te[u]="on"+u}function Wl(u,g){if(u.da)u=!0;else{g=new ye(g,this);const _=u.listener,T=u.ha||u.src;u.fa&&ts(u),u=_.call(T,g)}return u}function eo(u){return u=u[ue],u instanceof Ne?u:null}var ni="__closure_events_fn_"+(Math.random()*1e9>>>0);function ha(u){return typeof u=="function"?u:(u[ni]||(u[ni]=function(g){return u.handleEvent(g)}),u[ni])}function gt(){A.call(this),this.i=new Ne(this),this.M=this,this.G=null}E(gt,A),gt.prototype[Le]=!0,gt.prototype.removeEventListener=function(u,g,_,T){ti(this,u,g,_,T)};function ct(u,g){var _,T=u.G;if(T)for(_=[];T;T=T.G)_.push(T);if(u=u.M,T=g.type||g,typeof g=="string")g=new P(g,u);else if(g instanceof P)g.target=g.target||u;else{var M=g;g=new P(T,u),Ce(g,M)}M=!0;let $,ne;if(_)for(ne=_.length-1;ne>=0;ne--)$=g.g=_[ne],M=Vn($,T,!0,g)&&M;if($=g.g=u,M=Vn($,T,!0,g)&&M,M=Vn($,T,!1,g)&&M,_)for(ne=0;ne<_.length;ne++)$=g.g=_[ne],M=Vn($,T,!1,g)&&M}gt.prototype.N=function(){if(gt.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const _=u.g[g];for(let T=0;T<_.length;T++)Z(_[T]);delete u.g[g],u.h--}}this.G=null},gt.prototype.J=function(u,g,_,T){return this.i.add(String(u),g,!1,_,T)},gt.prototype.K=function(u,g,_,T){return this.i.add(String(u),g,!0,_,T)};function Vn(u,g,_,T){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let M=!0;for(let $=0;$<g.length;++$){const ne=g[$];if(ne&&!ne.da&&ne.capture==_){const Re=ne.listener,dt=ne.ha||ne.src;ne.fa&&Ve(u.i,ne),M=Re.call(dt,T)!==!1&&M}}return M&&!T.defaultPrevented}function fa(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:d.setTimeout(u,g||0)}function pa(u){u.g=fa(()=>{u.g=null,u.i&&(u.i=!1,pa(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Hl extends A{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:pa(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ns(u){A.call(this),this.h=u,this.g={}}E(ns,A);var ma=[];function to(u){de(u.g,function(g,_){this.g.hasOwnProperty(_)&&ts(g)},u),u.g={}}ns.prototype.N=function(){ns.Z.N.call(this),to(this)},ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rs=d.JSON.stringify,Gl=d.JSON.parse,ri=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function ss(){}function Kl(){}var is={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function no(){P.call(this,"d")}E(no,P);function ga(){P.call(this,"c")}E(ga,P);var On={},ro=null;function os(){return ro=ro||new gt}On.Ia="serverreachability";function so(u){P.call(this,On.Ia,u)}E(so,P);function Cr(u){const g=os();ct(g,new so(g))}On.STAT_EVENT="statevent";function Nr(u,g){P.call(this,On.STAT_EVENT,u),this.stat=g}E(Nr,P);function lt(u){const g=os();ct(g,new Nr(g,u))}On.Ja="timingevent";function ya(u,g){P.call(this,On.Ja,u),this.size=g}E(ya,P);function as(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},g)}function ls(){this.g=!0}ls.prototype.ua=function(){this.g=!1};function Ql(u,g,_,T,M,$){u.info(function(){if(u.g)if($){var ne="",Re=$.split("&");for(let Qe=0;Qe<Re.length;Qe++){var dt=Re[Qe].split("=");if(dt.length>1){const yt=dt[0];dt=dt[1];const gn=yt.split("_");ne=gn.length>=2&&gn[1]=="type"?ne+(yt+"="+dt+"&"):ne+(yt+"=redacted&")}}}else ne=null;else ne=$;return"XMLHTTP REQ ("+T+") [attempt "+M+"]: "+g+`
`+_+`
`+ne})}function Yl(u,g,_,T,M,$,ne){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+M+"]: "+g+`
`+_+`
`+$+" "+ne})}function er(u,g,_,T){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+si(u,_)+(T?" "+T:"")})}function Jl(u,g){u.info(function(){return"TIMEOUT: "+g})}ls.prototype.info=function(){};function si(u,g){if(!u.g)return g;if(!g)return null;try{const $=JSON.parse(g);if($){for(u=0;u<$.length;u++)if(Array.isArray($[u])){var _=$[u];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var M=T[0];if(M!="noop"&&M!="stop"&&M!="close")for(let ne=1;ne<T.length;ne++)T[ne]=""}}}}return rs($)}catch{return g}}var us={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},cs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Xl;function Rr(){}E(Rr,ss),Rr.prototype.g=function(){return new XMLHttpRequest},Xl=new Rr;function tr(u){return encodeURIComponent(String(u))}function io(u){var g=1;u=u.split(":");const _=[];for(;g>0&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function Tn(u,g,_,T){this.j=u,this.i=g,this.l=_,this.S=T||1,this.V=new ns(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zl}function Zl(){this.i=null,this.g="",this.h=!1}var eu={},va={};function Ln(u,g,_){u.M=1,u.A=Dr(In(g)),u.u=_,u.R=!0,_a(u,null)}function _a(u,g){u.F=Date.now(),ii(u),u.B=In(u.A);var _=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),Ca(_.i,"t",T),u.C=0,_=u.j.L,u.h=new Zl,u.g=cu(u.j,_?g:null,!u.u),u.P>0&&(u.O=new Hl(v(u.Y,u,u.g),u.P)),g=u.V,_=u.g,T=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(ma[0]=M.toString()),M=ma);for(let $=0;$<M.length;$++){const ne=qe(_,M[$],T||g.handleEvent,!1,g.h||g);if(!ne)break;g.g[ne.key]=ne}g=u.J?V(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Cr(),Ql(u.i,u.v,u.B,u.l,u.S,u.u)}Tn.prototype.ba=function(u){u=u.target;const g=this.O;g&&lr(u)==3?g.j():this.Y(u)},Tn.prototype.Y=function(u){try{if(u==this.g)e:{const Re=lr(this.g),dt=this.g.ya(),Qe=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||lu(this.g)))){this.K||Re!=4||dt==7||(dt==8||Qe<=0?Cr(3):Cr(2)),oo(this);var g=this.g.ca();this.X=g;var _=tu(this);if(this.o=g==200,Yl(this.i,this.v,this.B,this.l,this.S,Re,g),this.o){if(this.U&&!this.L){t:{if(this.g){var T,M=this.g;if((T=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(T)){var $=T;break t}}$=null}if(u=$)er(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ze(this,u);else{this.o=!1,this.m=3,lt(12),Pr(this),oi(this);break e}}if(this.R){u=!0;let yt;for(;!this.K&&this.C<_.length;)if(yt=ru(this,_),yt==va){Re==4&&(this.m=4,lt(14),u=!1),er(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==eu){this.m=4,lt(15),er(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else er(this.i,this.l,yt,null),Ze(this,yt);if(nu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||_.length!=0||this.h.h||(this.m=1,lt(16),u=!1),this.o=this.o&&u,!u)er(this.i,this.l,_,"[Invalid Chunked Response]"),Pr(this),oi(this);else if(_.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),mi(ne),ne.P=!0,lt(11))}}else er(this.i,this.l,_,null),Ze(this,_);Re==4&&Pr(this),this.o&&!this.K&&(Re==4?yo(this.j,this):(this.o=!1,ii(this)))}else Ra(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,lt(12)):(this.m=0,lt(13)),Pr(this),oi(this)}}}catch{}finally{}};function tu(u){if(!nu(u))return u.g.la();const g=lu(u.g);if(g==="")return"";let _="";const T=g.length,M=lr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Pr(u),oi(u),"";u.h.i=new d.TextDecoder}for(let $=0;$<T;$++)u.h.h=!0,_+=u.h.i.decode(g[$],{stream:!(M&&$==T-1)});return g.length=0,u.h.g+=_,u.C=0,u.h.g}function nu(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function ru(u,g){var _=u.C,T=g.indexOf(`
`,_);return T==-1?va:(_=Number(g.substring(_,T)),isNaN(_)?eu:(T+=1,T+_>g.length?va:(g=g.slice(T,T+_),u.C=T+_,g)))}Tn.prototype.cancel=function(){this.K=!0,Pr(this)};function ii(u){u.T=Date.now()+u.H,wa(u,u.H)}function wa(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=as(v(u.aa,u),g)}function oo(u){u.D&&(d.clearTimeout(u.D),u.D=null)}Tn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Jl(this.i,this.B),this.M!=2&&(Cr(),lt(17)),Pr(this),this.m=2,oi(this)):wa(this,this.T-u)};function oi(u){u.j.I==0||u.K||yo(u.j,u)}function Pr(u){oo(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,to(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Ze(u,g){try{var _=u.j;if(_.I!=0&&(_.g==u||Ea(_.h,u))){if(!u.L&&Ea(_.h,u)&&_.I==3){try{var T=_.Ba.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var M=T;if(M[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)go(_),pn(_);else break e;dr(_),lt(18)}}else _.xa=M[1],0<_.xa-_.K&&M[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=as(v(_.Va,_),6e3));ai(_.h)<=1&&_.ta&&(_.ta=void 0)}else mn(_,11)}else if((u.L||_.g==u)&&go(_),!I(g))for(M=_.Ba.g.parse(g),g=0;g<M.length;g++){let Qe=M[g];const yt=Qe[0];if(!(yt<=_.K))if(_.K=yt,Qe=Qe[1],_.I==2)if(Qe[0]=="c"){_.M=Qe[1],_.ba=Qe[2];const gn=Qe[3];gn!=null&&(_.ka=gn,_.j.info("VER="+_.ka));const Mr=Qe[4];Mr!=null&&(_.za=Mr,_.j.info("SVER="+_.za));const hr=Qe[5];hr!=null&&typeof hr=="number"&&hr>0&&(T=1.5*hr,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const fr=u.g;if(fr){const wo=fr.g?fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wo){var $=T.h;$.g||wo.indexOf("spdy")==-1&&wo.indexOf("quic")==-1&&wo.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(lo($,$.h),$.h=null))}if(T.G){const ja=fr.g?fr.g.getResponseHeader("X-HTTP-Session-Id"):null;ja&&(T.wa=ja,Ge(T.J,T.G,ja))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var ne=u;if(T.na=Da(T,T.L?T.ba:null,T.W),ne.L){li(T.h,ne);var Re=ne,dt=T.O;dt&&(Re.H=dt),Re.D&&(oo(Re),ii(Re)),T.g=ne}else Ft(T);_.i.length>0&&Lr(_)}else Qe[0]!="stop"&&Qe[0]!="close"||mn(_,7);else _.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?mn(_,7):po(_):Qe[0]!="noop"&&_.l&&_.l.qa(Qe),_.A=0)}}Cr(4)}catch{}}var Sd=class{constructor(u,g){this.g=u,this.map=g}};function ao(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ai(u){return u.h?1:u.g?u.g.size:0}function Ea(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function lo(u,g){u.g?u.g.add(g):u.h=g}function li(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}ao.prototype.cancel=function(){if(this.i=dn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function dn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.G);return g}return O(u.i)}var su=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hn(u,g){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const T=u[_].indexOf("=");let M,$=null;T>=0?(M=u[_].substring(0,T),$=u[_].substring(T+1)):M=u[_],g(M,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function nr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof nr?(this.l=u.l,ui(this,u.j),this.o=u.o,this.g=u.g,rr(this,u.u),this.h=u.h,ds(this,Na(u.i)),this.m=u.m):u&&(g=String(u).match(su))?(this.l=!1,ui(this,g[1]||"",!0),this.o=ci(g[2]||""),this.g=ci(g[3]||"",!0),rr(this,g[4]),this.h=ci(g[5]||"",!0),ds(this,g[6]||"",!0),this.m=ci(g[7]||"")):(this.l=!1,this.i=new ze(null,this.l))}nr.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(di(g,Ia,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(di(g,Ia,!0),"@"),u.push(tr(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(di(_,_.charAt(0)=="/"?hi:Sa,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",di(_,ka)),u.join("")},nr.prototype.resolve=function(u){const g=In(this);let _=!!u.j;_?ui(g,u.j):_=!!u.o,_?g.o=u.o:_=!!u.g,_?g.g=u.g:_=u.u!=null;var T=u.h;if(_)rr(g,u.u);else if(_=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var M=g.h.lastIndexOf("/");M!=-1&&(T=g.h.slice(0,M+1)+T)}if(M=T,M==".."||M==".")T="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){T=M.lastIndexOf("/",0)==0,M=M.split("/");const $=[];for(let ne=0;ne<M.length;){const Re=M[ne++];Re=="."?T&&ne==M.length&&$.push(""):Re==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),T&&ne==M.length&&$.push("")):($.push(Re),T=!0)}T=$.join("/")}else T=M}return _?g.h=T:_=u.i.toString()!=="",_?ds(g,Na(u.i)):_=!!u.m,_&&(g.m=u.m),g};function In(u){return new nr(u)}function ui(u,g,_){u.j=_?ci(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function rr(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function ds(u,g,_){g instanceof ze?(u.i=g,co(u.i,u.l)):(_||(g=di(g,kd)),u.i=new ze(g,u.l))}function Ge(u,g,_){u.i.set(g,_)}function Dr(u){return Ge(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ci(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function di(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,Ta),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ta(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ia=/[#\/\?@]/g,Sa=/[#\?:]/g,hi=/[#\?]/g,kd=/[#\?@]/g,ka=/#/g;function ze(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function sr(u){u.g||(u.g=new Map,u.h=0,u.i&&hn(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=ze.prototype,n.add=function(u,g){sr(this),this.i=null,u=ir(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function ba(u,g){sr(u),g=ir(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function uo(u,g){return sr(u),g=ir(u,g),u.g.has(g)}n.forEach=function(u,g){sr(this),this.g.forEach(function(_,T){_.forEach(function(M){u.call(g,M,T,this)},this)},this)};function Aa(u,g){sr(u);let _=[];if(typeof g=="string")uo(u,g)&&(_=_.concat(u.g.get(ir(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)_=_.concat(u[g]);return _}n.set=function(u,g){return sr(this),this.i=null,u=ir(this,u),uo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=Aa(this,u),u.length>0?String(u[0]):g):g};function Ca(u,g,_){ba(u,g),_.length>0&&(u.i=null,u.g.set(ir(u,g),O(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let T=0;T<g.length;T++){var _=g[T];const M=tr(_);_=Aa(this,_);for(let $=0;$<_.length;$++){let ne=M;_[$]!==""&&(ne+="="+tr(_[$])),u.push(ne)}}return this.i=u.join("&")};function Na(u){const g=new ze;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function ir(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function co(u,g){g&&!u.j&&(sr(u),u.i=null,u.g.forEach(function(_,T){const M=T.toLowerCase();T!=M&&(ba(this,T),Ca(this,M,_))},u)),u.j=g}function or(u,g){const _=new ls;if(d.Image){const T=new Image;T.onload=w(Dt,_,"TestLoadImage: loaded",!0,g,T),T.onerror=w(Dt,_,"TestLoadImage: error",!1,g,T),T.onabort=w(Dt,_,"TestLoadImage: abort",!1,g,T),T.ontimeout=w(Dt,_,"TestLoadImage: timeout",!1,g,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else g(!1)}function ar(u,g){const _=new ls,T=new AbortController,M=setTimeout(()=>{T.abort(),Dt(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:T.signal}).then($=>{clearTimeout(M),$.ok?Dt(_,"TestPingServer: ok",!0,g):Dt(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(M),Dt(_,"TestPingServer: error",!1,g)})}function Dt(u,g,_,T,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),T(_)}catch{}}function fi(){this.g=new ri}function jr(u){this.i=u.Sb||null,this.h=u.ab||!1}E(jr,ss),jr.prototype.g=function(){return new fn(this.i,this.h)};function fn(u,g){gt.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(fn,gt),n=fn.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Mn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||d).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hs(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Mn(this)),this.g&&(this.readyState=3,Mn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;iu(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function iu(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?hs(this):Mn(this),this.readyState==3&&iu(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,hs(this))},n.Na=function(u){this.g&&(this.response=u,hs(this))},n.ga=function(){this.g&&hs(this)};function hs(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Mn(u)}n.setRequestHeader=function(u,g){this.A.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function Mn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(fn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ou(u){let g="";return de(u,function(_,T){g+=T,g+=":",g+=_,g+=`\r
`}),g}function ho(u,g,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=ou(_),typeof u=="string"?_!=null&&tr(_):Ge(u,g,_))}function Ye(u){gt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Ye,gt);var au=/^https?$/i,bd=["POST","PUT"];n=Ye.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,g,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Xl.g(),this.g.onreadystatechange=S(v(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch($){fs(this,$);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var M in T)_.set(M,T[M]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const $ of T.keys())_.set($,T.get($));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find($=>$.toLowerCase()=="content-type"),M=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(bd,g,void 0)>=0)||T||M||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ne]of _)this.g.setRequestHeader($,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch($){fs(this,$)}};function fs(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,ps(u),Or(u)}function ps(u){u.A||(u.A=!0,ct(u,"complete"),ct(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ct(this,"complete"),ct(this,"abort"),Or(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Or(this,!0)),Ye.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Vr(this):this.Xa())},n.Xa=function(){Vr(this)};function Vr(u){if(u.h&&typeof l<"u"){if(u.v&&lr(u)==4)setTimeout(u.Ca.bind(u),0);else if(ct(u,"readystatechange"),lr(u)==4){u.h=!1;try{const $=u.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var T;if(T=$===0){let ne=String(u.D).match(su)[1]||null;!ne&&d.self&&d.self.location&&(ne=d.self.location.protocol.slice(0,-1)),T=!au.test(ne?ne.toLowerCase():"")}_=T}if(_)ct(u,"complete"),ct(u,"success");else{u.o=6;try{var M=lr(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",ps(u)}}finally{Or(u)}}}}function Or(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,g||ct(u,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function lr(u){return u.g?u.g.readyState:0}n.ca=function(){try{return lr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Gl(g)}};function lu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ra(u){const g={};u=(u.g&&lr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(I(u[T]))continue;var _=io(u[T]);const M=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const $=g[M]||[];g[M]=$,$.push(_)}ae(g,function(T){return T.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ur(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function fo(u){this.za=0,this.i=[],this.j=new ls,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ur("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ur("baseRetryDelayMs",5e3,u),this.Za=ur("retryDelaySeedMs",1e4,u),this.Ta=ur("forwardChannelMaxRetries",2,u),this.va=ur("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new ao(u&&u.concurrentRequestLimit),this.Ba=new fi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=fo.prototype,n.ka=8,n.I=1,n.connect=function(u,g,_,T){lt(0),this.W=u,this.H=g||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=Da(this,null,this.W),Lr(this)};function po(u){if(mo(u),u.I==3){var g=u.V++,_=In(u.J);if(Ge(_,"SID",u.M),Ge(_,"RID",g),Ge(_,"TYPE","terminate"),cr(u,_),g=new Tn(u,u.j,g),g.M=2,g.A=Dr(In(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=g.A,_=!0),_||(g.g=cu(g.j,null),g.g.ea(g.A)),g.F=Date.now(),ii(g)}gi(u)}function pn(u){u.g&&(mi(u),u.g.cancel(),u.g=null)}function mo(u){pn(u),u.v&&(d.clearTimeout(u.v),u.v=null),go(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function Lr(u){if(!xa(u.h)&&!u.m){u.m=!0;var g=u.Ea;ie||k(),xe||(ie(),xe=!0),R.add(g,u),u.D=0}}function uu(u,g){return ai(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=as(v(u.Ea,u,g),vo(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new Tn(this,this.j,u);let $=this.o;if(this.U&&($?($=V($),Ce($,this.U)):$=this.U),this.u!==null||this.R||(M.J=$,$=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Pa(this,M,g),_=In(this.J),Ge(_,"RID",u),Ge(_,"CVER",22),this.G&&Ge(_,"X-HTTP-Session-Id",this.G),cr(this,_),$&&(this.R?g="headers="+tr(ou($))+"&"+g:this.u&&ho(_,this.u,$)),lo(this.h,M),this.Ra&&Ge(_,"TYPE","init"),this.S?(Ge(_,"$req",g),Ge(_,"SID","null"),M.U=!0,Ln(M,_,null)):Ln(M,_,g),this.I=2}}else this.I==3&&(u?pi(this,u):this.i.length==0||xa(this.h)||pi(this))};function pi(u,g){var _;g?_=g.l:_=u.V++;const T=In(u.J);Ge(T,"SID",u.M),Ge(T,"RID",_),Ge(T,"AID",u.K),cr(u,T),u.u&&u.o&&ho(T,u.u,u.o),_=new Tn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Pa(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),lo(u.h,_),Ln(_,T,g)}function cr(u,g){u.H&&de(u.H,function(_,T){Ge(g,T,_)}),u.l&&de({},function(_,T){Ge(g,T,_)})}function Pa(u,g,_){_=Math.min(u.i.length,_);const T=u.l?v(u.l.Ka,u.l,u):null;e:{var M=u.i;let Re=-1;for(;;){const dt=["count="+_];Re==-1?_>0?(Re=M[0].g,dt.push("ofs="+Re)):Re=0:dt.push("ofs="+Re);let Qe=!0;for(let yt=0;yt<_;yt++){var $=M[yt].g;const gn=M[yt].map;if($-=Re,$<0)Re=Math.max(0,M[yt].g-100),Qe=!1;else try{$="req"+$+"_"||"";try{var ne=gn instanceof Map?gn:Object.entries(gn);for(const[Mr,hr]of ne){let fr=hr;p(hr)&&(fr=rs(hr)),dt.push($+Mr+"="+encodeURIComponent(fr))}}catch(Mr){throw dt.push($+"type="+encodeURIComponent("_badmap")),Mr}}catch{T&&T(gn)}}if(Qe){ne=dt.join("&");break e}}ne=void 0}return u=u.i.splice(0,_),g.G=u,ne}function Ft(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;ie||k(),xe||(ie(),xe=!0),R.add(g,u),u.A=0}}function dr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=as(v(u.Da,u),vo(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,ms(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=as(v(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,lt(10),pn(this),ms(this))};function mi(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function ms(u){u.g=new Tn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=In(u.na);Ge(g,"RID","rpc"),Ge(g,"SID",u.M),Ge(g,"AID",u.K),Ge(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ge(g,"TO",u.ia),Ge(g,"TYPE","xmlhttp"),cr(u,g),u.u&&u.o&&ho(g,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Dr(In(g)),_.u=null,_.R=!0,_a(_,u)}n.Va=function(){this.C!=null&&(this.C=null,pn(this),dr(this),lt(19))};function go(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function yo(u,g){var _=null;if(u.g==g){go(u),mi(u),u.g=null;var T=2}else if(Ea(u.h,g))_=g.G,li(u.h,g),T=1;else return;if(u.I!=0){if(g.o)if(T==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var M=u.D;T=os(),ct(T,new ya(T,_)),Lr(u)}else Ft(u);else if(M=g.m,M==3||M==0&&g.X>0||!(T==1&&uu(u,g)||T==2&&dr(u)))switch(_&&_.length>0&&(g=u.h,g.i=g.i.concat(_)),M){case 1:mn(u,5);break;case 4:mn(u,10);break;case 3:mn(u,6);break;default:mn(u,2)}}}function vo(u,g){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*g}function mn(u,g){if(u.j.info("Error code "+g),g==2){var _=v(u.bb,u),T=u.Ua;const M=!T;T=new nr(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ui(T,"https"),Dr(T),M?or(T.toString(),_):ar(T.toString(),_)}else lt(2);u.I=0,u.l&&u.l.pa(g),gi(u),mo(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function gi(u){if(u.I=0,u.ja=[],u.l){const g=dn(u.h);(g.length!=0||u.i.length!=0)&&(H(u.ja,g),H(u.ja,u.i),u.h.i.length=0,O(u.i),u.i.length=0),u.l.oa()}}function Da(u,g,_){var T=_ instanceof nr?In(_):new nr(_);if(T.g!="")g&&(T.g=g+"."+T.g),rr(T,T.u);else{var M=d.location;T=M.protocol,g=g?g+"."+M.hostname:M.hostname,M=+M.port;const $=new nr(null);T&&ui($,T),g&&($.g=g),M&&rr($,M),_&&($.h=_),T=$}return _=u.G,g=u.wa,_&&g&&Ge(T,_,g),Ge(T,"VER",u.ka),cr(u,T),T}function cu(u,g,_){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Ye(new jr({ab:_})):new Ye(u.ma),g.Fa(u.L),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function du(){}n=du.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function _o(){}_o.prototype.g=function(u,g){return new jt(u,g)};function jt(u,g){gt.call(this),this.g=new fo(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!I(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new gs(this)}E(jt,gt),jt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){po(this.g)},jt.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=rs(u),u=_);g.i.push(new Sd(g.Ya++,u)),g.I==3&&Lr(g)},jt.prototype.N=function(){this.g.l=null,delete this.j,po(this.g),delete this.g,jt.Z.N.call(this)};function hu(u){no.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}E(hu,no);function fu(){ga.call(this),this.status=1}E(fu,ga);function gs(u){this.g=u}E(gs,du),gs.prototype.ra=function(){ct(this.g,"a")},gs.prototype.qa=function(u){ct(this.g,new hu(u))},gs.prototype.pa=function(u){ct(this.g,new fu)},gs.prototype.oa=function(){ct(this.g,"b")},_o.prototype.createWebChannel=_o.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,qv=function(){return new _o},$v=function(){return os()},Bv=On,Sf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},us.NO_ERROR=0,us.TIMEOUT=8,us.HTTP_ERROR=6,fc=us,cs.COMPLETE="complete",zv=cs,Kl.EventType=is,is.OPEN="a",is.CLOSE="b",is.ERROR="c",is.MESSAGE="d",gt.prototype.listen=gt.prototype.J,ul=Kl,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,Fv=Ye}).apply(typeof ac<"u"?ac:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa="12.9.0";function PI(n){oa=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new Jc("@firebase/firestore");function zo(){return Ui.logLevel}function le(n,...e){if(Ui.logLevel<=Me.DEBUG){const t=e.map(ep);Ui.debug(`Firestore (${oa}): ${n}`,...t)}}function Jr(n,...e){if(Ui.logLevel<=Me.ERROR){const t=e.map(ep);Ui.error(`Firestore (${oa}): ${n}`,...t)}}function Fi(n,...e){if(Ui.logLevel<=Me.WARN){const t=e.map(ep);Ui.warn(`Firestore (${oa}): ${n}`,...t)}}function ep(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Wv(n,s,t)}function Wv(n,e,t){let s=`FIRESTORE (${oa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Jr(s),new Error(s)}function Ke(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||Wv(e,o,s)}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends Zn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ht.UNAUTHENTICATED)))}shutdown(){}}class jI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class VI{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let s=this.i;const o=y=>this.i!==s?(s=this.i,t(y)):Promise.resolve();let l=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Qr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},p=y=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Qr)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ke(typeof s.accessToken=="string",31837,{l:s}),new Hv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new Ht(e)}}class OI{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class LI{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new OI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ht.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ly{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const s=l=>{l.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,le("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ly(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ly(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=UI(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Ue(n,e){return n<e?-1:n>e?1:0}function kf(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return of(o)===of(l)?Ue(o,l):of(o)?1:-1}return Ue(n.length,e.length)}const FI=55296,zI=57343;function of(n){const e=n.charCodeAt(0);return e>=FI&&e<=zI}function Xo(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="__name__";class _r{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ee(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return _r.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _r?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=_r.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ue(e.length,t.length)}static compareSegments(e,t){const s=_r.isNumericId(e),o=_r.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?_r.extractNumericId(e).compare(_r.extractNumericId(t)):kf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fs.fromString(e.substring(4,e.length-2))}}class Xe extends _r{construct(e,t,s){return new Xe(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new se(G.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Xe(t)}static emptyPath(){return new Xe([])}}const BI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends _r{construct(e,t,s){return new Mt(e,t,s)}static isValidIdentifier(e){return BI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===My}static keyField(){return new Mt([My])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new se(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new se(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new se(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(s+=p,o++):(l(),o++)}if(l(),d)throw new se(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(t)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(Xe.fromString(e))}static fromName(e){return new ve(Xe.fromString(e).popFirst(5))}static empty(){return new ve(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new Xe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(n,e,t){if(!t)throw new se(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $I(n,e,t,s){if(e===!0&&s===!0)throw new se(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Uy(n){if(!ve.isDocumentKey(n))throw new se(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Fy(n){if(ve.isDocumentKey(n))throw new se(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Kv(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Xc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function Jn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new se(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xc(n);throw new se(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ol(n,e){if(!Kv(n))throw new se(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const d=n[s];if(o&&typeof d!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new se(G.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy=-62135596800,By=1e6;class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*By);return new rt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<zy)throw new se(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/By}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ol(e,rt._jsonSchema))return new rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:Et("string",rt._jsonSchemaVersion),seconds:Et("number"),nanoseconds:Et("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new rt(0,0))}static max(){return new be(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=-1;function qI(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=be.fromTimestamp(s===1e9?new rt(t+1,0):new rt(t,s));return new qs(o,ve.empty(),e)}function WI(n){return new qs(n.readTime,n.key,Il)}class qs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new qs(be.min(),ve.empty(),Il)}static max(){return new qs(be.max(),ve.empty(),Il)}}function HI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(n){if(n.code!==G.FAILED_PRECONDITION||n.message!==GI)throw n;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,s)=>{t(e)}))}static reject(e){return new K(((t,s)=>{s(e)}))}static waitFor(e){return new K(((t,s)=>{let o=0,l=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++l,d&&l===o&&t()}),(y=>s(y)))})),d=!0,l===o&&t()}))}static or(e){let t=K.resolve(!1);for(const s of e)t=t.next((o=>o?K.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new K(((s,o)=>{const l=e.length,d=new Array(l);let p=0;for(let y=0;y<l;y++){const v=y;t(e[v]).next((w=>{d[v]=w,++p,p===l&&s(d)}),(w=>o(w)))}}))}static doWhile(e,t){return new K(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function QI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function la(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np=-1;function ed(n){return n==null}function Sc(n){return n===0&&1/n==-1/0}function YI(n){return typeof n=="number"&&Number.isInteger(n)&&!Sc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="";function JI(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$y(e)),e=XI(n.get(t),e);return $y(e)}function XI(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case Qv:t+="";break;default:t+=l}}return t}function $y(n){return n+Qv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Js(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Yv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.comparator=e,this.root=t||Lt.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lc(this.root,e,this.comparator,!0)}}class lc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Lt.RED,this.left=o??Lt.EMPTY,this.right=l??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Lt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Lt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Lt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wy(this.data.getIterator())}getIteratorFrom(e){return new Wy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new At(this.comparator);return t.data=e,t}}class Wy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new xn([])}unionWith(e){let t=new At(Mt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new xn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Jv("Invalid base64 string: "+l):l}})(e);return new Ut(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l})(e);return new Ut(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const ZI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ws(n){if(Ke(!!n,39018),typeof n=="string"){let e=0;const t=ZI.exec(n);if(Ke(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ft(n.seconds),nanos:ft(n.nanos)}}function ft(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Hs(n){return typeof n=="string"?Ut.fromBase64String(n):Ut.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="server_timestamp",Zv="__type__",e_="__previous_value__",t_="__local_write_time__";function rp(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Zv])==null?void 0:s.stringValue)===Xv}function td(n){const e=n.mapValue.fields[e_];return rp(e)?td(e):e}function Sl(n){const e=Ws(n.mapValue.fields[t_].timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,t,s,o,l,d,p,y,v,w,E){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=w,this.apiKey=E}}const kc="(default)";class kl{constructor(e,t){this.projectId=e,this.database=t||kc}static empty(){return new kl("","")}get isDefaultDatabase(){return this.database===kc}isEqual(e){return e instanceof kl&&e.projectId===this.projectId&&e.database===this.database}}function tS(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new se(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kl(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="__type__",nS="__max__",uc={mapValue:{}},r_="__vector__",bc="value";function Gs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?rp(n)?4:sS(n)?9007199254740991:rS(n)?10:11:Ee(28295,{value:n})}function kr(n,e){if(n===e)return!0;const t=Gs(n);if(t!==Gs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sl(n).isEqual(Sl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=Ws(o.timestampValue),p=Ws(l.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Hs(o.bytesValue).isEqual(Hs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return ft(o.geoPointValue.latitude)===ft(l.geoPointValue.latitude)&&ft(o.geoPointValue.longitude)===ft(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ft(o.integerValue)===ft(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=ft(o.doubleValue),p=ft(l.doubleValue);return d===p?Sc(d)===Sc(p):isNaN(d)&&isNaN(p)}return!1})(n,e);case 9:return Xo(n.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return(function(o,l){const d=o.mapValue.fields||{},p=l.mapValue.fields||{};if(qy(d)!==qy(p))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(p[y]===void 0||!kr(d[y],p[y])))return!1;return!0})(n,e);default:return Ee(52216,{left:n})}}function bl(n,e){return(n.values||[]).find((t=>kr(t,e)))!==void 0}function Zo(n,e){if(n===e)return 0;const t=Gs(n),s=Gs(e);if(t!==s)return Ue(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return(function(l,d){const p=ft(l.integerValue||l.doubleValue),y=ft(d.integerValue||d.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(n,e);case 3:return Hy(n.timestampValue,e.timestampValue);case 4:return Hy(Sl(n),Sl(e));case 5:return kf(n.stringValue,e.stringValue);case 6:return(function(l,d){const p=Hs(l),y=Hs(d);return p.compareTo(y)})(n.bytesValue,e.bytesValue);case 7:return(function(l,d){const p=l.split("/"),y=d.split("/");for(let v=0;v<p.length&&v<y.length;v++){const w=Ue(p[v],y[v]);if(w!==0)return w}return Ue(p.length,y.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,d){const p=Ue(ft(l.latitude),ft(d.latitude));return p!==0?p:Ue(ft(l.longitude),ft(d.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Gy(n.arrayValue,e.arrayValue);case 10:return(function(l,d){var S,O,H,W;const p=l.fields||{},y=d.fields||{},v=(S=p[bc])==null?void 0:S.arrayValue,w=(O=y[bc])==null?void 0:O.arrayValue,E=Ue(((H=v==null?void 0:v.values)==null?void 0:H.length)||0,((W=w==null?void 0:w.values)==null?void 0:W.length)||0);return E!==0?E:Gy(v,w)})(n.mapValue,e.mapValue);case 11:return(function(l,d){if(l===uc.mapValue&&d===uc.mapValue)return 0;if(l===uc.mapValue)return 1;if(d===uc.mapValue)return-1;const p=l.fields||{},y=Object.keys(p),v=d.fields||{},w=Object.keys(v);y.sort(),w.sort();for(let E=0;E<y.length&&E<w.length;++E){const S=kf(y[E],w[E]);if(S!==0)return S;const O=Zo(p[y[E]],v[w[E]]);if(O!==0)return O}return Ue(y.length,w.length)})(n.mapValue,e.mapValue);default:throw Ee(23264,{he:t})}}function Hy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);const t=Ws(n),s=Ws(e),o=Ue(t.seconds,s.seconds);return o!==0?o:Ue(t.nanos,s.nanos)}function Gy(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Zo(t[o],s[o]);if(l)return l}return Ue(t.length,s.length)}function ea(n){return bf(n)}function bf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Ws(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Hs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=bf(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of s)l?l=!1:o+=",",o+=`${d}:${bf(t.fields[d])}`;return o+"}"})(n.mapValue):Ee(61005,{value:n})}function pc(n){switch(Gs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=td(n);return e?16+pc(e):16;case 5:return 2*n.stringValue.length;case 6:return Hs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+pc(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return Js(s.fields,((l,d)=>{o+=l.length+pc(d)})),o})(n.mapValue);default:throw Ee(13486,{value:n})}}function Ky(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Af(n){return!!n&&"integerValue"in n}function sp(n){return!!n&&"arrayValue"in n}function Qy(n){return!!n&&"nullValue"in n}function Yy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function mc(n){return!!n&&"mapValue"in n}function rS(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[n_])==null?void 0:s.stringValue)===r_}function ml(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Js(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=ml(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ml(n.arrayValue.values[t]);return e}return{...n}}function sS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===nS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!mc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ml(t)}setAll(e){let t=Mt.emptyPath(),s={},o=[];e.forEach(((d,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,s,o),s={},o=[],t=p.popLast()}d?s[p.lastSegment()]=ml(d):o.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());mc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];mc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Js(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new ln(ml(this.value))}}function s_(n){const e=[];return Js(n.fields,((t,s)=>{const o=new Mt([t]);if(mc(s)){const l=s_(s.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)})),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,t,s,o,l,d,p){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Gt(e,0,be.min(),be.min(),be.min(),ln.empty(),0)}static newFoundDocument(e,t,s,o){return new Gt(e,1,t,be.min(),s,o,0)}static newNoDocument(e,t){return new Gt(e,2,t,be.min(),be.min(),ln.empty(),0)}static newUnknownDocument(e,t){return new Gt(e,3,t,be.min(),be.min(),ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t){this.position=e,this.inclusive=t}}function Jy(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],d=n.position[o];if(l.field.isKeyField()?s=ve.comparator(ve.fromName(d.referenceValue),t.key):s=Zo(d,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Xy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!kr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,t="asc"){this.field=e,this.dir=t}}function iS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{}class xt extends i_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new aS(e,t,s):t==="array-contains"?new cS(e,s):t==="in"?new dS(e,s):t==="not-in"?new hS(e,s):t==="array-contains-any"?new fS(e,s):new xt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new lS(e,s):new uS(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Zo(t,this.value)):t!==null&&Gs(this.value)===Gs(t)&&this.matchesComparison(Zo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xn extends i_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Xn(e,t)}matches(e){return o_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function o_(n){return n.op==="and"}function a_(n){return oS(n)&&o_(n)}function oS(n){for(const e of n.filters)if(e instanceof Xn)return!1;return!0}function Cf(n){if(n instanceof xt)return n.field.canonicalString()+n.op.toString()+ea(n.value);if(a_(n))return n.filters.map((e=>Cf(e))).join(",");{const e=n.filters.map((t=>Cf(t))).join(",");return`${n.op}(${e})`}}function l_(n,e){return n instanceof xt?(function(s,o){return o instanceof xt&&s.op===o.op&&s.field.isEqual(o.field)&&kr(s.value,o.value)})(n,e):n instanceof Xn?(function(s,o){return o instanceof Xn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,d,p)=>l&&l_(d,o.filters[p])),!0):!1})(n,e):void Ee(19439)}function u_(n){return n instanceof xt?(function(t){return`${t.field.canonicalString()} ${t.op} ${ea(t.value)}`})(n):n instanceof Xn?(function(t){return t.op.toString()+" {"+t.getFilters().map(u_).join(" ,")+"}"})(n):"Filter"}class aS extends xt{constructor(e,t,s){super(e,t,s),this.key=ve.fromName(s.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class lS extends xt{constructor(e,t){super(e,"in",t),this.keys=c_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class uS extends xt{constructor(e,t){super(e,"not-in",t),this.keys=c_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function c_(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>ve.fromName(s.referenceValue)))}class cS extends xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sp(t)&&bl(t.arrayValue,this.value)}}class dS extends xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bl(this.value.arrayValue,t)}}class hS extends xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bl(this.value.arrayValue,t)}}class fS extends xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>bl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,t=null,s=[],o=[],l=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=d,this.endAt=p,this.Te=null}}function Zy(n,e=null,t=[],s=[],o=null,l=null,d=null){return new pS(n,e,t,s,o,l,d)}function ip(n){const e=Pe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Cf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),ed(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>ea(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>ea(s))).join(",")),e.Te=t}return e.Te}function op(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!l_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Xy(n.startAt,e.startAt)&&Xy(n.endAt,e.endAt)}function Nf(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,t=null,s=[],o=[],l=null,d="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=d,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function mS(n,e,t,s,o,l,d,p){return new ua(n,e,t,s,o,l,d,p)}function ap(n){return new ua(n)}function e0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function gS(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function d_(n){return n.collectionGroup!==null}function gl(n){const e=Pe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new At(Mt.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Al(l,s))})),t.has(Mt.keyField().canonicalString())||e.Ie.push(new Al(Mt.keyField(),s))}return e.Ie}function xr(n){const e=Pe(n);return e.Ee||(e.Ee=yS(e,gl(n))),e.Ee}function yS(n,e){if(n.limitType==="F")return Zy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Al(o.field,l)}));const t=n.endAt?new Ac(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Ac(n.startAt.position,n.startAt.inclusive):null;return Zy(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Rf(n,e){const t=n.filters.concat([e]);return new ua(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function vS(n,e){const t=n.explicitOrderBy.concat([e]);return new ua(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Cc(n,e,t){return new ua(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nd(n,e){return op(xr(n),xr(e))&&n.limitType===e.limitType}function h_(n){return`${ip(xr(n))}|lt:${n.limitType}`}function Bo(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>u_(o))).join(", ")}]`),ed(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>ea(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>ea(o))).join(",")),`Target(${s})`})(xr(n))}; limitType=${n.limitType})`}function rd(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ve.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of gl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(d,p,y){const v=Jy(d,p,y);return d.inclusive?v<=0:v<0})(s.startAt,gl(s),o)||s.endAt&&!(function(d,p,y){const v=Jy(d,p,y);return d.inclusive?v>=0:v>0})(s.endAt,gl(s),o))})(n,e)}function _S(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function f_(n){return(e,t)=>{let s=!1;for(const o of gl(n)){const l=wS(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function wS(n,e,t){const s=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(l,d,p){const y=d.data.field(l),v=p.data.field(l);return y!==null&&v!==null?Zo(y,v):Ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ee(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return Yv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=new at(ve.comparator);function Xr(){return xS}const p_=new at(ve.comparator);function cl(...n){let e=p_;for(const t of n)e=e.insert(t.key,t);return e}function m_(n){let e=p_;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Di(){return yl()}function g_(){return yl()}function yl(){return new Qi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const ES=new at(ve.comparator),TS=new At(ve.comparator);function Fe(...n){let e=TS;for(const t of n)e=e.add(t);return e}const IS=new At(Ue);function SS(){return IS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sc(e)?"-0":e}}function y_(n){return{integerValue:""+n}}function v_(n,e){return YI(e)?y_(e):lp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(){this._=void 0}}function kS(n,e,t){return n instanceof Nc?(function(o,l){const d={fields:{[Zv]:{stringValue:Xv},[t_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&rp(l)&&(l=td(l)),l&&(d.fields[e_]=l),{mapValue:d}})(t,e):n instanceof Cl?w_(n,e):n instanceof Nl?x_(n,e):(function(o,l){const d=__(o,l),p=t0(d)+t0(o.Ae);return Af(d)&&Af(o.Ae)?y_(p):lp(o.serializer,p)})(n,e)}function bS(n,e,t){return n instanceof Cl?w_(n,e):n instanceof Nl?x_(n,e):t}function __(n,e){return n instanceof Rl?(function(s){return Af(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Nc extends sd{}class Cl extends sd{constructor(e){super(),this.elements=e}}function w_(n,e){const t=E_(e);for(const s of n.elements)t.some((o=>kr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Nl extends sd{constructor(e){super(),this.elements=e}}function x_(n,e){let t=E_(e);for(const s of n.elements)t=t.filter((o=>!kr(o,s)));return{arrayValue:{values:t}}}class Rl extends sd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function t0(n){return ft(n.integerValue||n.doubleValue)}function E_(n){return sp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,t){this.field=e,this.transform=t}}function CS(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof Cl&&o instanceof Cl||s instanceof Nl&&o instanceof Nl?Xo(s.elements,o.elements,kr):s instanceof Rl&&o instanceof Rl?kr(s.Ae,o.Ae):s instanceof Nc&&o instanceof Nc})(n.transform,e.transform)}class NS{constructor(e,t){this.version=e,this.transformResults=t}}class un{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new un}static exists(e){return new un(void 0,e)}static updateTime(e){return new un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class id{}function T_(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new od(n.key,un.none()):new Ll(n.key,n.data,un.none());{const t=n.data,s=ln.empty();let o=new At(Mt.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?s.delete(l):s.set(l,d),o=o.add(l)}return new Xs(n.key,s,new xn(o.toArray()),un.none())}}function RS(n,e,t){n instanceof Ll?(function(o,l,d){const p=o.value.clone(),y=r0(o.fieldTransforms,l,d.transformResults);p.setAll(y),l.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(n,e,t):n instanceof Xs?(function(o,l,d){if(!gc(o.precondition,l))return void l.convertToUnknownDocument(d.version);const p=r0(o.fieldTransforms,l,d.transformResults),y=l.data;y.setAll(I_(o)),y.setAll(p),l.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(n,e,t):(function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function vl(n,e,t,s){return n instanceof Ll?(function(l,d,p,y){if(!gc(l.precondition,d))return p;const v=l.value.clone(),w=s0(l.fieldTransforms,y,d);return v.setAll(w),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null})(n,e,t,s):n instanceof Xs?(function(l,d,p,y){if(!gc(l.precondition,d))return p;const v=s0(l.fieldTransforms,y,d),w=d.data;return w.setAll(I_(l)),w.setAll(v),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,d,p){return gc(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(n,e,t)}function PS(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=__(s.transform,o||null);l!=null&&(t===null&&(t=ln.empty()),t.set(s.field,l))}return t||null}function n0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Xo(s,o,((l,d)=>CS(l,d)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ll extends id{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Xs extends id{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function I_(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function r0(n,e,t){const s=new Map;Ke(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let o=0;o<t.length;o++){const l=n[o],d=l.transform,p=e.data.field(l.field);s.set(l.field,bS(d,p,t[o]))}return s}function s0(n,e,t){const s=new Map;for(const o of n){const l=o.transform,d=t.data.field(o.field);s.set(o.field,kS(l,d,e))}return s}class od extends id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DS extends id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&RS(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=vl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=vl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=g_();return this.mutations.forEach((o=>{const l=e.get(o.key),d=l.overlayedDocument;let p=this.applyToLocalView(d,l.mutatedFields);p=t.has(o.key)?null:p;const y=T_(d,p);y!==null&&s.set(o.key,y),d.isValidDocument()||d.convertToNoDocument(be.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,((t,s)=>n0(t,s)))&&Xo(this.baseMutations,e.baseMutations,((t,s)=>n0(t,s)))}}class up{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Ke(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return ES})();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,s[d].version);return new up(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,Be;function LS(n){switch(n){case G.OK:return Ee(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return Ee(15467,{code:n})}}function S_(n){if(n===void 0)return Jr("GRPC error has no .code"),G.UNKNOWN;switch(n){case _t.OK:return G.OK;case _t.CANCELLED:return G.CANCELLED;case _t.UNKNOWN:return G.UNKNOWN;case _t.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case _t.INTERNAL:return G.INTERNAL;case _t.UNAVAILABLE:return G.UNAVAILABLE;case _t.UNAUTHENTICATED:return G.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case _t.NOT_FOUND:return G.NOT_FOUND;case _t.ALREADY_EXISTS:return G.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return G.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case _t.ABORTED:return G.ABORTED;case _t.OUT_OF_RANGE:return G.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return G.UNIMPLEMENTED;case _t.DATA_LOSS:return G.DATA_LOSS;default:return Ee(39323,{code:n})}}(Be=_t||(_t={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=new Fs([4294967295,4294967295],0);function i0(n){const e=MS().encode(n),t=new Uv;return t.update(e),new Uint8Array(t.digest())}function o0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Fs([t,s],0),new Fs([o,l],0)]}class cp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new dl(`Invalid padding: ${t}`);if(s<0)throw new dl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new dl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new dl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Fs.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Fs.fromNumber(s)));return o.compare(US)===1&&(o=new Fs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=i0(e),[s,o]=o0(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(s,o,l);if(!this.we(d))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new cp(l,o,t);return s.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const t=i0(e),[s,o]=o0(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(s,o,l);this.be(d)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Ml.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new ad(be.min(),o,new at(Ue),Xr(),Fe())}}class Ml{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ml(s,t,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=o}}class k_{constructor(e,t){this.targetId=e,this.Ce=t}}class b_{constructor(e,t,s=Ut.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class a0{constructor(){this.ve=0,this.Fe=l0(),this.Me=Ut.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),t=Fe(),s=Fe();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ee(38017,{changeType:l})}})),new Ml(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=l0()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class FS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Xr(),this.He=cc(),this.Je=cc(),this.Ze=new at(Ue)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Nf(l))if(s===0){const d=new ve(l.path);this.et(t,d,Gt.newNoDocument(d,be.min()))}else Ke(s===1,20013,{expectedCount:s});else{const d=this._t(t);if(d!==s){const p=this.ut(e),y=p?this.ct(p,e,d):1;if(y!==0){this.it(t);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let d,p;try{d=Hs(s).toUint8Array()}catch(y){if(y instanceof Jv)return Fi("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new cp(d,o,l)}catch(y){return Fi(y instanceof dl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,d)=>{const p=this.ot(d);if(p){if(l.current&&Nf(p.target)){const y=new ve(p.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,Gt.newNoDocument(y,e))}l.Be&&(t.set(d,l.ke()),l.Ke())}}));let s=Fe();this.Je.forEach(((l,d)=>{let p=!0;d.forEachWhile((y=>{const v=this.ot(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(l))})),this.je.forEach(((l,d)=>d.setReadTime(e)));const o=new ad(e,t,this.Ze,this.je,s);return this.je=Xr(),this.He=cc(),this.Je=cc(),this.Ze=new at(Ue),o}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new a0,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new At(Ue),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new At(Ue),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new a0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function cc(){return new at(ve.comparator)}function l0(){return new at(ve.comparator)}const zS={asc:"ASCENDING",desc:"DESCENDING"},BS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$S={and:"AND",or:"OR"};class qS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Pf(n,e){return n.useProto3Json||ed(e)?e:{value:e}}function Rc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function WS(n,e){return Rc(n,e.toTimestamp())}function Er(n){return Ke(!!n,49232),be.fromTimestamp((function(t){const s=Ws(t);return new rt(s.seconds,s.nanos)})(n))}function dp(n,e){return Df(n,e).canonicalString()}function Df(n,e){const t=(function(o){return new Xe(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function C_(n){const e=Xe.fromString(n);return Ke(j_(e),10190,{key:e.toString()}),e}function jf(n,e){return dp(n.databaseId,e.path)}function af(n,e){const t=C_(e);if(t.get(1)!==n.databaseId.projectId)throw new se(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new se(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(R_(t))}function N_(n,e){return dp(n.databaseId,e)}function HS(n){const e=C_(n);return e.length===4?Xe.emptyPath():R_(e)}function Vf(n){return new Xe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function R_(n){return Ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function u0(n,e,t){return{name:jf(n,e),fields:t.value.mapValue.fields}}function GS(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ee(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,w){return v.useProto3Json?(Ke(w===void 0||typeof w=="string",58123),Ut.fromBase64String(w||"")):(Ke(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Ut.fromUint8Array(w||new Uint8Array))})(n,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(v){const w=v.code===void 0?G.UNKNOWN:S_(v.code);return new se(w,v.message||"")})(d);t=new b_(s,o,l,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=af(n,s.document.name),l=Er(s.document.updateTime),d=s.document.createTime?Er(s.document.createTime):be.min(),p=new ln({mapValue:{fields:s.document.fields}}),y=Gt.newFoundDocument(o,l,d,p),v=s.targetIds||[],w=s.removedTargetIds||[];t=new yc(v,w,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=af(n,s.document),l=s.readTime?Er(s.readTime):be.min(),d=Gt.newNoDocument(o,l),p=s.removedTargetIds||[];t=new yc([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=af(n,s.document),l=s.removedTargetIds||[];t=new yc([],l,o,null)}else{if(!("filter"in e))return Ee(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,d=new OS(o,l),p=s.targetId;t=new k_(p,d)}}return t}function KS(n,e){let t;if(e instanceof Ll)t={update:u0(n,e.key,e.value)};else if(e instanceof od)t={delete:jf(n,e.key)};else if(e instanceof Xs)t={update:u0(n,e.key,e.data),updateMask:rk(e.fieldMask)};else{if(!(e instanceof DS))return Ee(16599,{dt:e.type});t={verify:jf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,d){const p=d.transform;if(p instanceof Nc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Cl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Nl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Rl)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw Ee(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:WS(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ee(27497)})(n,e.precondition)),t}function QS(n,e){return n&&n.length>0?(Ke(e!==void 0,14353),n.map((t=>(function(o,l){let d=o.updateTime?Er(o.updateTime):Er(l);return d.isEqual(be.min())&&(d=Er(l)),new NS(d,o.transformResults||[])})(t,e)))):[]}function YS(n,e){return{documents:[N_(n,e.path)]}}function JS(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=N_(n,o);const l=(function(v){if(v.length!==0)return D_(Xn.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(v){if(v.length!==0)return v.map((w=>(function(S){return{field:$o(S.field),direction:ek(S.dir)}})(w)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const p=Pf(n,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:t,parent:o}}function XS(n){let e=HS(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Ke(s===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(E){const S=P_(E);return S instanceof Xn&&a_(S)?S.getFilters():[S]})(t.where));let d=[];t.orderBy&&(d=(function(E){return E.map((S=>(function(H){return new Al(qo(H.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(S)))})(t.orderBy));let p=null;t.limit&&(p=(function(E){let S;return S=typeof E=="object"?E.value:E,ed(S)?null:S})(t.limit));let y=null;t.startAt&&(y=(function(E){const S=!!E.before,O=E.values||[];return new Ac(O,S)})(t.startAt));let v=null;return t.endAt&&(v=(function(E){const S=!E.before,O=E.values||[];return new Ac(O,S)})(t.endAt)),mS(e,o,d,l,p,"F",y,v)}function ZS(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function P_(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=qo(t.unaryFilter.field);return xt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=qo(t.unaryFilter.field);return xt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=qo(t.unaryFilter.field);return xt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=qo(t.unaryFilter.field);return xt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return xt.create(qo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Xn.create(t.compositeFilter.filters.map((s=>P_(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(n):Ee(30097,{filter:n})}function ek(n){return zS[n]}function tk(n){return BS[n]}function nk(n){return $S[n]}function $o(n){return{fieldPath:n.canonicalString()}}function qo(n){return Mt.fromServerFormat(n.fieldPath)}function D_(n){return n instanceof xt?(function(t){if(t.op==="=="){if(Yy(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NAN"}};if(Qy(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Yy(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NOT_NAN"}};if(Qy(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$o(t.field),op:tk(t.op),value:t.value}}})(n):n instanceof Xn?(function(t){const s=t.getFilters().map((o=>D_(o)));return s.length===1?s[0]:{compositeFilter:{op:nk(t.op),filters:s}}})(n):Ee(54877,{filter:n})}function rk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function j_(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function V_(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,t,s,o,l=be.min(),d=be.min(),p=Ut.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new Ls(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ls(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.yt=e}}function ik(n){const e=XS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Cc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(){this.Sn=new ak}addToCollectionParentIndex(e,t){return this.Sn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(qs.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(qs.min())}updateCollectionGroup(e,t,s){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class ak{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new At(Xe.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new At(Xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},O_=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(O_,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ta(0)}static ar(){return new ta(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="LruGarbageCollector",lk=1048576;function h0([n,e],[t,s]){const o=Ue(n,t);return o===0?Ue(e,s):o}class uk{constructor(e){this.Pr=e,this.buffer=new At(h0),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();h0(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ck{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){le(d0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){la(t)?le(d0,"Ignoring IndexedDB error during garbage collection: ",t):await aa(t)}await this.Ar(3e5)}))}}class dk{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return K.resolve(Zc.ce);const s=new uk(t);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(c0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),c0):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,o,l,d,p,y,v;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,d=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,p=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,y=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(v=Date.now(),zo()<=Me.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-w}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${l} targets in `+(y-p)+`ms
	Removed ${E} documents in `+(v-y)+`ms
Total Duration: ${v-w}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function hk(n,e){return new dk(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(){this.changes=new Qi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?K.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&vl(s.mutation,o,xn.empty(),rt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Fe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Fe()){const o=Di();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let d=cl();return l.forEach(((p,y)=>{d=d.insert(p,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=Di();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Fe())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((d,p)=>{t.set(d,p)}))}))}computeViews(e,t,s,o){let l=Xr();const d=yl(),p=(function(){return yl()})();return t.forEach(((y,v)=>{const w=s.get(v.key);o.has(v.key)&&(w===void 0||w.mutation instanceof Xs)?l=l.insert(v.key,v):w!==void 0?(d.set(v.key,w.mutation.getFieldMask()),vl(w.mutation,v,w.mutation.getFieldMask(),rt.now())):d.set(v.key,xn.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((v,w)=>d.set(v,w))),t.forEach(((v,w)=>p.set(v,new pk(w,d.get(v)??null)))),p)))}recalculateAndSaveOverlays(e,t){const s=yl();let o=new at(((d,p)=>d-p)),l=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const p of d)p.keys().forEach((y=>{const v=t.get(y);if(v===null)return;let w=s.get(y)||xn.empty();w=p.applyToLocalView(v,w),s.set(y,w);const E=(o.get(p.batchId)||Fe()).add(y);o=o.insert(p.batchId,E)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),v=y.key,w=y.value,E=g_();w.forEach((S=>{if(!l.has(S)){const O=T_(t.get(S),s.get(S));O!==null&&E.set(S,O),l=l.add(S)}})),d.push(this.documentOverlayCache.saveOverlays(e,v,E))}return K.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return gS(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):d_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):K.resolve(Di());let p=Il,y=l;return d.next((v=>K.forEach(v,((w,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),l.get(w)?K.resolve():this.remoteDocumentCache.getEntry(e,w).next((S=>{y=y.insert(w,S)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,y,v,Fe()))).next((w=>({batchId:p,changes:m_(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((s=>{let o=cl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let d=cl();return this.indexManager.getCollectionParents(e,l).next((p=>K.forEach(p,(y=>{const v=(function(E,S){return new ua(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next((w=>{w.forEach(((E,S)=>{d=d.insert(E,S)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((d=>{l.forEach(((y,v)=>{const w=v.getKey();d.get(w)===null&&(d=d.insert(w,Gt.newInvalidDocument(w)))}));let p=cl();return d.forEach(((y,v)=>{const w=l.get(y);w!==void 0&&vl(w.mutation,v,xn.empty(),rt.now()),rd(t,v)&&(p=p.insert(y,v))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return K.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Er(o.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:ik(o.bundledQuery),readTime:Er(o.readTime)}})(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this.overlays=new at(ve.comparator),this.Lr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Di();return K.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.bt(e,t,l)})),K.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(s)),K.resolve()}getOverlaysForCollection(e,t,s){const o=Di(),l=t.length+1,d=new ve(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const y=p.getNext().value,v=y.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&y.largestBatchId>s&&o.set(y.getKey(),y)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new at(((v,w)=>v-w));const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let w=l.get(v.largestBatchId);w===null&&(w=Di(),l=l.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const p=Di(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,w)=>p.set(v,w))),!(p.size()>=o)););return K.resolve(p)}bt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new VS(t,s));let l=this.Lr.get(t);l===void 0&&(l=Fe(),this.Lr.set(t,l)),this.Lr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(){this.kr=new At(Pt.Kr),this.qr=new At(Pt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new Pt(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Pt(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new ve(new Xe([])),s=new Pt(t,e),o=new Pt(t,e+1),l=[];return this.qr.forEachInRange([s,o],(d=>{this.Wr(d),l.push(d.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ve(new Xe([])),s=new Pt(t,e),o=new Pt(t,e+1);let l=Fe();return this.qr.forEachInRange([s,o],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new Pt(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Pt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ve.comparator(e.key,t.key)||Ue(e.Hr,t.Hr)}static Ur(e,t){return Ue(e.Hr,t.Hr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new At(Pt.Kr)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new jS(l,t,s,o);this.mutationQueue.push(d);for(const p of o)this.Jr=this.Jr.add(new Pt(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return K.resolve(d)}lookupMutationBatch(e,t){return K.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?np:this.Yn-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Pt(t,0),o=new Pt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([s,o],(d=>{const p=this.Zr(d.Hr);l.push(p)})),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new At(Ue);return t.forEach((o=>{const l=new Pt(o,0),d=new Pt(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,d],(p=>{s=s.add(p.Hr)}))})),K.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;ve.isDocumentKey(l)||(l=l.child(""));const d=new Pt(new ve(l),0);let p=new At(Ue);return this.Jr.forEachWhile((y=>{const v=y.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(p=p.add(y.Hr)),!0)}),d),K.resolve(this.Yr(p))}Yr(e){const t=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ke(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return K.forEach(t.mutations,(o=>{const l=new Pt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new Pt(t,0),o=this.Jr.firstAfterOrEqual(s);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.ti=e,this.docs=(function(){return new at(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,d=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return K.resolve(s?s.document.mutableCopy():Gt.newInvalidDocument(t))}getEntries(e,t){let s=Xr();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Gt.newInvalidDocument(o))})),K.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Xr();const d=t.path,p=new ve(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:v,value:{document:w}}=y.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||HI(WI(w),s)<=0||(o.has(w.key)||rd(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Ee(9500)}ni(e,t){return K.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new xk(this)}getSize(e){return K.resolve(this.size)}}class xk extends fk{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),K.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.persistence=e,this.ri=new Qi((t=>ip(t)),op),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.ii=0,this.si=new hp,this.targetCount=0,this.oi=ta._r()}forEachTarget(e,t){return this.ri.forEach(((s,o)=>t(o))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),K.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new ta(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.lr(t),K.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ri.forEach(((d,p)=>{p.sequenceNumber<=t&&s.get(p.targetId)===null&&(this.ri.delete(d),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),K.waitFor(l).next((()=>o))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return K.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),K.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((d=>{l.push(o.markPotentiallyOrphaned(e,d))})),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return K.resolve(s)}containsKey(e,t){return K.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,t){this._i={},this.overlays={},this.ai=new Zc(0),this.ui=!1,this.ui=!0,this.ci=new vk,this.referenceDelegate=e(this),this.li=new Ek(this),this.indexManager=new ok,this.remoteDocumentCache=(function(o){return new wk(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new sk(t),this.Pi=new gk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new _k(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){le("MemoryPersistence","Starting transaction:",e);const o=new Tk(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((l=>this.referenceDelegate.Ii(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return K.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class Tk extends KI{constructor(e){super(),this.currentSequenceNumber=e}}class fp{constructor(e){this.persistence=e,this.Ri=new hp,this.Ai=null}static Vi(e){return new fp(e)}get di(){if(this.Ai)return this.Ai;throw Ee(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),K.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.di.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.di,(s=>{const o=ve.fromPath(s);return this.mi(e,o).next((l=>{l||t.removeEntry(o,be.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return K.or([()=>K.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Pc{constructor(e,t){this.persistence=e,this.fi=new Qi((s=>JI(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=hk(this,t)}static Vi(e,t){return new Pc(e,t)}Ti(){}Ii(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return K.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((l=>l?K.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ni(e,(d=>this.wr(e,d,t).next((p=>{p||(s++,l.removeEntry(d,be.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),K.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),K.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=pc(e.data.value)),t}wr(e,t,s){return K.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return K.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=o}static Es(e,t){let s=Fe(),o=Fe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new pp(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return dT()?8:QI(Kt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.gs(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ps(e,t,o,s).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new Ik;return this.ys(e,t,d).next((p=>{if(l.result=p,this.As)return this.ws(e,t,d,p.size)}))})).next((()=>l.result))}ws(e,t,s,o){return s.documentReadCount<this.Vs?(zo()<=Me.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),K.resolve()):(zo()<=Me.DEBUG&&le("QueryEngine","Query:",Bo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(zo()<=Me.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(t))):K.resolve())}gs(e,t){if(e0(t))return K.resolve(null);let s=xr(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Cc(t,null,"F"),s=xr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const d=Fe(...l);return this.fs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,s).next((y=>{const v=this.bs(t,p);return this.Ss(t,v,d,y.readTime)?this.gs(e,Cc(t,null,"F")):this.Ds(e,v,t,y)}))))})))))}ps(e,t,s,o){return e0(t)||o.isEqual(be.min())?K.resolve(null):this.fs.getDocuments(e,s).next((l=>{const d=this.bs(t,l);return this.Ss(t,d,s,o)?K.resolve(null):(zo()<=Me.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Bo(t)),this.Ds(e,d,t,qI(o,Il)).next((p=>p)))}))}bs(e,t){let s=new At(f_(e));return t.forEach(((o,l)=>{rd(e,l)&&(s=s.add(l))})),s}Ss(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ys(e,t,s){return zo()<=Me.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Bo(t)),this.fs.getDocumentsMatchingQuery(e,t,qs.min(),s)}Ds(e,t,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="LocalStore",kk=3e8;class bk{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new at(Ue),this.Fs=new Qi((l=>ip(l)),op),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mk(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function Ak(n,e,t,s){return new bk(n,e,t,s)}async function M_(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const d=[],p=[];let y=Fe();for(const v of o){d.push(v.batchId);for(const w of v.mutations)y=y.add(w.key)}for(const v of l){p.push(v.batchId);for(const w of v.mutations)y=y.add(w.key)}return t.localDocuments.getDocuments(s,y).next((v=>({Ns:v,removedBatchIds:d,addedBatchIds:p})))}))}))}function Ck(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(p,y,v,w){const E=v.batch,S=E.keys();let O=K.resolve();return S.forEach((H=>{O=O.next((()=>w.getEntry(y,H))).next((W=>{const z=v.docVersions.get(H);Ke(z!==null,48541),W.version.compareTo(z)<0&&(E.applyToRemoteDocument(W,v),W.isValidDocument()&&(W.setReadTime(v.commitVersion),w.addEntry(W)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(y,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let y=Fe();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(y=y.add(p.batch.mutations[v].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function U_(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function Nk(n,e){const t=Pe(n),s=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const p=[];e.targetChanges.forEach(((w,E)=>{const S=o.get(E);if(!S)return;p.push(t.li.removeMatchingKeys(l,w.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,w.addedDocuments,E))));let O=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?O=O.withResumeToken(Ut.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,s)),o=o.insert(E,O),(function(W,z,re){return W.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=kk?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(S,O,w)&&p.push(t.li.updateTargetData(l,O))}));let y=Xr(),v=Fe();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),p.push(Rk(l,d,e.documentUpdates).next((w=>{y=w.Bs,v=w.Ls}))),!s.isEqual(be.min())){const w=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,s)));p.push(w)}return K.waitFor(p).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,v))).next((()=>y))})).then((l=>(t.vs=o,l)))}function Rk(n,e,t){let s=Fe(),o=Fe();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let d=Xr();return t.forEach(((p,y)=>{const v=l.get(p);y.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),y.isNoDocument()&&y.version.isEqual(be.min())?(e.removeEntry(p,y.readTime),d=d.insert(p,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),d=d.insert(p,y)):le(mp,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",y.version)})),{Bs:d,Ls:o}}))}function Pk(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=np),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Dk(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.li.getTargetData(s,e).next((l=>l?(o=l,K.resolve(o)):t.li.allocateTargetId(s).next((d=>(o=new Ls(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function Of(n,e,t){const s=Pe(n),o=s.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!la(d))throw d;le(mp,`Failed to update sequence numbers for target ${e}: ${d}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function f0(n,e,t){const s=Pe(n);let o=be.min(),l=Fe();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,v,w){const E=Pe(y),S=E.Fs.get(w);return S!==void 0?K.resolve(E.vs.get(S)):E.li.getTargetData(v,w)})(s,d,xr(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(d,p.targetId).next((y=>{l=y}))})).next((()=>s.Cs.getDocumentsMatchingQuery(d,e,t?o:be.min(),t?l:Fe()))).next((p=>(jk(s,_S(e),p),{documents:p,ks:l})))))}function jk(n,e,t){let s=n.Ms.get(e)||be.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Ms.set(e,s)}class p0{constructor(){this.activeTargetIds=SS()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vk{constructor(){this.vo=new p0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new p0,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="ConnectivityMonitor";class g0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){le(m0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){le(m0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc=null;function Lf(){return dc===null?dc=(function(){return 268435456+Math.round(2147483648*Math.random())})():dc++,"0x"+dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="RestConnection",Lk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Mk{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===kc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const d=Lf(),p=this.Qo(e,t.toUriEncodedString());le(lf,`Sending RPC '${e}' ${d}:`,p,s);const y={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(y,o,l);const{host:v}=new URL(p),w=sa(v);return this.zo(e,p,y,s,w).then((E=>(le(lf,`Received RPC '${e}' ${d}: `,E),E)),(E=>{throw Fi(lf,`RPC '${e}' ${d} failed with error: `,E,"url: ",p,"request:",s),E}))}jo(e,t,s,o,l,d){return this.Wo(e,t,s,o,l)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+oa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}Qo(e,t){const s=Lk[e];let o=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection",ol=(n,e,t)=>{n.listen(e,(s=>{try{t(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Wo extends Mk{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Wo.c_){const e=$v();ol(e,Bv.STAT_EVENT,(t=>{t.stat===Sf.PROXY?le(Wt,"STAT_EVENT: detected buffering proxy"):t.stat===Sf.NOPROXY&&le(Wt,"STAT_EVENT: detected no buffering proxy")})),Wo.c_=!0}}zo(e,t,s,o,l){const d=Lf();return new Promise(((p,y)=>{const v=new Fv;v.setWithCredentials(!0),v.listenOnce(zv.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case fc.NO_ERROR:const E=v.getResponseJson();le(Wt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(E)),p(E);break;case fc.TIMEOUT:le(Wt,`RPC '${e}' ${d} timed out`),y(new se(G.DEADLINE_EXCEEDED,"Request time out"));break;case fc.HTTP_ERROR:const S=v.getStatus();if(le(Wt,`RPC '${e}' ${d} failed with status:`,S,"response text:",v.getResponseText()),S>0){let O=v.getResponseJson();Array.isArray(O)&&(O=O[0]);const H=O==null?void 0:O.error;if(H&&H.status&&H.message){const W=(function(re){const te=re.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(te)>=0?te:G.UNKNOWN})(H.status);y(new se(W,H.message))}else y(new se(G.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new se(G.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:d,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{le(Wt,`RPC '${e}' ${d} completed.`)}}));const w=JSON.stringify(o);le(Wt,`RPC '${e}' ${d} sending request:`,o),v.send(t,"POST",w,s,15)}))}T_(e,t,s){const o=Lf(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=l.join("");le(Wt,`Creating RPC '${e}' stream ${o}: ${v}`,p);const w=d.createWebChannel(v,p);this.I_(w);let E=!1,S=!1;const O=new Uk({Ho:H=>{S?le(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(E||(le(Wt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),E=!0),le(Wt,`RPC '${e}' stream ${o} sending:`,H),w.send(H))},Jo:()=>w.close()});return ol(w,ul.EventType.OPEN,(()=>{S||(le(Wt,`RPC '${e}' stream ${o} transport opened.`),O.i_())})),ol(w,ul.EventType.CLOSE,(()=>{S||(S=!0,le(Wt,`RPC '${e}' stream ${o} transport closed`),O.o_(),this.E_(w))})),ol(w,ul.EventType.ERROR,(H=>{S||(S=!0,Fi(Wt,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),O.o_(new se(G.UNAVAILABLE,"The operation could not be completed")))})),ol(w,ul.EventType.MESSAGE,(H=>{var W;if(!S){const z=H.data[0];Ke(!!z,16349);const re=z,te=(re==null?void 0:re.error)||((W=re[0])==null?void 0:W.error);if(te){le(Wt,`RPC '${e}' stream ${o} received error:`,te);const ce=te.status;let ke=(function(R){const k=_t[R];if(k!==void 0)return S_(k)})(ce),ie=te.message;ce==="NOT_FOUND"&&ie.includes("database")&&ie.includes("does not exist")&&ie.includes(this.databaseId.database)&&Fi(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ke===void 0&&(ke=G.INTERNAL,ie="Unknown error status: "+ce+" with message "+te.message),S=!0,O.o_(new se(ke,ie)),w.close()}else le(Wt,`RPC '${e}' stream ${o} received:`,z),O.__(z)}})),Wo.u_(),setTimeout((()=>{O.s_()}),0),O}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return qv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(n){return new Wo(n)}function uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(n){return new qS(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wo.c_=!1;class F_{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=o,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="PersistentStream";class z_{constructor(e,t,s,o,l,d,p,y){this.Ci=e,this.b_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new F_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(Jr(t.toString()),Jr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new se(G.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(y0,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(le(y0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class zk extends z_{constructor(e,t,s,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,d),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=GS(this.serializer,e),s=(function(l){if(!("targetChange"in l))return be.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?be.min():d.readTime?Er(d.readTime):be.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=Vf(this.serializer),t.addTarget=(function(l,d){let p;const y=d.target;if(p=Nf(y)?{documents:YS(l,y)}:{query:JS(l,y).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=A_(l,d.resumeToken);const v=Pf(l,d.expectedCount);v!==null&&(p.expectedCount=v)}else if(d.snapshotVersion.compareTo(be.min())>0){p.readTime=Rc(l,d.snapshotVersion.toTimestamp());const v=Pf(l,d.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const s=ZS(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=Vf(this.serializer),t.removeTarget=e,this.K_(t)}}class Bk extends z_{constructor(e,t,s,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,d),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=QS(e.writeResults,e.commitTime),s=Er(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Vf(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>KS(this.serializer,s)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{}class qk extends $k{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new se(G.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Wo(e,Df(t,s),o,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new se(G.UNKNOWN,l.toString())}))}jo(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.jo(e,Df(t,s),o,d,p,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new se(G.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Wk(n,e,t,s){return new qk(n,e,t,s)}class Hk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jr(t),this.aa=!1):le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi="RemoteStore";class Gk{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((d=>{s.enqueueAndForget((async()=>{Yi(this)&&(le(zi,"Restarting streams for network reachability change."),await(async function(y){const v=Pe(y);v.Ea.add(4),await Ul(v),v.Va.set("Unknown"),v.Ea.delete(4),await ud(v)})(this))}))})),this.Va=new Hk(s,o)}}async function ud(n){if(Yi(n))for(const e of n.Ra)await e(!0)}async function Ul(n){for(const e of n.Ra)await e(!1)}function B_(n,e){const t=Pe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),_p(t)?vp(t):ca(t).O_()&&yp(t,e))}function gp(n,e){const t=Pe(n),s=ca(t);t.Ia.delete(e),s.O_()&&$_(t,e),t.Ia.size===0&&(s.O_()?s.L_():Yi(t)&&t.Va.set("Unknown"))}function yp(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ca(n).Z_(e)}function $_(n,e){n.da.$e(e),ca(n).X_(e)}function vp(n){n.da=new FS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ca(n).start(),n.Va.ua()}function _p(n){return Yi(n)&&!ca(n).x_()&&n.Ia.size>0}function Yi(n){return Pe(n).Ea.size===0}function q_(n){n.da=void 0}async function Kk(n){n.Va.set("Online")}async function Qk(n){n.Ia.forEach(((e,t)=>{yp(n,e)}))}async function Yk(n,e){q_(n),_p(n)?(n.Va.ha(e),vp(n)):n.Va.set("Unknown")}async function Jk(n,e,t){if(n.Va.set("Online"),e instanceof b_&&e.state===2&&e.cause)try{await(async function(o,l){const d=l.cause;for(const p of l.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ia.delete(p),o.da.removeTarget(p))})(n,e)}catch(s){le(zi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Dc(n,s)}else if(e instanceof yc?n.da.Xe(e):e instanceof k_?n.da.st(e):n.da.tt(e),!t.isEqual(be.min()))try{const s=await U_(n.localStore);t.compareTo(s)>=0&&await(function(l,d){const p=l.da.Tt(d);return p.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const w=l.Ia.get(v);w&&l.Ia.set(v,w.withResumeToken(y.resumeToken,d))}})),p.targetMismatches.forEach(((y,v)=>{const w=l.Ia.get(y);if(!w)return;l.Ia.set(y,w.withResumeToken(Ut.EMPTY_BYTE_STRING,w.snapshotVersion)),$_(l,y);const E=new Ls(w.target,y,v,w.sequenceNumber);yp(l,E)})),l.remoteSyncer.applyRemoteEvent(p)})(n,t)}catch(s){le(zi,"Failed to raise snapshot:",s),await Dc(n,s)}}async function Dc(n,e,t){if(!la(e))throw e;n.Ea.add(1),await Ul(n),n.Va.set("Offline"),t||(t=()=>U_(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{le(zi,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ud(n)}))}function W_(n,e){return e().catch((t=>Dc(n,t,e)))}async function cd(n){const e=Pe(n),t=Ks(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:np;for(;Xk(e);)try{const o=await Pk(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,Zk(e,o)}catch(o){await Dc(e,o)}H_(e)&&G_(e)}function Xk(n){return Yi(n)&&n.Ta.length<10}function Zk(n,e){n.Ta.push(e);const t=Ks(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function H_(n){return Yi(n)&&!Ks(n).x_()&&n.Ta.length>0}function G_(n){Ks(n).start()}async function eb(n){Ks(n).ra()}async function tb(n){const e=Ks(n);for(const t of n.Ta)e.ea(t.mutations)}async function nb(n,e,t){const s=n.Ta.shift(),o=up.from(s,e,t);await W_(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await cd(n)}async function rb(n,e){e&&Ks(n).Y_&&await(async function(s,o){if((function(d){return LS(d)&&d!==G.ABORTED})(o.code)){const l=s.Ta.shift();Ks(s).B_(),await W_(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await cd(s)}})(n,e),H_(n)&&G_(n)}async function v0(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),le(zi,"RemoteStore received new credentials");const s=Yi(t);t.Ea.add(3),await Ul(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ud(t)}async function sb(n,e){const t=Pe(n);e?(t.Ea.delete(2),await ud(t)):e||(t.Ea.add(2),await Ul(t),t.Va.set("Unknown"))}function ca(n){return n.ma||(n.ma=(function(t,s,o){const l=Pe(t);return l.sa(),new zk(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:Kk.bind(null,n),Yo:Qk.bind(null,n),t_:Yk.bind(null,n),J_:Jk.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),_p(n)?vp(n):n.Va.set("Unknown")):(await n.ma.stop(),q_(n))}))),n.ma}function Ks(n){return n.fa||(n.fa=(function(t,s,o){const l=Pe(t);return l.sa(),new Bk(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:eb.bind(null,n),t_:rb.bind(null,n),ta:tb.bind(null,n),na:nb.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await cd(n)):(await n.fa.stop(),n.Ta.length>0&&(le(zi,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const d=Date.now()+s,p=new wp(e,t,d,o,l);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xp(n,e){if(Jr("AsyncQueue",`${e}: ${n}`),la(n))return new se(G.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{static emptySet(e){return new Ho(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ve.comparator(t.key,s.key):(t,s)=>ve.comparator(t.key,s.key),this.keyedMap=cl(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Ho;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.ga=new at(ve.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ee(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class na{constructor(e,t,s,o,l,d,p,y,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,o,l){const d=[];return t.forEach((p=>{d.push({type:0,doc:p})})),new na(e,t,Ho.emptySet(t),d,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class ob{constructor(){this.queries=w0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Pe(t),l=o.queries;o.queries=w0(),l.forEach(((d,p)=>{for(const y of p.ba)y.onError(s)}))})(this,new se(G.ABORTED,"Firestore shutting down"))}}function w0(){return new Qi((n=>h_(n)),nd)}async function K_(n,e){const t=Pe(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.Da()&&(s=2):(l=new ib,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const p=xp(d,`Initialization of query '${Bo(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Ep(t)}async function Q_(n,e){const t=Pe(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const d=l.ba.indexOf(e);d>=0&&(l.ba.splice(d,1),l.ba.length===0?o=e.Da()?0:1:!l.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function ab(n,e){const t=Pe(n);let s=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const p of d.ba)p.Fa(o)&&(s=!0);d.wa=o}}s&&Ep(t)}function lb(n,e,t){const s=Pe(n),o=s.queries.get(e);if(o)for(const l of o.ba)l.onError(t);s.queries.delete(e)}function Ep(n){n.Ca.forEach((e=>{e.next()}))}var Mf,x0;(x0=Mf||(Mf={})).Ma="default",x0.Cache="cache";class Y_{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new na(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Mf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e){this.key=e}}class X_{constructor(e){this.key=e}}class ub{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Fe(),this.mutatedKeys=Fe(),this.eu=f_(e),this.tu=new Ho(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new _0,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,p=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,E)=>{const S=o.get(w),O=rd(this.query,E)?E:null,H=!!S&&this.mutatedKeys.has(S.key),W=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let z=!1;S&&O?S.data.isEqual(O.data)?H!==W&&(s.track({type:3,doc:O}),z=!0):this.su(S,O)||(s.track({type:2,doc:O}),z=!0,(y&&this.eu(O,y)>0||v&&this.eu(O,v)<0)&&(p=!0)):!S&&O?(s.track({type:0,doc:O}),z=!0):S&&!O&&(s.track({type:1,doc:S}),z=!0,(y||v)&&(p=!0)),z&&(O?(d=d.add(O),l=W?l.add(w):l.delete(w)):(d=d.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const w=this.query.limitType==="F"?d.last():d.first();d=d.delete(w.key),l=l.delete(w.key),s.track({type:1,doc:w})}return{tu:d,iu:s,Ss:p,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((w,E)=>(function(O,H){const W=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Vt:z})}};return W(O)-W(H)})(w.type,E.type)||this.eu(w.doc,E.doc))),this.ou(s),o=o??!1;const p=t&&!o?this._u():[],y=this.Ya.size===0&&this.current&&!o?1:0,v=y!==this.Xa;return this.Xa=y,d.length!==0||v?{snapshot:new na(this.query,e.tu,l,d,e.mutatedKeys,y===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Fe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new X_(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new J_(s))})),t}cu(e){this.Za=e.ks,this.Ya=Fe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return na.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Tp="SyncEngine";class cb{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class db{constructor(e){this.key=e,this.hu=!1}}class hb{constructor(e,t,s,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Qi((p=>h_(p)),nd),this.Iu=new Map,this.Eu=new Set,this.Ru=new at(ve.comparator),this.Au=new Map,this.Vu=new hp,this.du={},this.mu=new Map,this.fu=ta.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function fb(n,e,t=!0){const s=sw(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Z_(s,e,t,!0),o}async function pb(n,e){const t=sw(n);await Z_(t,e,!0,!1)}async function Z_(n,e,t,s){const o=await Dk(n.localStore,xr(e)),l=o.targetId,d=n.sharedClientState.addLocalQueryTarget(l,t);let p;return s&&(p=await mb(n,e,l,d==="current",o.resumeToken)),n.isPrimaryClient&&t&&B_(n.remoteStore,o),p}async function mb(n,e,t,s,o){n.pu=(E,S,O)=>(async function(W,z,re,te){let ce=z.view.ru(re);ce.Ss&&(ce=await f0(W.localStore,z.query,!1).then((({documents:R})=>z.view.ru(R,ce))));const ke=te&&te.targetChanges.get(z.targetId),ie=te&&te.targetMismatches.get(z.targetId)!=null,xe=z.view.applyChanges(ce,W.isPrimaryClient,ke,ie);return T0(W,z.targetId,xe.au),xe.snapshot})(n,E,S,O);const l=await f0(n.localStore,e,!0),d=new ub(e,l.ks),p=d.ru(l.documents),y=Ml.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),v=d.applyChanges(p,n.isPrimaryClient,y);T0(n,t,v.au);const w=new cb(e,t,d);return n.Tu.set(e,w),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),v.snapshot}async function gb(n,e,t){const s=Pe(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((d=>!nd(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Of(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&gp(s.remoteStore,o.targetId),Uf(s,o.targetId)})).catch(aa)):(Uf(s,o.targetId),await Of(s.localStore,o.targetId,!0))}async function yb(n,e){const t=Pe(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),gp(t.remoteStore,s.targetId))}async function vb(n,e,t){const s=Sb(n);try{const o=await(function(d,p){const y=Pe(d),v=rt.now(),w=p.reduce(((O,H)=>O.add(H.key)),Fe());let E,S;return y.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let H=Xr(),W=Fe();return y.xs.getEntries(O,w).next((z=>{H=z,H.forEach(((re,te)=>{te.isValidDocument()||(W=W.add(re))}))})).next((()=>y.localDocuments.getOverlayedDocuments(O,H))).next((z=>{E=z;const re=[];for(const te of p){const ce=PS(te,E.get(te.key).overlayedDocument);ce!=null&&re.push(new Xs(te.key,ce,s_(ce.value.mapValue),un.exists(!0)))}return y.mutationQueue.addMutationBatch(O,v,re,p)})).next((z=>{S=z;const re=z.applyToLocalDocumentSet(E,W);return y.documentOverlayCache.saveOverlays(O,z.batchId,re)}))})).then((()=>({batchId:S.batchId,changes:m_(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,p,y){let v=d.du[d.currentUser.toKey()];v||(v=new at(Ue)),v=v.insert(p,y),d.du[d.currentUser.toKey()]=v})(s,o.batchId,t),await Fl(s,o.changes),await cd(s.remoteStore)}catch(o){const l=xp(o,"Failed to persist write");t.reject(l)}}async function ew(n,e){const t=Pe(n);try{const s=await Nk(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const d=t.Au.get(l);d&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Ke(d.hu,14607):o.removedDocuments.size>0&&(Ke(d.hu,42227),d.hu=!1))})),await Fl(t,s,e)}catch(s){await aa(s)}}function E0(n,e,t){const s=Pe(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const y=Pe(d);y.onlineState=p;let v=!1;y.queries.forEach(((w,E)=>{for(const S of E.ba)S.va(p)&&(v=!0)})),v&&Ep(y)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function _b(n,e,t){const s=Pe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let d=new at(ve.comparator);d=d.insert(l,Gt.newNoDocument(l,be.min()));const p=Fe().add(l),y=new ad(be.min(),new Map,new at(Ue),d,p);await ew(s,y),s.Ru=s.Ru.remove(l),s.Au.delete(e),Ip(s)}else await Of(s.localStore,e,!1).then((()=>Uf(s,e,t))).catch(aa)}async function wb(n,e){const t=Pe(n),s=e.batch.batchId;try{const o=await Ck(t.localStore,e);nw(t,s,null),tw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Fl(t,o)}catch(o){await aa(o)}}async function xb(n,e,t){const s=Pe(n);try{const o=await(function(d,p){const y=Pe(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let w;return y.mutationQueue.lookupMutationBatch(v,p).next((E=>(Ke(E!==null,37113),w=E.keys(),y.mutationQueue.removeMutationBatch(v,E)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,w,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w))).next((()=>y.localDocuments.getDocuments(v,w)))}))})(s.localStore,e);nw(s,e,t),tw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Fl(s,o)}catch(o){await aa(o)}}function tw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function nw(n,e,t){const s=Pe(n);let o=s.du[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function Uf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((s=>{n.Vu.containsKey(s)||rw(n,s)}))}function rw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(gp(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Ip(n))}function T0(n,e,t){for(const s of t)s instanceof J_?(n.Vu.addReference(s.key,e),Eb(n,s)):s instanceof X_?(le(Tp,"Document no longer in limbo: "+s.key),n.Vu.removeReference(s.key,e),n.Vu.containsKey(s.key)||rw(n,s.key)):Ee(19791,{wu:s})}function Eb(n,e){const t=e.key,s=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(s)||(le(Tp,"New document in limbo: "+t),n.Eu.add(s),Ip(n))}function Ip(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ve(Xe.fromString(e)),s=n.fu.next();n.Au.set(s,new db(t)),n.Ru=n.Ru.insert(t,s),B_(n.remoteStore,new Ls(xr(ap(t.path)),s,"TargetPurposeLimboResolution",Zc.ce))}}async function Fl(n,e,t){const s=Pe(n),o=[],l=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,y)=>{d.push(s.pu(y,e,t).then((v=>{var w;if((v||t)&&s.isPrimaryClient){const E=v?!v.fromCache:(w=t==null?void 0:t.targetChanges.get(y.targetId))==null?void 0:w.current;s.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(v){o.push(v);const E=pp.Es(y.targetId,v);l.push(E)}})))})),await Promise.all(d),s.Pu.J_(o),await(async function(y,v){const w=Pe(y);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>K.forEach(v,(S=>K.forEach(S.Ts,(O=>w.persistence.referenceDelegate.addReference(E,S.targetId,O))).next((()=>K.forEach(S.Is,(O=>w.persistence.referenceDelegate.removeReference(E,S.targetId,O)))))))))}catch(E){if(!la(E))throw E;le(mp,"Failed to update sequence numbers: "+E)}for(const E of v){const S=E.targetId;if(!E.fromCache){const O=w.vs.get(S),H=O.snapshotVersion,W=O.withLastLimboFreeSnapshotVersion(H);w.vs=w.vs.insert(S,W)}}})(s.localStore,l))}async function Tb(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){le(Tp,"User change. New user:",e.toKey());const s=await M_(t.localStore,e);t.currentUser=e,(function(l,d){l.mu.forEach((p=>{p.forEach((y=>{y.reject(new se(G.CANCELLED,d))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Fl(t,s.Ns)}}function Ib(n,e){const t=Pe(n),s=t.Au.get(e);if(s&&s.hu)return Fe().add(s.key);{let o=Fe();const l=t.Iu.get(e);if(!l)return o;for(const d of l){const p=t.Tu.get(d);o=o.unionWith(p.view.nu)}return o}}function sw(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ew.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ib.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_b.bind(null,e),e.Pu.J_=ab.bind(null,e.eventManager),e.Pu.yu=lb.bind(null,e.eventManager),e}function Sb(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xb.bind(null,e),e}class jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ld(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Ak(this.persistence,new Sk,e.initialUser,this.serializer)}Cu(e){return new L_(fp.Vi,this.serializer)}Du(e){return new Vk}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jc.provider={build:()=>new jc};class kb extends jc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ke(this.persistence.referenceDelegate instanceof Pc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new ck(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new L_((s=>Pc.Vi(s,t)),this.serializer)}}class Ff{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>E0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tb.bind(null,this.syncEngine),await sb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ob})()}createDatastore(e){const t=ld(e.databaseInfo.databaseId),s=Fk(e.databaseInfo);return Wk(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,d,p){return new Gk(s,o,l,d,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>E0(this.syncEngine,t,0)),(function(){return g0.v()?new g0:new Ok})())}createSyncEngine(e,t){return(function(o,l,d,p,y,v,w){const E=new hb(o,l,d,p,y,v);return w&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Pe(o);le(zi,"RemoteStore shutting down."),l.Ea.add(5),await Ul(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Ff.provider={build:()=>new Ff};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="FirestoreClient";class bb{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=o,this.user=Ht.UNAUTHENTICATED,this.clientId=tp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async d=>{le(Qs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(le(Qs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=xp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function cf(n,e){n.asyncQueue.verifyOperationInProgress(),le(Qs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await M_(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function I0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Ab(n);le(Qs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>v0(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>v0(e.remoteStore,o))),n._onlineComponents=e}async function Ab(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(Qs,"Using user provided OfflineComponentProvider");try{await cf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===G.FAILED_PRECONDITION||o.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Fi("Error using user provided cache. Falling back to memory cache: "+t),await cf(n,new jc)}}else le(Qs,"Using default OfflineComponentProvider"),await cf(n,new kb(void 0));return n._offlineComponents}async function ow(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(Qs,"Using user provided OnlineComponentProvider"),await I0(n,n._uninitializedComponentsProvider._online)):(le(Qs,"Using default OnlineComponentProvider"),await I0(n,new Ff))),n._onlineComponents}function Cb(n){return ow(n).then((e=>e.syncEngine))}async function aw(n){const e=await ow(n),t=e.eventManager;return t.onListen=fb.bind(null,e.syncEngine),t.onUnlisten=gb.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=pb.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=yb.bind(null,e.syncEngine),t}function Nb(n,e,t={}){const s=new Qr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,d,p,y,v){const w=new iw({next:S=>{w.Nu(),d.enqueueAndForget((()=>Q_(l,E)));const O=S.docs.has(p);!O&&S.fromCache?v.reject(new se(G.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&S.fromCache&&y&&y.source==="server"?v.reject(new se(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(S)},error:S=>v.reject(S)}),E=new Y_(ap(p.path),w,{includeMetadataChanges:!0,Ka:!0});return K_(l,E)})(await aw(n),n.asyncQueue,e,t,s))),s.promise}function Rb(n,e,t={}){const s=new Qr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,d,p,y,v){const w=new iw({next:S=>{w.Nu(),d.enqueueAndForget((()=>Q_(l,E))),S.fromCache&&y.source==="server"?v.reject(new se(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(S)},error:S=>v.reject(S)}),E=new Y_(p,w,{includeMetadataChanges:!0,Ka:!0});return K_(l,E)})(await aw(n),n.asyncQueue,e,t,s))),s.promise}function Pb(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((async()=>vb(await Cb(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="ComponentProvider",S0=new Map;function jb(n,e,t,s,o){return new eS(n,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,lw(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="firestore.googleapis.com",k0=!0;class b0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uw,this.ssl=k0}else this.host=e.host,this.ssl=e.ssl??k0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=O_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lk)throw new se(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$I("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dd{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new DI;switch(s.type){case"firstParty":return new LI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new se(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=S0.get(t);s&&(le(Db,"Removing Datastore"),S0.delete(t),s.terminate())})(this),Promise.resolve()}}function Vb(n,e,t,s={}){var v;n=Jn(n,dd);const o=sa(e),l=n._getSettings(),d={...l,emulatorOptions:n._getEmulatorOptions()},p=`${e}:${t}`;o&&(Nv(`https://${p}`),Rv("Firestore",!0)),l.host!==uw&&l.host!==p&&Fi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...l,host:p,ssl:o,emulatorOptions:s};if(!$s(y,d)&&(n._setSettings(y),s.mockUserToken)){let w,E;if(typeof s.mockUserToken=="string")w=s.mockUserToken,E=Ht.MOCK_USER;else{w=rT(s.mockUserToken,(v=n._app)==null?void 0:v.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new se(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Ht(S)}n._authCredentials=new jI(new Hv(w,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Zs(this.firestore,e,this._query)}}class pt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Ol(t,pt._jsonSchema))return new pt(e,s||null,new ve(Xe.fromString(t.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:Et("string",pt._jsonSchemaVersion),referencePath:Et("string")};class zs extends Zs{constructor(e,t,s){super(e,t,ap(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new ve(e))}withConverter(e){return new zs(this.firestore,e,this._path)}}function wn(n,e,...t){if(n=It(n),Gv("collection","path",e),n instanceof dd){const s=Xe.fromString(e,...t);return Fy(s),new zs(n,null,s)}{if(!(n instanceof pt||n instanceof zs))throw new se(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Xe.fromString(e,...t));return Fy(s),new zs(n.firestore,null,s)}}function nt(n,e,...t){if(n=It(n),arguments.length===1&&(e=tp.newId()),Gv("doc","path",e),n instanceof dd){const s=Xe.fromString(e,...t);return Uy(s),new pt(n,null,new ve(s))}{if(!(n instanceof pt||n instanceof zs))throw new se(G.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Xe.fromString(e,...t));return Uy(s),new pt(n.firestore,n instanceof zs?n.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="AsyncQueue";class C0{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new F_(this,"async_queue_retry"),this._c=()=>{const s=uf();s&&le(A0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=uf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=uf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Qr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!la(e))throw e;le(A0,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Jr("INTERNAL UNHANDLED ERROR: ",N0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=wp.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ee(47125,{Pc:N0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function N0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ji extends dd{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new C0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new C0(e),this._firestoreClient=void 0,await e}}}function Ob(n,e){const t=typeof n=="object"?n:Zf(),s=typeof n=="string"?n:kc,o=Ki(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=tT("firestore");l&&Vb(o,...l)}return o}function hd(n){if(n._terminated)throw new se(G.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Lb(n),n._firestoreClient}function Lb(n){var s,o,l,d;const e=n._freezeSettings(),t=jb(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,(o=n._app)==null?void 0:o.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((d=e.localCache)!=null&&d._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new bb(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(y){const v=y==null?void 0:y._online.build();return{_offline:y==null?void 0:y._offline.build(v),_online:v}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pn(Ut.fromBase64String(e))}catch(t){throw new se(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pn(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ol(e,Pn._jsonSchema))return Pn.fromBase64String(e.bytes)}}Pn._jsonSchemaVersion="firestore/bytes/1.0",Pn._jsonSchema={type:Et("string",Pn._jsonSchemaVersion),bytes:Et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tr._jsonSchemaVersion}}static fromJSON(e){if(Ol(e,Tr._jsonSchema))return new Tr(e.latitude,e.longitude)}}Tr._jsonSchemaVersion="firestore/geoPoint/1.0",Tr._jsonSchema={type:Et("string",Tr._jsonSchemaVersion),latitude:Et("number"),longitude:Et("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Kn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ol(e,Kn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Kn(e.vectorValues);throw new se(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Kn._jsonSchemaVersion="firestore/vectorValue/1.0",Kn._jsonSchema={type:Et("string",Kn._jsonSchemaVersion),vectorValues:Et("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=/^__.*__$/;class Ub{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Xs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ll(e,this.data,t,this.fieldTransforms)}}class cw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Xs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{dataSource:n})}}class Sp{constructor(e,t,s,o,l,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Sp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Vc(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(dw(this.dataSource)&&Mb.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Fb{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||ld(e)}createContext(e,t,s,o=!1){return new Sp({dataSource:e,methodName:t,targetDoc:s,path:Mt.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function md(n){const e=n._freezeSettings(),t=ld(n._databaseId);return new Fb(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hw(n,e,t,s,o,l={}){const d=n.createContext(l.merge||l.mergeFields?2:0,e,t,o);bp("Data must be an object, but it was:",d,s);const p=mw(s,d);let y,v;if(l.merge)y=new xn(d.fieldMask),v=d.fieldTransforms;else if(l.mergeFields){const w=[];for(const E of l.mergeFields){const S=Bi(e,E,t);if(!d.contains(S))throw new se(G.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);vw(w,S)||w.push(S)}y=new xn(w),v=d.fieldTransforms.filter((E=>y.covers(E.field)))}else y=null,v=d.fieldTransforms;return new Ub(new ln(p),y,v)}class gd extends pd{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gd}}class kp extends pd{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new Rl(e.serializer,v_(e.serializer,this.Vc));return new AS(e.path,t)}isEqual(e){return e instanceof kp&&this.Vc===e.Vc}}function fw(n,e,t,s){const o=n.createContext(1,e,t);bp("Data must be an object, but it was:",o,s);const l=[],d=ln.empty();Js(s,((y,v)=>{const w=yw(e,y,t);v=It(v);const E=o.childContextForFieldPath(w);if(v instanceof gd)l.push(w);else{const S=zl(v,E);S!=null&&(l.push(w),d.set(w,S))}}));const p=new xn(l);return new cw(d,p,o.fieldTransforms)}function pw(n,e,t,s,o,l){const d=n.createContext(1,e,t),p=[Bi(e,s,t)],y=[o];if(l.length%2!=0)throw new se(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)p.push(Bi(e,l[S])),y.push(l[S+1]);const v=[],w=ln.empty();for(let S=p.length-1;S>=0;--S)if(!vw(v,p[S])){const O=p[S];let H=y[S];H=It(H);const W=d.childContextForFieldPath(O);if(H instanceof gd)v.push(O);else{const z=zl(H,W);z!=null&&(v.push(O),w.set(O,z))}}const E=new xn(v);return new cw(w,E,d.fieldTransforms)}function zb(n,e,t,s=!1){return zl(t,n.createContext(s?4:3,e))}function zl(n,e){if(gw(n=It(n)))return bp("Unsupported field value:",e,n),mw(n,e);if(n instanceof pd)return(function(s,o){if(!dw(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const l=[];let d=0;for(const p of s){let y=zl(p,o.childContextForArray(d));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),d++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=It(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return v_(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=rt.fromDate(s);return{timestampValue:Rc(o.serializer,l)}}if(s instanceof rt){const l=new rt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Rc(o.serializer,l)}}if(s instanceof Tr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Pn)return{bytesValue:A_(o.serializer,s._byteString)};if(s instanceof pt){const l=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(l))throw o.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:dp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Kn)return(function(d,p){const y=d instanceof Kn?d.toArray():d;return{mapValue:{fields:{[n_]:{stringValue:r_},[bc]:{arrayValue:{values:y.map((w=>{if(typeof w!="number")throw p.createError("VectorValues must only contain numeric values.");return lp(p.serializer,w)}))}}}}}})(s,o);if(V_(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Xc(s)}`)})(n,e)}function mw(n,e){const t={};return Yv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(n,((s,o)=>{const l=zl(o,e.childContextForField(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function gw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof rt||n instanceof Tr||n instanceof Pn||n instanceof pt||n instanceof pd||n instanceof Kn||V_(n))}function bp(n,e,t){if(!gw(t)||!Kv(t)){const s=Xc(t);throw s==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+s)}}function Bi(n,e,t){if((e=It(e))instanceof fd)return e._internalPath;if(typeof e=="string")return yw(n,e);throw Vc("Field path arguments must be of type string or ",n,!1,void 0,t)}const Bb=new RegExp("[~\\*/\\[\\]]");function yw(n,e,t){if(e.search(Bb)>=0)throw Vc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fd(...e.split("."))._internalPath}catch{throw Vc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Vc(n,e,t,s,o){const l=s&&!s.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(l||d)&&(y+=" (found",l&&(y+=` in field ${s}`),d&&(y+=` in document ${o}`),y+=")"),new se(G.INVALID_ARGUMENT,p+n+y)}function vw(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{convertValue(e,t="none"){switch(Gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Js(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[bc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((d=>ft(d.doubleValue)));return new Kn(t)}convertGeoPoint(e){return new Tr(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=td(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Sl(e));default:return null}}convertTimestamp(e){const t=Ws(e);return new rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Xe.fromString(e);Ke(j_(s),9688,{name:e});const o=new kl(s.get(1),s.get(3)),l=new ve(s.popFirst(5));return o.isEqual(t)||Jr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w extends $b{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,t)}}function Rs(n){return new kp("increment",n)}const R0="@firebase/firestore",P0="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Bi("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class qb extends ww{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new se(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ap{}class Cp extends Ap{}function Ci(n,e,...t){let s=[];e instanceof Ap&&s.push(e),s=s.concat(t),(function(l){const d=l.filter((y=>y instanceof Np)).length,p=l.filter((y=>y instanceof yd)).length;if(d>1||d>0&&p>0)throw new se(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)n=o._apply(n);return n}class yd extends Cp{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new yd(e,t,s)}_apply(e){const t=this._parse(e);return xw(e._query,t),new Zs(e.firestore,e.converter,Rf(e._query,t))}_parse(e){const t=md(e.firestore);return(function(l,d,p,y,v,w,E){let S;if(v.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new se(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){j0(E,w);const H=[];for(const W of E)H.push(D0(y,l,W));S={arrayValue:{values:H}}}else S=D0(y,l,E)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||j0(E,w),S=zb(p,d,E,w==="in"||w==="not-in");return xt.create(v,w,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function al(n,e,t){const s=e,o=Bi("where",n);return yd._create(o,s,t)}class Np extends Ap{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Np(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Xn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let d=o;const p=l.getFlattenedFilters();for(const y of p)xw(d,y),d=Rf(d,y)})(e._query,t),new Zs(e.firestore,e.converter,Rf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Rp extends Cp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Rp(e,t)}_apply(e){const t=(function(o,l,d){if(o.startAt!==null)throw new se(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new se(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Al(l,d)})(e._query,this._field,this._direction);return new Zs(e.firestore,e.converter,vS(e._query,t))}}function Hb(n,e="asc"){const t=e,s=Bi("orderBy",n);return Rp._create(s,t)}class Pp extends Cp{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Pp(e,t,s)}_apply(e){return new Zs(e.firestore,e.converter,Cc(e._query,this._limit,this._limitType))}}function Gb(n){return Pp._create("limit",n,"F")}function D0(n,e,t){if(typeof(t=It(t))=="string"){if(t==="")throw new se(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d_(e)&&t.indexOf("/")!==-1)throw new se(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Xe.fromString(t));if(!ve.isDocumentKey(s))throw new se(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ky(n,new ve(s))}if(t instanceof pt)return Ky(n,t._key);throw new se(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xc(t)}.`)}function j0(n,e){if(!Array.isArray(n)||n.length===0)throw new se(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xw(n,e){const t=(function(o,l){for(const d of o)for(const p of d.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new se(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Ew(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class hl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mi extends ww{constructor(e,t,s,o,l,d){super(e,t,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Bi("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Mi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Mi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mi._jsonSchema={type:Et("string",Mi._jsonSchemaVersion),bundleSource:Et("string","DocumentSnapshot"),bundleName:Et("string"),bundle:Et("string")};class vc extends Mi{data(e={}){return super.data(e)}}class Go{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new hl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new vc(this._firestore,this._userDataWriter,s.key,s,new hl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const y=new vc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new hl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const y=new vc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new hl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,w=-1;return p.type!==0&&(v=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),w=d.indexOf(p.doc.key)),{type:Kb(p.type),doc:y,oldIndex:v,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Go._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Kb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Go._jsonSchemaVersion="firestore/querySnapshot/1.0",Go._jsonSchema={type:Et("string",Go._jsonSchemaVersion),bundleSource:Et("string","QuerySnapshot"),bundleName:Et("string"),bundle:Et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=md(e)}set(e,t,s){this._verifyNotCommitted();const o=df(e,this._firestore),l=Ew(o.converter,t,s),d=hw(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,s);return this._mutations.push(d.toMutation(o._key,un.none())),this}update(e,t,s,...o){this._verifyNotCommitted();const l=df(e,this._firestore);let d;return d=typeof(t=It(t))=="string"||t instanceof fd?pw(this._dataReader,"WriteBatch.update",l._key,t,s,o):fw(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(d.toMutation(l._key,un.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=df(e,this._firestore);return this._mutations=this._mutations.concat(new od(t._key,un.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new se(G.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function df(n,e){if((n=It(n)).firestore!==e)throw new se(G.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(n){n=Jn(n,pt);const e=Jn(n.firestore,Ji),t=hd(e);return Nb(t,n._key).then((s=>Jb(e,n,s)))}function vr(n){n=Jn(n,Zs);const e=Jn(n.firestore,Ji),t=hd(e),s=new _w(e);return Wb(n._query),Rb(t,n._query).then((o=>new Go(e,s,n,o)))}function Ni(n,e,t){n=Jn(n,pt);const s=Jn(n.firestore,Ji),o=Ew(n.converter,e,t),l=md(s);return vd(s,[hw(l,"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,un.none())])}function Ri(n,e,t,...s){n=Jn(n,pt);const o=Jn(n.firestore,Ji),l=md(o);let d;return d=typeof(e=It(e))=="string"||e instanceof fd?pw(l,"updateDoc",n._key,e,t,s):fw(l,"updateDoc",n._key,e),vd(o,[d.toMutation(n._key,un.exists(!0))])}function Yb(n){return vd(Jn(n.firestore,Ji),[new od(n._key,un.none())])}function vd(n,e){const t=hd(n);return Pb(t,e)}function Jb(n,e,t){const s=t.docs.get(e._key),o=new _w(n);return new Mi(n,o,e._key,s,new hl(t.hasPendingWrites,t.fromCache),e.converter)}function ll(n){return n=Jn(n,Ji),hd(n),new Qb(n,(e=>vd(n,e)))}(function(e,t=!0){PI(ia),Sr(new Yn("firestore",((s,{instanceIdentifier:o,options:l})=>{const d=s.getProvider("app").getImmediate(),p=new Ji(new VI(s.getProvider("auth-internal")),new MI(d,s.getProvider("app-check-internal")),tS(d,o),d);return l={useFetchStreams:t,...l},p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),Dn(R0,P0,e),Dn(R0,P0,"esm2020")})();const Tw="@firebase/installations",Dp="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=1e4,Sw=`w:${Dp}`,kw="FIS_v2",Xb="https://firebaseinstallations.googleapis.com/v1",Zb=3600*1e3,e2="installations",t2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},$i=new Gi(e2,t2,n2);function bw(n){return n instanceof Zn&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw({projectId:n}){return`${Xb}/projects/${n}/installations`}function Cw(n){return{token:n.token,requestStatus:2,expiresIn:s2(n.expiresIn),creationTime:Date.now()}}async function Nw(n,e){const s=(await e.json()).error;return $i.create("request-failed",{requestName:n,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function Rw({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function r2(n,{refreshToken:e}){const t=Rw(n);return t.append("Authorization",i2(e)),t}async function Pw(n){const e=await n();return e.status>=500&&e.status<600?n():e}function s2(n){return Number(n.replace("s","000"))}function i2(n){return`${kw} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const s=Aw(n),o=Rw(n),l=e.getImmediate({optional:!0});if(l){const v=await l.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}const d={fid:t,authVersion:kw,appId:n.appId,sdkVersion:Sw},p={method:"POST",headers:o,body:JSON.stringify(d)},y=await Pw(()=>fetch(s,p));if(y.ok){const v=await y.json();return{fid:v.fid||t,registrationStatus:2,refreshToken:v.refreshToken,authToken:Cw(v.authToken)}}else throw await Nw("Create Installation",y)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=/^[cdef][\w-]{21}$/,zf="";function u2(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=c2(n);return l2.test(t)?t:zf}catch{return zf}}function c2(n){return a2(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=new Map;function Vw(n,e){const t=_d(n);Ow(t,e),d2(t,e)}function Ow(n,e){const t=jw.get(n);if(t)for(const s of t)s(e)}function d2(n,e){const t=h2();t&&t.postMessage({key:n,fid:e}),f2()}let ji=null;function h2(){return!ji&&"BroadcastChannel"in self&&(ji=new BroadcastChannel("[Firebase] FID Change"),ji.onmessage=n=>{Ow(n.data.key,n.data.fid)}),ji}function f2(){jw.size===0&&ji&&(ji.close(),ji=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="firebase-installations-database",m2=1,qi="firebase-installations-store";let hf=null;function jp(){return hf||(hf=Vv(p2,m2,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(qi)}}})),hf}async function Oc(n,e){const t=_d(n),o=(await jp()).transaction(qi,"readwrite"),l=o.objectStore(qi),d=await l.get(t);return await l.put(e,t),await o.done,(!d||d.fid!==e.fid)&&Vw(n,e.fid),e}async function Lw(n){const e=_d(n),s=(await jp()).transaction(qi,"readwrite");await s.objectStore(qi).delete(e),await s.done}async function wd(n,e){const t=_d(n),o=(await jp()).transaction(qi,"readwrite"),l=o.objectStore(qi),d=await l.get(t),p=e(d);return p===void 0?await l.delete(t):await l.put(p,t),await o.done,p&&(!d||d.fid!==p.fid)&&Vw(n,p.fid),p}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vp(n){let e;const t=await wd(n.appConfig,s=>{const o=g2(s),l=y2(n,o);return e=l.registrationPromise,l.installationEntry});return t.fid===zf?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function g2(n){const e=n||{fid:u2(),registrationStatus:0};return Mw(e)}function y2(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject($i.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=v2(n,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:_2(n)}:{installationEntry:e}}async function v2(n,e){try{const t=await o2(n,e);return Oc(n.appConfig,t)}catch(t){throw bw(t)&&t.customData.serverCode===409?await Lw(n.appConfig):await Oc(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function _2(n){let e=await V0(n.appConfig);for(;e.registrationStatus===1;)await Dw(100),e=await V0(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await Vp(n);return s||t}return e}function V0(n){return wd(n,e=>{if(!e)throw $i.create("installation-not-found");return Mw(e)})}function Mw(n){return w2(n)?{fid:n.fid,registrationStatus:0}:n}function w2(n){return n.registrationStatus===1&&n.registrationTime+Iw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2({appConfig:n,heartbeatServiceProvider:e},t){const s=E2(n,t),o=r2(n,t),l=e.getImmediate({optional:!0});if(l){const v=await l.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}const d={installation:{sdkVersion:Sw,appId:n.appId}},p={method:"POST",headers:o,body:JSON.stringify(d)},y=await Pw(()=>fetch(s,p));if(y.ok){const v=await y.json();return Cw(v)}else throw await Nw("Generate Auth Token",y)}function E2(n,{fid:e}){return`${Aw(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Op(n,e=!1){let t;const s=await wd(n.appConfig,l=>{if(!Uw(l))throw $i.create("not-registered");const d=l.authToken;if(!e&&S2(d))return l;if(d.requestStatus===1)return t=T2(n,e),l;{if(!navigator.onLine)throw $i.create("app-offline");const p=b2(l);return t=I2(n,p),p}});return t?await t:s.authToken}async function T2(n,e){let t=await O0(n.appConfig);for(;t.authToken.requestStatus===1;)await Dw(100),t=await O0(n.appConfig);const s=t.authToken;return s.requestStatus===0?Op(n,e):s}function O0(n){return wd(n,e=>{if(!Uw(e))throw $i.create("not-registered");const t=e.authToken;return A2(t)?{...e,authToken:{requestStatus:0}}:e})}async function I2(n,e){try{const t=await x2(n,e),s={...e,authToken:t};return await Oc(n.appConfig,s),t}catch(t){if(bw(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Lw(n.appConfig);else{const s={...e,authToken:{requestStatus:0}};await Oc(n.appConfig,s)}throw t}}function Uw(n){return n!==void 0&&n.registrationStatus===2}function S2(n){return n.requestStatus===2&&!k2(n)}function k2(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Zb}function b2(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function A2(n){return n.requestStatus===1&&n.requestTime+Iw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(n){const e=n,{installationEntry:t,registrationPromise:s}=await Vp(e);return s?s.catch(console.error):Op(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N2(n,e=!1){const t=n;return await R2(t),(await Op(t,e)).token}async function R2(n){const{registrationPromise:e}=await Vp(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(n){if(!n||!n.options)throw ff("App Configuration");if(!n.name)throw ff("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw ff(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function ff(n){return $i.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="installations",D2="installations-internal",j2=n=>{const e=n.getProvider("app").getImmediate(),t=P2(e),s=Ki(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},V2=n=>{const e=n.getProvider("app").getImmediate(),t=Ki(e,Fw).getImmediate();return{getId:()=>C2(t),getToken:o=>N2(t,o)}};function O2(){Sr(new Yn(Fw,j2,"PUBLIC")),Sr(new Yn(D2,V2,"PRIVATE"))}O2();Dn(Tw,Dp);Dn(Tw,Dp,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc="analytics",L2="firebase_id",M2="origin",U2=60*1e3,F2="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Lp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt=new Jc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},En=new Gi("analytics","Analytics",z2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(n){if(!n.startsWith(Lp)){const e=En.create("invalid-gtag-resource",{gtagURL:n});return Xt.warn(e.message),""}return n}function zw(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function $2(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function q2(n,e){const t=$2("firebase-js-sdk-policy",{createScriptURL:B2}),s=document.createElement("script"),o=`${Lp}?l=${n}&id=${e}`;s.src=t?t==null?void 0:t.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function W2(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function H2(n,e,t,s,o,l){const d=s[o];try{if(d)await e[d];else{const y=(await zw(t)).find(v=>v.measurementId===o);y&&await e[y.appId]}}catch(p){Xt.error(p)}n("config",o,l)}async function G2(n,e,t,s,o){try{let l=[];if(o&&o.send_to){let d=o.send_to;Array.isArray(d)||(d=[d]);const p=await zw(t);for(const y of d){const v=p.find(E=>E.measurementId===y),w=v&&e[v.appId];if(w)l.push(w);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),n("event",s,o||{})}catch(l){Xt.error(l)}}function K2(n,e,t,s){async function o(l,...d){try{if(l==="event"){const[p,y]=d;await G2(n,e,t,p,y)}else if(l==="config"){const[p,y]=d;await H2(n,e,t,s,p,y)}else if(l==="consent"){const[p,y]=d;n("consent",p,y)}else if(l==="get"){const[p,y,v]=d;n("get",p,y,v)}else if(l==="set"){const[p]=d;n("set",p)}else n(l,...d)}catch(p){Xt.error(p)}}return o}function Q2(n,e,t,s,o){let l=function(...d){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(l=window[o]),window[o]=K2(l,n,e,t),{gtagCore:l,wrappedGtag:window[o]}}function Y2(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Lp)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=30,X2=1e3;class Z2{constructor(e={},t=X2){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Bw=new Z2;function eA(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function tA(n){var d;const{appId:e,apiKey:t}=n,s={method:"GET",headers:eA(t)},o=F2.replace("{app-id}",e),l=await fetch(o,s);if(l.status!==200&&l.status!==304){let p="";try{const y=await l.json();(d=y.error)!=null&&d.message&&(p=y.error.message)}catch{}throw En.create("config-fetch-failed",{httpStatus:l.status,responseMessage:p})}return l.json()}async function nA(n,e=Bw,t){const{appId:s,apiKey:o,measurementId:l}=n.options;if(!s)throw En.create("no-app-id");if(!o){if(l)return{measurementId:l,appId:s};throw En.create("no-api-key")}const d=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},p=new iA;return setTimeout(async()=>{p.abort()},U2),$w({appId:s,apiKey:o,measurementId:l},d,p,e)}async function $w(n,{throttleEndTimeMillis:e,backoffCount:t},s,o=Bw){var p;const{appId:l,measurementId:d}=n;try{await rA(s,e)}catch(y){if(d)return Xt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${y==null?void 0:y.message}]`),{appId:l,measurementId:d};throw y}try{const y=await tA(n);return o.deleteThrottleMetadata(l),y}catch(y){const v=y;if(!sA(v)){if(o.deleteThrottleMetadata(l),d)return Xt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${v==null?void 0:v.message}]`),{appId:l,measurementId:d};throw y}const w=Number((p=v==null?void 0:v.customData)==null?void 0:p.httpStatus)===503?by(t,o.intervalMillis,J2):by(t,o.intervalMillis),E={throttleEndTimeMillis:Date.now()+w,backoffCount:t+1};return o.setThrottleMetadata(l,E),Xt.debug(`Calling attemptFetch again in ${w} millis`),$w(n,E,s,o)}}function rA(n,e){return new Promise((t,s)=>{const o=Math.max(e-Date.now(),0),l=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(l),s(En.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function sA(n){if(!(n instanceof Zn)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class iA{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function oA(n,e,t,s,o){if(o&&o.global){n("event",t,s);return}else{const l=await e,d={...s,send_to:l};n("event",t,d)}}async function aA(n,e,t,s){if(s&&s.global){const o={};for(const l of Object.keys(t))o[`user_properties.${l}`]=t[l];return n("set",o),Promise.resolve()}else{const o=await e;n("config",o,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lA(){if(Yf())try{await Jf()}catch(n){return Xt.warn(En.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Xt.warn(En.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function uA(n,e,t,s,o,l,d){const p=nA(n);p.then(S=>{t[S.measurementId]=S.appId,n.options.measurementId&&S.measurementId!==n.options.measurementId&&Xt.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>Xt.error(S)),e.push(p);const y=lA().then(S=>{if(S)return s.getId()}),[v,w]=await Promise.all([p,y]);Y2(l)||q2(l,v.measurementId),o("js",new Date);const E=(d==null?void 0:d.config)??{};return E[M2]="firebase",E.update=!0,w!=null&&(E[L2]=w),o("config",v.measurementId,E),v.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.app=e}_delete(){return delete Ko[this.app.options.appId],Promise.resolve()}}let Ko={},L0=[];const M0={};let pf="dataLayer",dA="gtag",U0,Mp,F0=!1;function hA(){const n=[];if(Qf()&&n.push("This is a browser extension environment."),Pv()||n.push("Cookies are not available."),n.length>0){const e=n.map((s,o)=>`(${o+1}) ${s}`).join(" "),t=En.create("invalid-analytics-context",{errorInfo:e});Xt.warn(t.message)}}function fA(n,e,t){hA();const s=n.options.appId;if(!s)throw En.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Xt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw En.create("no-api-key");if(Ko[s]!=null)throw En.create("already-exists",{id:s});if(!F0){W2(pf);const{wrappedGtag:l,gtagCore:d}=Q2(Ko,L0,M0,pf,dA);Mp=l,U0=d,F0=!0}return Ko[s]=uA(n,L0,M0,e,U0,pf,t),new cA(n)}function pA(n=Zf()){n=It(n);const e=Ki(n,Lc);return e.isInitialized()?e.getImmediate():mA(n)}function mA(n,e={}){const t=Ki(n,Lc);if(t.isInitialized()){const o=t.getImmediate();if($s(e,t.getOptions()))return o;throw En.create("already-initialized")}return t.initialize({options:e})}async function gA(){if(Qf()||!Pv()||!Yf())return!1;try{return await Jf()}catch{return!1}}function yA(n,e,t){n=It(n),aA(Mp,Ko[n.app.options.appId],e,t).catch(s=>Xt.error(s))}function vA(n,e,t,s){n=It(n),oA(Mp,Ko[n.app.options.appId],e,t,s).catch(o=>Xt.error(o))}const z0="@firebase/analytics",B0="0.10.19";function _A(){Sr(new Yn(Lc,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return fA(s,o,t)},"PUBLIC")),Sr(new Yn("analytics-internal",n,"PRIVATE")),Dn(z0,B0),Dn(z0,B0,"esm2020");function n(e){try{const t=e.getProvider(Lc).getImmediate();return{logEvent:(s,o,l)=>vA(t,s,o,l),setUserProperties:(s,o)=>yA(t,s,o)}}catch(t){throw En.create("interop-component-reg-failed",{reason:t})}}}_A();function qw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wA=qw,Ww=new Gi("auth","Firebase",qw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=new Jc("@firebase/auth");function xA(n,...e){Mc.logLevel<=Me.WARN&&Mc.warn(`Auth (${ia}): ${n}`,...e)}function _c(n,...e){Mc.logLevel<=Me.ERROR&&Mc.error(`Auth (${ia}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(n,...e){throw Fp(n,...e)}function Qn(n,...e){return Fp(n,...e)}function Up(n,e,t){const s={...wA(),[e]:t};return new Gi("auth","Firebase",s).create(e,{appName:n.name})}function Bs(n){return Up(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hw(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&br(n,"argument-error"),Up(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fp(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return Ww.create(n,...e)}function Se(n,e,...t){if(!n)throw Fp(e,...t)}function Gr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _c(e),new Error(e)}function Zr(n,e){n||Gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function EA(){return $0()==="http:"||$0()==="https:"}function $0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EA()||Qf()||"connection"in navigator)?navigator.onLine:!0}function IA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zr(t>e,"Short delay should be less than long delay!"),this.isMobile=oT()||uT()}get(){return TA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(n,e){Zr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bA=new Bl(3e4,6e4);function Bp(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function da(n,e,t,s,o={}){return Kw(n,o,async()=>{let l={},d={};s&&(e==="GET"?d=s:l={body:JSON.stringify(s)});const p=Vl({key:n.config.apiKey,...d}).slice(1),y=await n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);const v={method:e,headers:y,...l};return lT()||(v.referrerPolicy="no-referrer"),n.emulatorConfig&&sa(n.emulatorConfig.host)&&(v.credentials="include"),Gw.fetch()(await Qw(n,n.config.apiHost,t,p),v)})}async function Kw(n,e,t){n._canInitEmulator=!1;const s={...SA,...e};try{const o=new CA(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw hc(n,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const p=l.ok?d.errorMessage:d.error.message,[y,v]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw hc(n,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw hc(n,"email-already-in-use",d);if(y==="USER_DISABLED")throw hc(n,"user-disabled",d);const w=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Up(n,w,v);br(n,w)}}catch(o){if(o instanceof Zn)throw o;br(n,"network-request-failed",{message:String(o)})}}async function AA(n,e,t,s,o={}){const l=await da(n,e,t,s,o);return"mfaPendingCredential"in l&&br(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function Qw(n,e,t,s){const o=`${e}${t}?${s}`,l=n,d=l.config.emulator?zp(n.config,o):`${n.config.apiScheme}://${o}`;return kA.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}class CA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Qn(this.auth,"network-request-failed")),bA.get())})}}function hc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Qn(n,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NA(n,e){return da(n,"POST","/v1/accounts:delete",e)}async function Uc(n,e){return da(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RA(n,e=!1){const t=It(n),s=await t.getIdToken(e),o=$p(s);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:_l(mf(o.auth_time)),issuedAtTime:_l(mf(o.iat)),expirationTime:_l(mf(o.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function mf(n){return Number(n)*1e3}function $p(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return _c("JWT malformed, contained fewer than 3 sections"),null;try{const o=kv(t);return o?JSON.parse(o):(_c("Failed to decode base64 JWT payload"),null)}catch(o){return _c("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function q0(n){const e=$p(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Zn&&PA(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function PA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_l(this.lastLoginAt),this.creationTime=_l(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(n){var E;const e=n.auth,t=await n.getIdToken(),s=await Pl(n,Uc(e,{idToken:t}));Se(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?Yw(o.providerUserInfo):[],d=VA(n.providerData,l),p=n.isAnonymous,y=!(n.email&&o.passwordHash)&&!(d!=null&&d.length),v=p?y:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new $f(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(n,w)}async function jA(n){const e=It(n);await Fc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VA(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Yw(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA(n,e){const t=await Kw(n,{},async()=>{const s=Vl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,d=await Qw(n,o,"/v1/token",`key=${l}`),p=await n._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:s};return n.emulatorConfig&&sa(n.emulatorConfig.host)&&(y.credentials="include"),Gw.fetch()(d,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function LA(n,e){return da(n,"POST","/v2/accounts:revokeToken",Bp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=q0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await OA(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,d=new Qo;return s&&(Se(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Se(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(Se(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qo,this.toJSON())}_performRefresh(){return Gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Gn{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new DA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new $f(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Pl(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return RA(this,e)}reload(){return jA(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Gn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Fc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rn(this.auth.app))return Promise.reject(Bs(this.auth));const e=await this.getIdToken();return await Pl(this,NA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,d=t.photoURL??void 0,p=t.tenantId??void 0,y=t._redirectEventId??void 0,v=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:O,providerData:H,stsTokenManager:W}=t;Se(E&&W,e,"internal-error");const z=Qo.fromJSON(this.name,W);Se(typeof E=="string",e,"internal-error"),Ps(s,e.name),Ps(o,e.name),Se(typeof S=="boolean",e,"internal-error"),Se(typeof O=="boolean",e,"internal-error"),Ps(l,e.name),Ps(d,e.name),Ps(p,e.name),Ps(y,e.name),Ps(v,e.name),Ps(w,e.name);const re=new Gn({uid:E,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:O,photoURL:d,phoneNumber:l,tenantId:p,stsTokenManager:z,createdAt:v,lastLoginAt:w});return H&&Array.isArray(H)&&(re.providerData=H.map(te=>({...te}))),y&&(re._redirectEventId=y),re}static async _fromIdTokenResponse(e,t,s=!1){const o=new Qo;o.updateFromServerResponse(t);const l=new Gn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Fc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Yw(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new Qo;p.updateFromIdToken(s);const y=new Gn({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new $f(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(y,v),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=new Map;function Kr(n){Zr(n instanceof Function,"Expected a class definition");let e=W0.get(n);return e?(Zr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,W0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Jw.type="NONE";const H0=Jw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(n,e,t){return`firebase:${n}:${e}:${t}`}class Yo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=wc(this.userKey,o.apiKey,l),this.fullPersistenceKey=wc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Uc(this.auth,{idToken:e}).catch(()=>{});return t?Gn._fromGetAccountInfoResponse(this.auth,t,e):null}return Gn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Yo(Kr(H0),e,s);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||Kr(H0);const d=wc(s,e.config.apiKey,e.name);let p=null;for(const v of t)try{const w=await v._get(d);if(w){let E;if(typeof w=="string"){const S=await Uc(e,{idToken:w}).catch(()=>{});if(!S)break;E=await Gn._fromGetAccountInfoResponse(e,S,w)}else E=Gn._fromJSON(e,w);v!==l&&(p=E),l=v;break}}catch{}const y=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!y.length?new Yo(l,e,s):(l=y[0],p&&await l._set(d,p.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(d)}catch{}})),new Yo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Xw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rx(e))return"Blackberry";if(sx(e))return"Webos";if(Zw(e))return"Safari";if((e.includes("chrome/")||ex(e))&&!e.includes("edge/"))return"Chrome";if(nx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Xw(n=Kt()){return/firefox\//i.test(n)}function Zw(n=Kt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ex(n=Kt()){return/crios\//i.test(n)}function tx(n=Kt()){return/iemobile/i.test(n)}function nx(n=Kt()){return/android/i.test(n)}function rx(n=Kt()){return/blackberry/i.test(n)}function sx(n=Kt()){return/webos/i.test(n)}function qp(n=Kt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function MA(n=Kt()){var e;return qp(n)&&!!((e=window.navigator)!=null&&e.standalone)}function UA(){return cT()&&document.documentMode===10}function ix(n=Kt()){return qp(n)||nx(n)||sx(n)||rx(n)||/windows phone/i.test(n)||tx(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(n,e=[]){let t;switch(n){case"Browser":t=G0(Kt());break;case"Worker":t=`${G0(Kt())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ia}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((d,p)=>{try{const y=e(l);d(y)}catch(y){p(y)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zA(n,e={}){return da(n,"GET","/v2/passwordPolicy",Bp(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=6;class $A{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??BA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K0(this),this.idTokenSubscription=new K0(this),this.beforeStateQueue=new FA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ww,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Kr(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await Yo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Uc(this,{idToken:e}),s=await Gn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Rn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(p,p))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(l=this.redirectUser)==null?void 0:l._redirectEventId,p=s==null?void 0:s._redirectEventId,y=await this.tryRedirectSignIn(e);(!d||d===p)&&(y!=null&&y.user)&&(s=y.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(d){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Fc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rn(this.app))return Promise.reject(Bs(this));const t=e?It(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rn(this.app)?Promise.reject(Bs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rn(this.app)?Promise.reject(Bs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zA(this),t=new $A(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gi("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await LA(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Kr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Yo.create(this,[Kr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(p,this,"internal-error"),p.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,s,o);return()=>{d=!0,y()}}else{const y=e.addObserver(t);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ox(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&xA(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Xi(n){return It(n)}class K0{constructor(e){this.auth=e,this.observer=null,this.addObserver=gT(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WA(n){Wp=n}function HA(n){return Wp.loadJS(n)}function GA(){return Wp.gapiScript}function KA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(n,e){const t=Ki(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if($s(l,e??{}))return o;br(o,"already-initialized")}return t.initialize({options:e})}function YA(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Kr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function JA(n,e,t){const s=Xi(n);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=ax(e),{host:d,port:p}=XA(e),y=p===null?"":`:${p}`,v={url:`${l}//${d}${y}/`},w=Object.freeze({host:d,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se($s(v,s.config.emulator)&&$s(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,sa(d)?(Nv(`${l}//${d}${y}`),Rv("Auth",!0)):ZA()}function ax(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function XA(n){const e=ax(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Q0(s.substr(l.length+1))}}else{const[l,d]=s.split(":");return{host:l,port:Q0(d)}}}function Q0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ZA(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Gr("not implemented")}_getIdTokenResponse(e){return Gr("not implemented")}_linkToIdToken(e,t){return Gr("not implemented")}_getReauthenticationResolver(e){return Gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(n,e){return AA(n,"POST","/v1/accounts:signInWithIdp",Bp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="http://localhost";class Wi extends lx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Wi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):br("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const d=new Wi(s,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Jo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Jo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jo(e,t)}buildRequest(){const e={requestUri:eC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l extends xd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends $l{constructor(){super("facebook.com")}static credential(e){return Wi._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ds.credential(e.oauthAccessToken)}catch{return null}}}Ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ds.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends $l{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Wi._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return wr.credential(t,s)}catch{return null}}}wr.GOOGLE_SIGN_IN_METHOD="google.com";wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends $l{constructor(){super("github.com")}static credential(e){return Wi._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.GITHUB_SIGN_IN_METHOD="github.com";js.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends $l{constructor(){super("twitter.com")}static credential(e,t){return Wi._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Vs.credential(t,s)}catch{return null}}}Vs.TWITTER_SIGN_IN_METHOD="twitter.com";Vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Gn._fromIdTokenResponse(e,s,o),d=Y0(s);return new ra({user:l,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Y0(s);return new ra({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Y0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Zn{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,zc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new zc(e,t,s,o)}}function ux(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?zc._fromErrorAndOperation(n,l,e,s):l})}async function tC(n,e,t=!1){const s=await Pl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ra._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(n,e,t=!1){const{auth:s}=n;if(Rn(s.app))return Promise.reject(Bs(s));const o="reauthenticate";try{const l=await Pl(n,ux(s,o,e,n),t);Se(l.idToken,s,"internal-error");const d=$p(l.idToken);Se(d,s,"internal-error");const{sub:p}=d;return Se(n.uid===p,s,"user-mismatch"),ra._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&br(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(n,e,t=!1){if(Rn(n.app))return Promise.reject(Bs(n));const s="signIn",o=await ux(n,s,e),l=await ra._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}async function rC(n,e){return cx(Xi(n),e)}function sC(n,e,t,s){return It(n).onIdTokenChanged(e,t,s)}function iC(n,e,t){return It(n).beforeAuthStateChanged(e,t)}const Bc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bc,"1"),this.storage.removeItem(Bc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=1e3,aC=10;class hx extends dx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ix(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,p,y)=>{this.notifyListeners(d,y)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},l=this.storage.getItem(s);UA()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,aC):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},oC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}hx.type="LOCAL";const lC=hx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx extends dx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fx.type="SESSION";const px=fx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Ed(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const p=Array.from(d).map(async v=>v(t.origin,l)),y=await uC(p);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ed.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((p,y)=>{const v=Hp("",20);o.port1.start();const w=setTimeout(()=>{y(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===v)switch(S.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(S.data.response);break;default:clearTimeout(w),clearTimeout(l),y(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(){return window}function dC(n){Ir().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(){return typeof Ir().WorkerGlobalScope<"u"&&typeof Ir().importScripts=="function"}async function hC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fC(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function pC(){return mx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="firebaseLocalStorageDb",mC=1,$c="firebaseLocalStorage",yx="fbase_key";class ql{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Td(n,e){return n.transaction([$c],e?"readwrite":"readonly").objectStore($c)}function gC(){const n=indexedDB.deleteDatabase(gx);return new ql(n).toPromise()}function qf(){const n=indexedDB.open(gx,mC);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore($c,{keyPath:yx})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains($c)?e(s):(s.close(),await gC(),e(await qf()))})})}async function J0(n,e,t){const s=Td(n,!0).put({[yx]:e,value:t});return new ql(s).toPromise()}async function yC(n,e){const t=Td(n,!1).get(e),s=await new ql(t).toPromise();return s===void 0?null:s.value}function X0(n,e){const t=Td(n,!0).delete(e);return new ql(t).toPromise()}const vC=800,_C=3;class vx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>_C)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ed._getInstance(pC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await hC(),!this.activeServiceWorker)return;this.sender=new cC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qf();return await J0(e,Bc,"1"),await X0(e,Bc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>J0(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>yC(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>X0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Td(o,!1).getAll();return new ql(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vx.type="LOCAL";const wC=vx;new Bl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(n,e){return e?Kr(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp extends lx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xC(n){return cx(n.auth,new Kp(n),n.bypassAuthState)}function EC(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),nC(t,new Kp(n),n.bypassAuthState)}async function TC(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),tC(t,new Kp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:d,type:p}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xC;case"linkViaPopup":case"linkViaRedirect":return TC;case"reauthViaPopup":case"reauthViaRedirect":return EC;default:br(this.auth,"internal-error")}}resolve(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=new Bl(2e3,1e4);async function SC(n,e,t){if(Rn(n.app))return Promise.reject(Qn(n,"operation-not-supported-in-this-environment"));const s=Xi(n);Hw(n,e,xd);const o=Gp(s,t);return new Vi(s,"signInViaPopup",e,o).executeNotNull()}class Vi extends _x{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Vi.currentPopupAction&&Vi.currentPopupAction.cancel(),Vi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Zr(this.filter.length===1,"Popup operations only handle one event");const e=Hp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IC.get())};e()}}Vi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="pendingRedirect",xc=new Map;class bC extends _x{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=xc.get(this.auth._key());if(!e){try{const s=await AC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}xc.set(this.auth._key(),e)}return this.bypassAuthState||xc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AC(n,e){const t=xx(e),s=wx(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}async function CC(n,e){return wx(n)._set(xx(e),"true")}function NC(n,e){xc.set(n._key(),e)}function wx(n){return Kr(n._redirectPersistence)}function xx(n){return wc(kC,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(n,e,t){return PC(n,e,t)}async function PC(n,e,t){if(Rn(n.app))return Promise.reject(Bs(n));const s=Xi(n);Hw(n,e,xd),await s._initializationPromise;const o=Gp(s,t);return await CC(o,s),o._openRedirect(s,e,"signInViaRedirect")}async function Ex(n,e){return await Xi(n)._initializationPromise,Tx(n,e,!1)}async function Tx(n,e,t=!1){if(Rn(n.app))return Promise.reject(Bs(n));const s=Xi(n),o=Gp(s,e),d=await new bC(s,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=600*1e3;class jC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Ix(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Qn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z0(e))}saveEventToCache(e){this.cachedEventUids.add(Z0(e)),this.lastProcessedEventTime=Date.now()}}function Z0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ix({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function VC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ix(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OC(n,e={}){return da(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MC=/^https?/;async function UC(n){if(n.config.emulator)return;const{authorizedDomains:e}=await OC(n);for(const t of e)try{if(FC(t))return}catch{}br(n,"unauthorized-domain")}function FC(n){const e=Bf(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return d.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!MC.test(t))return!1;if(LC.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=new Bl(3e4,6e4);function ev(){const n=Ir().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function BC(n){return new Promise((e,t)=>{var o,l,d;function s(){ev(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ev(),t(Qn(n,"network-request-failed"))},timeout:zC.get()})}if((l=(o=Ir().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((d=Ir().gapi)!=null&&d.load)s();else{const p=KA("iframefcb");return Ir()[p]=()=>{gapi.load?s():t(Qn(n,"network-request-failed"))},HA(`${GA()}?onload=${p}`).catch(y=>t(y))}}).catch(e=>{throw Ec=null,e})}let Ec=null;function $C(n){return Ec=Ec||BC(n),Ec}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=new Bl(5e3,15e3),WC="__/auth/iframe",HC="emulator/auth/iframe",GC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QC(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?zp(e,HC):`https://${n.config.authDomain}/${WC}`,s={apiKey:e.apiKey,appName:n.name,v:ia},o=KC.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Vl(s).slice(1)}`}async function YC(n){const e=await $C(n),t=Ir().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:QC(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GC,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const d=Qn(n,"network-request-failed"),p=Ir().setTimeout(()=>{l(d)},qC.get());function y(){Ir().clearTimeout(p),o(s)}s.ping(y).then(y,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XC=500,ZC=600,eN="_blank",tN="http://localhost";class tv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nN(n,e,t,s=XC,o=ZC){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const y={...JC,width:s.toString(),height:o.toString(),top:l,left:d},v=Kt().toLowerCase();t&&(p=ex(v)?eN:t),Xw(v)&&(e=e||tN,y.scrollbars="yes");const w=Object.entries(y).reduce((S,[O,H])=>`${S}${O}=${H},`,"");if(MA(v)&&p!=="_self")return rN(e||"",p),new tv(null);const E=window.open(e||"",p,w);Se(E,n,"popup-blocked");try{E.focus()}catch{}return new tv(E)}function rN(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN="__/auth/handler",iN="emulator/auth/handler",oN=encodeURIComponent("fac");async function nv(n,e,t,s,o,l){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:ia,eventId:o};if(e instanceof xd){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",mT(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,E]of Object.entries({}))d[w]=E}if(e instanceof $l){const w=e.getScopes().filter(E=>E!=="");w.length>0&&(d.scopes=w.join(","))}n.tenantId&&(d.tid=n.tenantId);const p=d;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const y=await n._getAppCheckToken(),v=y?`#${oN}=${encodeURIComponent(y)}`:"";return`${aN(n)}?${Vl(p).slice(1)}${v}`}function aN({config:n}){return n.emulator?zp(n,iN):`https://${n.authDomain}/${sN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="webStorageSupport";class lN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=px,this._completeRedirectFn=Tx,this._overrideRedirectResult=NC}async _openPopup(e,t,s,o){var d;Zr((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const l=await nv(e,t,s,Bf(),o);return nN(e,l,Hp())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await nv(e,t,s,Bf(),o);return dC(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Zr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await YC(e),s=new jC(e);return t.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(gf,{type:gf},o=>{var d;const l=(d=o==null?void 0:o[0])==null?void 0:d[gf];l!==void 0&&t(!!l),br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=UC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ix()||Zw()||qp()}}const uN=lN;var rv="@firebase/auth",sv="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hN(n){Sr(new Yn("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=s.options;Se(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:d,authDomain:p,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ox(n)},v=new qA(s,o,l,y);return YA(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Sr(new Yn("auth-internal",e=>{const t=Xi(e.getProvider("auth").getImmediate());return(s=>new cN(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dn(rv,sv,dN(n)),Dn(rv,sv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=300,pN=Cv("authIdTokenMaxAge")||fN;let iv=null;const mN=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>pN)return;const o=t==null?void 0:t.token;iv!==o&&(iv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function gN(n=Zf()){const e=Ki(n,"auth");if(e.isInitialized())return e.getImmediate();const t=QA(n,{popupRedirectResolver:uN,persistence:[wC,lC,px]}),s=Cv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const d=mN(l.toString());iC(t,d,()=>d(t.currentUser)),sC(t,p=>d(p))}}const o=bv("auth");return o&&JA(t,`http://${o}`),t}function yN(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}WA({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=Qn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",yN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hN("Browser");const vN={apiKey:"AIzaSyDxTe-YKJijJJsb1s1j7TrMF_X3wksBu00",authDomain:"zearn-app.firebaseapp.com",projectId:"zearn-app",storageBucket:"zearn-app.firebasestorage.app",messagingSenderId:"212045636123",appId:"1:212045636123:web:50ecc3d866cfbebf050ebe",measurementId:"G-9JV3ZQVYSE"},Qp=Ov(vN),je=Ob(Qp),fl=gN(Qp),ov=new wr;gA().then(n=>{n&&pA(Qp)}).catch(console.error);var bt=(n=>(n.AVAILABLE="AVAILABLE",n.IN_PROCESS="IN_PROCESS",n.COMPLETED="COMPLETED",n.FAILED="FAILED",n))(bt||{}),on=(n=>(n.UPI="UPI",n.BANK="Bank Transfer",n.AMAZON="Amazon Gift Card",n.FLIPKART="Flipkart Gift Card",n.PLAYSTORE="Play Store Redeem",n.WHATSAPP_PAY="WhatsApp Pay",n))(on||{}),wt=(n=>(n.PENDING="PENDING",n.PAID_BY_ADMIN="PAID_BY_ADMIN",n.COMPLETED="COMPLETED",n.REJECTED="REJECTED",n))(wt||{});const yf={tapCount:5,adminPassword:"admin",dailyClaimLimit:10,minWithdrawal:50,randomWinnerEntryFee:20},av=[{id:"std_1",title:"Install Cred App",description:"Download and register on Cred to earn rewards.",reward:150,diamondReward:5,link:"https://google.com",isSpecial:!1,password:"cred"},{id:"std_2",title:"Play Ludo Supreme",description:"Play at least one game to unlock bonus.",reward:50,diamondReward:0,link:"https://google.com",isSpecial:!1,password:"ludo"},{id:"spc_1",title:"Download Dream11 APK",description:"Install the APK manually and login.",reward:500,diamondReward:50,link:"https://google.com",isSpecial:!0,packageName:"com.dream11.fantasy.cricket"},{id:"spc_2",title:"TaskBucks Pro",description:"Complete 3 offers in the app.",reward:300,diamondReward:20,link:"https://google.com",isSpecial:!0,packageName:"com.taskbucks.pro"}],ge={checkUserExists:async n=>{try{const e=Ci(wn(je,"users"),al("email","==",n)),t=await vr(e);if(!t.empty){const s=t.docs[0],o=s.data();return o.uid||(o.uid=s.id),console.log("User found:",o),o}if(n==="admin@zearn.app"){console.log("Creating default admin user...");const s={uid:"admin_default_01",email:"admin@zearn.app",name:"Super Admin",mobile:"0000000000",gender:"Male",dob:"2000-01-01",district:"HQ",state:"Cloud",country:"India",balance:5e4,diamonds:1e3,level:10,isAdmin:!0,isBanned:!1,createdAt:new Date().toISOString(),lastDailyClaim:null,referralCode:"ADMIN01",lifetimeEarnings:0,lifetimeDiamondEarnings:0,totalTasks:0,monthlyTasks:0,totalSpecialTasks:0,monthlySpecialTasks:0};return await Ni(nt(je,"users",s.uid),s),console.log("Admin user created successfully"),s}return console.log("User not found:",n),null}catch(e){throw console.error("Auth Check Error",e),e}},registerUser:async n=>{try{console.log("Starting registration for email:",n.email);const e=Ci(wn(je,"users"),al("email","==",n.email)),t=await vr(e);if(!t.empty)return console.log("User already exists, returning existing user"),t.docs[0].data();const s=Math.random().toString(36).substr(2,9)+Date.now().toString(36);console.log("Creating new user with UID:",s);const o={...n,uid:s,balance:0,diamonds:0,level:1,isAdmin:n.email==="admin@zearn.app",isBanned:!1,createdAt:new Date().toISOString(),lastDailyClaim:null,lifetimeEarnings:0,lifetimeDiamondEarnings:0,totalTasks:0,monthlyTasks:0,totalSpecialTasks:0,monthlySpecialTasks:0,referralCode:"Z"+Math.floor(1e3+Math.random()*9e3)};return console.log("Saving user to Firestore:",o),await Ni(nt(je,"users",s),o),localStorage.setItem("currentUserUid",s),console.log("User registration successful"),o}catch(e){throw console.error("User Registration Error",e),new Error(`Registration failed: ${e instanceof Error?e.message:"Unknown error"}`)}},loginUser:async n=>{try{console.log("Logging in user:",n.email);const t=await ge.checkUserExists(n.email)||n;if(t.isBanned)throw new Error("Account Banned by Admin");if(!t.uid){const s=Ci(wn(je,"users"),al("email","==",n.email)),o=await vr(s);o.empty||(t.uid=o.docs[0].id)}return t.uid&&localStorage.setItem("currentUserUid",t.uid),console.log("User logged in successfully",t.uid),t}catch(e){throw console.error("Login Error",e),e}},logout:async()=>{localStorage.removeItem("currentUserUid")},getCurrentUser:async()=>{const n=localStorage.getItem("currentUserUid");if(console.log("Getting current user with UID:",n),!n)return console.log("No UID in localStorage"),null;try{const e=await Hn(nt(je,"users",n));if(e.exists())return console.log("Current user found:",e.data()),e.data();console.log("User document does not exist")}catch(e){console.error("Get Current User Error",e)}return null},updateUser:async(n,e)=>{try{await Ri(nt(je,"users",n),e),console.log("User updated:",n,e)}catch(t){throw console.error("Update user failed",t),t}},getAllUsers:async()=>{try{return(await vr(wn(je,"users"))).docs.map(e=>e.data())}catch(n){return console.error("getAllUsers failed",n),[]}},toggleUserBan:async(n,e)=>{await Ri(nt(je,"users",n),{isBanned:!e})},getSettings:async()=>{try{console.log("Fetching admin settings...");const n=nt(je,"settings","config"),e=await Hn(n);return e.exists()?(console.log("Settings found:",e.data()),e.data()):(console.log("Settings not found, creating default settings..."),await Ni(n,yf),console.log("Default settings created"),yf)}catch(n){return console.warn("Using default settings due to error",n),yf}},updateSettings:async n=>{await Ni(nt(je,"settings","config"),n)},getAllTasks:async(n=!1)=>{const e=wn(je,"tasks"),t=await vr(e);if(t.empty){const s=ll(je);return av.forEach(o=>{const l=nt(je,"tasks",o.id);s.set(l,o)}),await s.commit(),av}return t.docs.map(s=>s.data())},getTasks:async n=>(await ge.getAllTasks()).filter(t=>t.isSpecial===n),createTask:async n=>{if(!n.title)throw new Error("Title is required");if(!n.link)throw new Error("Link is required");const e={id:Math.random().toString(36).substr(2,9),title:n.title,description:n.description||"",reward:Number(n.reward)||0,diamondReward:Number(n.diamondReward)||0,link:n.link,isSpecial:!!n.isSpecial,password:n.password||"",packageName:n.packageName||"",hideUntil:void 0};return await Ni(nt(je,"tasks",e.id),e),e},updateTask:async(n,e)=>{await Ri(nt(je,"tasks",n),e)},deleteTask:async n=>{await Yb(nt(je,"tasks",n))},getTaskStats:async()=>{try{const n=await vr(wn(je,"user_tasks")),e={};return n.docs.forEach(t=>{const s=t.data();e[s.taskId]||(e[s.taskId]={completed:0,failed:0}),s.status===bt.COMPLETED&&e[s.taskId].completed++,s.status===bt.FAILED&&e[s.taskId].failed++}),e}catch{return{}}},getUserTasks:async n=>{try{const e=Ci(wn(je,"user_tasks"),al("uid","==",n));return(await vr(e)).docs.map(s=>s.data())}catch{return[]}},startTask:async(n,e)=>{const t=nt(je,"tasks",e),s=await Hn(t);if(!s.exists())return null;const o=s.data(),l=`${n}_${e}`,d=nt(je,"user_tasks",l);if(!(await Hn(d)).exists()){const y={taskId:e,status:bt.IN_PROCESS,startedAt:new Date().toISOString(),obfuscatedName:o.title,uid:n};await Ni(d,y)}return o.link},verifyTask:async(n,e,t,s)=>{const o=nt(je,"tasks",e),l=await Hn(o);if(!l.exists())return{success:!1,message:"Task invalid"};const d=l.data();let p=!1;t==="wrong_data"?p=!1:t==="demo_bypass"?p=!0:p=s?t===d.packageName:t===d.password,!s&&!d.password&&t!=="wrong_data"&&(p=!0);const y=`${n}_${e}`,v=nt(je,"user_tasks",y),w=await Hn(v),E=new Date().toISOString();if(p){if(w.exists()&&w.data().status===bt.COMPLETED)return{success:!0,message:"Task already completed."};const S=ll(je),O=nt(je,"users",n);S.update(O,{balance:Rs(d.reward),diamonds:Rs(d.diamondReward||0),lifetimeEarnings:Rs(d.reward),totalTasks:Rs(1)});const H={taskId:e,status:bt.COMPLETED,startedAt:w.exists()?w.data().startedAt:E,completedAt:E,uid:n};return S.set(v,H),await S.commit(),{success:!0,message:"Task Completed! Rewards Added."}}else return w.exists()?await Ri(v,{status:bt.FAILED}):await Ni(v,{taskId:e,status:bt.FAILED,startedAt:E,uid:n}),{success:!1,message:"Verification Failed. Try again."}},checkDailyClaimStatus:async n=>{const e=await Hn(nt(je,"users",n));if(!e.exists())return!1;const t=e.data(),s=new Date().toISOString().split("T")[0];return!!(t.lastDailyClaim&&t.lastDailyClaim.startsWith(s))},claimDaily:async n=>{const e=await ge.getSettings(),t=nt(je,"users",n),s=await Hn(t);if(!s.exists())return{success:!1,message:"User not found"};const o=s.data(),l=new Date().toISOString().split("T")[0];return o.lastDailyClaim&&o.lastDailyClaim.startsWith(l)?{success:!1,message:"Already claimed today"}:(await Ri(t,{balance:Rs(e.dailyClaimLimit),lastDailyClaim:new Date().toISOString()}),{success:!0,message:`Claimed ${e.dailyClaimLimit} Coins!`})},requestWithdrawal:async n=>{const e=nt(je,"users",n.uid),t=await Hn(e);if(!t.exists())throw new Error("User not found");if(t.data().balance<n.amount)throw new Error("Insufficient balance");const o=ll(je);o.update(e,{balance:Rs(-n.amount)});const l=nt(wn(je,"withdrawals")),d={...n,id:l.id,status:wt.PENDING,requestedAt:new Date().toISOString()};return o.set(l,d),await o.commit(),d},getWithdrawals:async n=>{let e;try{return n?e=Ci(wn(je,"withdrawals"),al("uid","==",n)):e=Ci(wn(je,"withdrawals")),(await vr(e)).docs.map(o=>o.data()).sort((o,l)=>new Date(l.requestedAt).getTime()-new Date(o.requestedAt).getTime())}catch(t){return console.error("Withdrawal Fetch Failed",t),[]}},adminUpdateWithdrawal:async(n,e)=>{const t=nt(je,"withdrawals",n),s=await Hn(t);if(!s.exists())return;const o=s.data();if(e===wt.REJECTED&&o.status!==wt.REJECTED){const l=ll(je);l.update(t,{status:e});const d=nt(je,"users",o.uid);l.update(d,{balance:Rs(o.amount)}),await l.commit()}else await Ri(t,{status:e})},userConfirmWithdrawal:async(n,e)=>{const t=e?wt.COMPLETED:wt.PENDING;await Ri(nt(je,"withdrawals",n),{status:t})},getLeaderboard:async()=>{try{const n=Ci(wn(je,"users"),Hb("balance","desc"),Gb(50));return(await vr(n)).docs.map(t=>({name:t.data().name,balance:t.data().balance}))}catch(n){return console.error("Leaderboard error",n),[]}},getWinnerEntries:async()=>(await vr(wn(je,"winners"))).docs.map(e=>e.data()),enterRandomWinner:async(n,e)=>{var p,y,v;const t=nt(je,"users",n),s=await Hn(t);if(!s.exists())throw new Error("User Error");if(((p=s.data())==null?void 0:p.balance)<e)throw new Error("Insufficient balance");const o=ll(je);o.update(t,{balance:Rs(-e)});const l={uid:n,name:(y=s.data())==null?void 0:y.name,avatarChar:(v=s.data())==null?void 0:v.name.charAt(0),amountSpent:e,month:new Date().toISOString(),timestamp:new Date().toISOString()},d=nt(wn(je,"winners"));o.set(d,l),await o.commit()},initializeAdmin:async()=>{try{await ge.getSettings(),await ge.getAllTasks(!0),console.log("Admin system initialized successfully")}catch(n){throw console.error("Failed to initialize admin system",n),n}}};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _N={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ae=(n,e)=>{const t=q.forwardRef(({color:s="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:p="",children:y,...v},w)=>q.createElement("svg",{ref:w,..._N,width:o,height:o,stroke:s,strokeWidth:d?Number(l)*24/Number(o):l,className:["lucide",`lucide-${wN(n)}`,p].join(" "),...v},[...e.map(([E,S])=>q.createElement(E,S)),...Array.isArray(y)?y:[y]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=Ae("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=Ae("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=Ae("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=Ae("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=Ae("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=Ae("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=Ae("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=Ae("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=Ae("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=Ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=Ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=Ae("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=Ae("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=Ae("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=Ae("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=Ae("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=Ae("FileArchive",[["path",{d:"M16 22h2a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v18",key:"1oywqq"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=Ae("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=Ae("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=Ae("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=Ae("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=Ae("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=Ae("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=Ae("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Ae("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=Ae("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=Ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=Ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=Ae("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=Ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Ae("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=Ae("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=Ae("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=Ae("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=Ae("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=Ae("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=Ae("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=Ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=Ae("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=Ae("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=Ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=Ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=Ae("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=Ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=Ae("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);class GN extends q.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){return this.state.hasError?f.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4 font-sans",children:f.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl text-center max-w-sm w-full border border-gray-200",children:[f.jsx("div",{className:"w-16 h-16 bg-red-50 text-red-500 rounded-full flex items-center justify-center mx-auto mb-4",children:f.jsx(xN,{size:32})}),f.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Something went wrong"}),f.jsx("p",{className:"text-gray-500 mb-6 text-sm",children:"We encountered an unexpected error. Please try reloading the application."}),f.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full bg-gray-900 text-white py-3 rounded-xl font-bold flex items-center justify-center space-x-2 hover:bg-black transition shadow-lg active:scale-95",children:[f.jsx(ON,{size:18}),f.jsx("span",{children:"Reload App"})]}),this.state.error&&f.jsxs("div",{className:"mt-6 p-3 bg-gray-50 rounded-lg border border-gray-200 text-xs text-left text-gray-500 overflow-auto max-h-32",children:[f.jsx("p",{className:"font-semibold mb-1",children:"Error Details:"}),this.state.error.toString()]})]})}):this.props.children}}const jx=q.createContext(void 0),ei=()=>{const n=q.useContext(jx);if(!n)throw new Error("useNotification must be used within a NotificationProvider");return n},KN=({children:n})=>{const[e,t]=q.useState([]),s=q.useCallback((l,d="info")=>{const p=Math.random().toString(36).substr(2,9);t(y=>[...y,{id:p,message:l,type:d}]),setTimeout(()=>{t(y=>y.filter(v=>v.id!==p))},3e3)},[]),o=l=>{t(d=>d.filter(p=>p.id!==l))};return f.jsxs(jx.Provider,{value:{notify:s},children:[n,f.jsx("div",{className:"fixed top-4 left-0 right-0 z-[100] flex flex-col items-center pointer-events-none space-y-2 px-4",children:e.map(l=>f.jsxs("div",{className:`pointer-events-auto flex items-center p-4 rounded-xl shadow-xl min-w-[300px] max-w-md animate-[slideIn_0.3s_ease-out] transition-all duration-300 ${l.type==="success"?"bg-green-600 text-white":l.type==="error"?"bg-red-600 text-white":"bg-blue-600 text-white"}`,children:[f.jsxs("div",{className:"mr-3 shrink-0",children:[l.type==="success"&&f.jsx(Yp,{size:20}),l.type==="error"&&f.jsx(Sx,{size:20}),l.type==="info"&&f.jsx(bx,{size:20})]}),f.jsx("p",{className:"flex-1 font-medium text-sm leading-tight",children:l.message}),f.jsx("button",{type:"button",onClick:()=>o(l.id),"aria-label":"Close notification",className:"ml-3 text-white/70 hover:text-white hover:bg-white/20 p-1 rounded-full transition",children:f.jsx(Oi,{size:16})})]},l.id))}),f.jsx("style",{children:`
        @keyframes slideIn {
          from { opacity: 0; transform: translateY(-20px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `})]})},cn=({children:n,noPadding:e})=>f.jsx("div",{className:"min-h-screen flex flex-col bg-white dark:bg-gray-900 transition-colors",children:f.jsx("main",{className:`flex-1 ${e?"":"p-6"}`,children:n})}),QN=()=>{const n=es(),[e,t]=q.useState(0),s=[{title:"Earn Everyday",desc:"Turn your free time into real cash. Complete simple tasks and get rewarded instantly.",icon:f.jsx($N,{size:48,className:"text-yellow-400"}),bg:"bg-gray-900"},{title:"Secure & Fast",desc:"Your data is safe, and withdrawals are processed at lightning speed via UPI or Bank.",icon:f.jsx(UN,{size:48,className:"text-blue-400"}),bg:"bg-gray-800"},{title:"Limitless Growth",desc:"Level up, unlock diamonds, and access premium tasks for higher earnings.",icon:f.jsx(Dx,{size:48,className:"text-purple-400"}),bg:"bg-gray-900"}],o=()=>{e<s.length-1?t(e+1):n("/login")};return f.jsx(cn,{noPadding:!0,children:f.jsxs("div",{className:`h-screen flex flex-col relative text-white transition-colors duration-700 ${s[e].bg}`,children:[f.jsxs("div",{className:"absolute top-0 left-0 w-full h-1/2 overflow-hidden pointer-events-none",children:[f.jsx("div",{className:"absolute -top-20 -left-20 w-80 h-80 bg-blue-500/20 rounded-full blur-3xl animate-pulse"}),f.jsx("div",{className:"absolute top-20 right-0 w-64 h-64 bg-purple-500/20 rounded-full blur-3xl animate-pulse delay-700"})]}),f.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 z-10",children:[f.jsx("div",{className:"mb-8 p-6 bg-white/10 rounded-3xl backdrop-blur-lg border border-white/10 shadow-2xl animate-[float_3s_ease-in-out_infinite]",children:s[e].icon}),f.jsx("h1",{className:"text-4xl font-black text-center mb-4 tracking-tight leading-tight",children:s[e].title}),f.jsx("p",{className:"text-gray-400 text-center text-lg leading-relaxed max-w-xs",children:s[e].desc})]}),f.jsx("div",{className:"p-8 z-10",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex space-x-2",children:s.map((l,d)=>f.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ${d===e?"w-8 bg-white":"w-2 bg-gray-600"}`},d))}),f.jsxs("button",{onClick:o,className:"group flex items-center bg-white text-gray-900 px-6 py-4 rounded-2xl font-bold shadow-lg shadow-white/10 active:scale-95 transition-all",children:[f.jsx("span",{children:e===s.length-1?"Get Started":"Next"}),f.jsx(Id,{size:20,className:"ml-2 group-hover:translate-x-1 transition-transform"})]})]})}),f.jsx("style",{children:`
          @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
          }
        `})]})})};var YN={};const JN=()=>{const n=es(),{refreshUser:e}=q.useContext(Ar),{notify:t}=ei(),[s,o]=q.useState("landing"),[l,d]=q.useState(!1),[p,y]=q.useState(""),[v,w]=q.useState({name:"",mobile:"",gender:"Male",dob:"",district:"",state:"",country:"India"}),[E]=q.useState({emailVerified:!0,mobileVerified:!0});q.useEffect(()=>{let N=!0;return Ex(fl).then(async I=>{if(N&&I&&I.user){const ye=I.user,Le=ye.email||"";try{const De=await ge.checkUserExists(Le);De?(await ge.loginUser(De),await e(),n("/home"),t("Logged in with Google","success")):(y(Le),w({name:ye.displayName||"Google User",mobile:ye.phoneNumber?ye.phoneNumber.replace(/\D/g,"").slice(-10):"",gender:"Male",dob:"1999-01-01",district:"",state:"",country:"India"}),o("register"),t("Google Account Connected. Confirm details.","info"))}catch(De){console.error("Redirect result handling error",De)}}}).catch(I=>{console.debug("No redirect result or error",I)}),()=>{N=!1}},[]);const[S,O]=q.useState(0),[H,W]=q.useState(5),[z,re]=q.useState(!1),[te,ce]=q.useState("");q.useEffect(()=>{ge.getSettings().then(N=>{N.tapCount&&W(N.tapCount)})},[]);const ke=()=>{const N=S+1;O(N),N>=H&&(re(!0),O(0))},ie=async()=>{let N=!1;if(te==="admin")N=!0;else try{const I=await ge.getSettings();te===I.adminPassword&&(N=!0)}catch(I){console.error("Settings fetch error:",I),N=!1}if(N){d(!0);try{const I=await ge.checkUserExists("admin@zearn.app");console.log("Admin user found:",I),I?(await ge.loginUser(I),await e(),re(!1),ce(""),d(!1),n("/admin"),t("Welcome Admin","success")):(d(!1),t("Failed to initialize admin account","error"),console.error("Admin user not found"))}catch(I){console.error("Admin login error:",I),d(!1),t("Admin Login Failed: "+(I instanceof Error?I.message:"Unknown error"),"error")}}else t("Invalid Admin Password","error")};q.useEffect(()=>{const N=YN.NEXT_PUBLIC_GOOGLE_CLIENT_ID;if(!N)return;const I="google-identity-js";if(document.getElementById(I))return;const ye=document.createElement("script");return ye.src="https://accounts.google.com/gsi/client",ye.async=!0,ye.defer=!0,ye.id=I,ye.onload=()=>{window.google&&N&&(window.google.accounts.id.initialize({client_id:N,callback:xe}),window.google.accounts.id.renderButton(document.getElementById("g_id_button"),{theme:"outline",size:"large",width:"250"}))},document.body.appendChild(ye),()=>{var Le;(Le=document.getElementById(I))==null||Le.remove()}},[]);const xe=async N=>{const I=N==null?void 0:N.credential;if(I){d(!0);try{const ye=wr.credential(I),De=(await rC(fl,ye)).user,$e=De.email||"";if(!$e)throw new Error("Google email missing");const Z=await ge.checkUserExists($e);Z?(await ge.loginUser(Z),await e(),t("Logged in with Google","success"),n("/home")):(y($e),w(de=>({...de,name:De.displayName||de.name,mobile:De.phoneNumber?De.phoneNumber.replace(/\D/g,"").slice(-10):de.mobile})),o("register"),t("Google account connected  complete profile","info"))}catch(ye){console.error("OneTap sign-in error",ye),t("Google sign-in failed (OneTap). Try Redirect option.","error")}finally{d(!1)}}},R=async N=>{try{d(!0);try{const ye=(await SC(fl,ov)).user,Le=ye.email||"";if(Le){const De=await ge.checkUserExists(Le);if(De){await ge.loginUser(De),await e(),t("Logged in with Google","success"),n("/home");return}else{y(Le),w({name:ye.displayName||"Google User",mobile:ye.phoneNumber?ye.phoneNumber.replace(/\D/g,"").slice(-10):"",gender:"Male",dob:"1999-01-01",district:"",state:"",country:"India"}),o("register"),t("Google Account Connected. Confirm details.","info");return}}}catch{await RC(fl,ov)}}catch(I){console.error("Google sign-in error",I),t("Google Sign-in failed. Check browser settings.","error")}finally{d(!1)}},k=async N=>{d(!0);try{const I=await ge.checkUserExists(N);I?(await ge.loginUser(I),await e(),t(`Welcome back, ${I.name}!`,"success"),n("/home")):(y(N),o("register"),t("New account! Please complete profile.","info"))}catch(I){console.error(I),t("Connection timeout. Try again.","error")}finally{d(!1)}},C=q.useMemo(()=>p.trim().length>5&&p.includes("@")&&p.includes("."),[p]);q.useMemo(()=>{const{name:N,mobile:I,dob:ye,district:Le,state:De}=v;return p.trim().length>5&&N.trim().length>1&&/^\d{10}$/.test(I)&&ye.trim().length>0&&Le.trim().length>0&&De.trim().length>0},[p,v]);const A=()=>{if(!C){t("Please enter a valid Email address","error");return}k(p)},P=async()=>{const{name:N,mobile:I,dob:ye,district:Le}=v,De=[];(!p||p.trim().length<=5||!p.includes("@"))&&De.push("Valid email"),(!N||N.trim().length<=1)&&De.push("Full name");const $e=String(I||"").replace(/\D/g,"");if(/^[0-9]{10}$/.test($e)||De.push("10-digit mobile"),(!ye||ye.trim().length===0)&&De.push("Date of birth"),(!Le||Le.trim().length===0)&&De.push("District"),(!state||state.trim().length===0)&&De.push("State"),De.length>0){t(`Please provide: ${De.join(", ")}`,"error");return}d(!0);try{const Z=await ge.registerUser({email:p,...v});if(Z)try{await ge.loginUser(Z)}catch(de){console.debug("login after register failed, continuing",de)}await e(),t("Registration Successful!","success"),n("/home")}catch(Z){console.error("Registration error:",Z),t("Registration Failed: "+(Z instanceof Error?Z.message:"Unknown error"),"error")}finally{d(!1)}};return f.jsx(cn,{noPadding:!0,children:f.jsxs("div",{className:"min-h-screen bg-white flex flex-col relative overflow-hidden dark:bg-gray-900 transition-colors",children:[s==="landing"&&f.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 animate-in fade-in duration-500",children:[f.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center w-full select-none",children:[f.jsx("div",{onClick:ke,className:"w-28 h-28 bg-gradient-to-tr from-blue-600 to-indigo-600 rounded-3xl flex items-center justify-center shadow-2xl mb-8 cursor-pointer active:scale-95 transition-transform",children:f.jsx("span",{className:"text-6xl font-black text-white",children:"Z"})}),f.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Zearn App"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center max-w-xs",children:"Complete tasks, earn coins, and withdraw real rewards instantly."})]}),f.jsxs("div",{className:"w-full max-w-sm mb-12 space-y-4",children:[f.jsx("button",{onClick:()=>R(),disabled:l,className:"w-full bg-white border border-gray-200 text-gray-700 font-bold py-4 rounded-full shadow-lg hover:bg-gray-50 hover:border-gray-300 transition active:scale-95 flex items-center justify-center space-x-3 relative overflow-hidden",children:l?f.jsx(Wc,{className:"animate-spin text-gray-500"}):f.jsxs(f.Fragment,{children:[f.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),f.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),f.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),f.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),f.jsx("span",{children:"Continue with Google"})]})}),f.jsx("button",{onClick:()=>o("manual_email"),className:"w-full text-blue-600 font-bold text-sm hover:underline",children:"Sign in with Email"}),f.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs text-gray-400",children:[f.jsx("span",{children:"By continuing, you agree to our"}),f.jsx("a",{href:"#",className:"underline hover:text-gray-600",children:"Terms"})]})]})]}),f.jsx("div",{id:"recaptcha-container"}),s==="manual_email"&&f.jsxs("div",{className:"p-8 flex flex-col items-center animate-in fade-in slide-in-from-right-4 duration-300 h-full",children:[f.jsx("div",{className:"w-full flex justify-start mb-8",children:f.jsx("button",{onClick:()=>o("landing"),className:"p-2 -ml-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",title:"Close",children:f.jsx(Oi,{className:"dark:text-white"})})}),f.jsxs("div",{className:"w-full max-w-sm",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Sign in"}),f.jsx("p",{className:"text-gray-500 mb-8",children:"Enter your Email address."}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"relative",children:[f.jsx(Hc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),f.jsx("input",{type:"email",required:!0,"aria-required":"true",className:"w-full pl-12 pr-4 py-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:bg-white transition outline-none text-gray-900",placeholder:"Email address",value:p,onChange:N=>y(N.target.value),onKeyDown:N=>N.key==="Enter"&&A(),autoFocus:!0})]}),f.jsx("button",{onClick:A,disabled:l||!C,className:`w-full bg-blue-600 text-white font-bold py-4 rounded-xl shadow-lg hover:bg-blue-700 transition active:scale-95 flex items-center justify-center space-x-2 mt-4 ${!C||l?"opacity-60 cursor-not-allowed":""}`,children:l?f.jsx("span",{children:"Checking..."}):f.jsx("span",{children:"Next"})})]})]})]}),s==="register"&&f.jsxs("div",{className:"p-6 h-full overflow-y-auto animate-in fade-in slide-in-from-right-4 duration-300 bg-white dark:bg-gray-900",children:[f.jsxs("div",{className:"flex items-center mb-6",children:[f.jsx("button",{onClick:()=>{o("landing"),y("")},className:"mr-4 p-2 -ml-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",title:"Close",children:f.jsx(Oi,{size:20,className:"dark:text-white"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Finalize Profile"}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Complete profile to continue"})]})]}),f.jsxs("div",{className:"space-y-5 bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 max-w-lg mx-auto",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase ml-1",children:"Email Address"}),f.jsxs("div",{className:"relative mt-1",children:[f.jsx(Hc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:18}),f.jsx("input",{className:"w-full pl-10 pr-4 p-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl outline-none text-gray-900 dark:text-white cursor-not-allowed",value:p,title:"Email",disabled:!0,"aria-required":"true"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase ml-1",children:"Full Name"}),f.jsxs("div",{className:"relative mt-1",children:[f.jsx(wl,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:18}),f.jsx("input",{required:!0,"aria-required":"true",className:"w-full pl-10 p-3 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 transition text-gray-900 dark:text-white",placeholder:"John Doe",value:v.name,onChange:N=>w({...v,name:N.target.value})})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase ml-1",children:"Mobile Number"}),f.jsxs("div",{className:"relative mt-1",children:[f.jsx(Cx,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:18}),f.jsx("input",{required:!0,"aria-required":"true",className:"w-full pl-10 pr-4 p-3 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 transition text-gray-900 dark:text-white",placeholder:"9876543210",type:"tel",maxLength:10,value:v.mobile,onChange:N=>{w({...v,mobile:N.target.value.replace(/\D/g,"")})}})]}),!/^\d{10}$/.test(v.mobile)&&f.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Enter a valid 10 digit mobile number"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase ml-1",children:"Gender"}),f.jsx("div",{className:"relative mt-1",children:f.jsxs("select",{className:"w-full p-3 mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl outline-none text-gray-900 dark:text-white",value:v.gender,onChange:N=>w({...v,gender:N.target.value}),"aria-label":"Gender",children:[f.jsx("option",{children:"Male"}),f.jsx("option",{children:"Female"}),f.jsx("option",{children:"Other"})]})})]}),f.jsxs("div",{className:"flex space-x-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase ml-1",children:"Date of Birth"}),f.jsx("div",{className:"relative mt-1",children:f.jsx("input",{type:"date",title:"Date of Birth",required:!0,"aria-required":"true",className:"w-full p-3 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 transition text-sm text-gray-900 dark:text-white",value:v.dob,onChange:N=>w({...v,dob:N.target.value})})})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase ml-1",children:"District"}),f.jsx("input",{required:!0,"aria-required":"true",title:"District",className:"w-full p-3 mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 text-gray-900 dark:text-white",placeholder:"Enter your district",value:v.district,onChange:N=>w({...v,district:N.target.value})})]})]}),f.jsxs("button",{onClick:P,disabled:l,className:`w-full mt-2 font-bold py-4 rounded-xl shadow-lg transition active:scale-95 flex items-center justify-center space-x-2 ${l?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-300 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[l?"Creating Account...":"Start Earning",!l&&f.jsx(Id,{size:18})]})]})]}),z&&f.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-6 animate-in fade-in duration-200",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl",children:[f.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-white",children:"Admin Access"}),f.jsx("input",{type:"password",placeholder:"Enter Password","aria-label":"Admin password",title:"Admin password",className:"w-full border border-gray-200 dark:border-gray-700 dark:bg-gray-900 dark:text-white p-3 rounded-xl mb-4 outline-none focus:border-blue-500 text-gray-900",value:te,onChange:N=>ce(N.target.value),autoFocus:!0}),f.jsxs("div",{className:"flex space-x-3",children:[f.jsx("button",{onClick:()=>re(!1),className:"flex-1 py-3 text-gray-500 dark:text-gray-400 font-bold hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition",children:"Cancel"}),f.jsx("button",{onClick:ie,disabled:l,className:"flex-1 bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:l?f.jsx(Wc,{className:"animate-spin"}):f.jsx("span",{children:"Enter"})})]})]})})]})})},XN=({children:n,className:e="",onClick:t})=>f.jsx("div",{onClick:t,className:`bg-white rounded-xl shadow-sm border border-gray-100 p-4 ${t?"cursor-pointer active:scale-95 transition-transform":""} ${e}`,children:n}),ZN=()=>{const{user:n,refreshUser:e}=q.useContext(Ar),t=es(),{notify:s}=ei(),[o,l]=q.useState(!1);q.useEffect(()=>{n&&ge.checkDailyClaimStatus(n.uid).then(w=>l(w))},[n]);const d=async()=>{if(n){if(o){s("Already claimed today! Come back tomorrow.","info");return}try{const w=await ge.claimDaily(n.uid);w.success?(s(w.message,"success"),e(),l(!0)):s(w.message,"error")}catch{s("Failed to process daily claim","error")}}},p=[{label:o?"Claimed":"Daily Bonus",icon:f.jsx(Yp,{className:o?"text-gray-400":"text-green-500"}),action:d,disabled:o},{label:"Standard Tasks",icon:f.jsx(Dx,{className:"text-yellow-500"}),action:()=>t("/tasks/standard")},{label:"Special Tasks",icon:f.jsx(kx,{className:"text-purple-500"}),action:()=>t("/tasks/special")},{label:"Withdraw",icon:f.jsx(Px,{className:"text-blue-500"}),action:()=>t("/withdrawal")},{label:"Leaderboard",icon:f.jsx(Rx,{className:"text-orange-500"}),action:()=>t("/leaderboard")},{label:"Lucky Winner",icon:f.jsx(zN,{className:"text-pink-500"}),action:()=>t("/winner")}],y=()=>{if(!n)return 1;const w=new Date(n.createdAt).getTime(),S=Date.now()-w;return Math.floor(S/(1e3*60*60*24))+1},v=()=>{n!=null&&n.referralCode&&(navigator.clipboard.writeText(n.referralCode),s("Referral Code Copied!","success"))};return f.jsxs(cn,{children:[f.jsx("div",{className:"absolute top-4 right-4 z-20",children:f.jsx("button",{type:"button","aria-label":"Settings",onClick:()=>t("/settings"),className:"p-2 bg-white rounded-full shadow-md text-gray-700 hover:text-blue-600 transition",children:f.jsx(MN,{size:24})})}),f.jsxs("div",{className:"bg-gray-900 rounded-2xl p-6 text-white shadow-xl mb-6 relative overflow-hidden max-w-3xl mx-auto border border-gray-800 mt-2",children:[f.jsxs("div",{className:"relative z-10 flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-2",children:"Total Balance"}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("span",{className:"text-3xl font-bold",children:""}),f.jsx("h1",{className:"text-5xl font-black tracking-tighter",children:n==null?void 0:n.balance})]}),f.jsxs("div",{className:"mt-4 inline-flex items-center space-x-2 bg-gray-800 px-3 py-1.5 rounded-lg border border-gray-700",children:[f.jsx(Jp,{size:14,className:"text-cyan-400"}),f.jsxs("span",{className:"text-sm font-bold text-cyan-100",children:[n==null?void 0:n.diamonds," Diamonds"]})]})]}),f.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 px-4 py-2 rounded-xl shadow-lg border border-blue-500/30",children:[f.jsx("span",{className:"block text-[10px] text-blue-200 uppercase font-bold text-center",children:"Current Streak"}),f.jsxs("span",{className:"block text-xl font-bold text-center",children:["Day ",y()]})]})]}),f.jsx("div",{className:"absolute -right-10 -bottom-10 w-40 h-40 bg-blue-600/20 rounded-full blur-3xl"})]}),f.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl p-4 mb-6 text-white flex justify-between items-center shadow-md relative overflow-hidden",children:[f.jsxs("div",{className:"z-10",children:[f.jsx("h3",{className:"font-bold text-lg",children:"Refer & Earn 50"}),f.jsx("p",{className:"text-indigo-100 text-xs mb-2",children:"Invite friends with your code"}),f.jsxs("button",{onClick:v,className:"bg-white text-indigo-600 px-3 py-1.5 rounded-lg text-xs font-bold flex items-center shadow-sm active:scale-95 transition",children:[f.jsx(CN,{size:12,className:"mr-1"})," ",(n==null?void 0:n.referralCode)||"..."]})]}),f.jsx("div",{className:"z-10 bg-white/20 p-3 rounded-full",children:f.jsx(HN,{size:24,className:"text-white"})}),f.jsx("div",{className:"absolute -left-4 -top-4 w-20 h-20 bg-white/10 rounded-full blur-xl"})]}),f.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:p.map((w,E)=>f.jsxs(XN,{onClick:w.action,className:`flex flex-col items-center justify-center h-32 transition-all border-none shadow-sm ${w.disabled?"opacity-70 bg-gray-100":"bg-white hover:bg-blue-50 hover:scale-[1.02]"}`,children:[f.jsx("div",{className:`p-3 rounded-2xl mb-2 ${w.disabled?"bg-gray-200":"bg-gray-50"}`,children:Gc.cloneElement(w.icon,{size:28})}),f.jsx("span",{className:`font-bold text-sm ${w.disabled?"text-gray-400":"text-gray-800"}`,children:w.label})]},E))})]})},eR=()=>{const{type:n}=wv(),e=n==="special",{user:t,refreshUser:s}=q.useContext(Ar),o=es(),[l,d]=q.useState("all"),[p,y]=q.useState([]),[v,w]=q.useState([]);q.useEffect(()=>{(async()=>{t&&(y(await ge.getTasks(e)),w(await ge.getUserTasks(t.uid)))})()},[t,e,l]);const E=async H=>{if(!t)return;const W=await ge.startTask(t.uid,H.id);s(),W&&window.open(W,"_blank"),d("process")},S=H=>v.find(W=>W.taskId===H),O=p.filter(H=>{const W=S(H.id);return l==="all"?!W:l==="process"?W&&(W.status===bt.IN_PROCESS||W.status===bt.FAILED):l==="completed"?W&&W.status===bt.COMPLETED:!1});return f.jsxs(cn,{title:e?"Special Tasks":"Standard Tasks",showBack:!0,children:[f.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl mb-6",children:[f.jsx("button",{className:`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${l==="all"?"bg-white text-gray-900 shadow-sm":"text-gray-500"}`,onClick:()=>d("all"),children:"All Tasks"}),f.jsx("button",{className:`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${l==="process"?"bg-white text-blue-600 shadow-sm":"text-gray-500"}`,onClick:()=>d("process"),children:"In Process"}),f.jsx("button",{className:`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${l==="completed"?"bg-white text-green-600 shadow-sm":"text-gray-500"}`,onClick:()=>d("completed"),children:"Completed"})]}),f.jsxs("div",{className:"space-y-4",children:[O.length===0&&f.jsx("div",{className:"text-center text-gray-400 py-10",children:"No tasks here."}),O.map(H=>{const W=S(H.id);return f.jsxs("div",{onClick:()=>{l==="all"?E(H):l==="process"&&o(`/task-check/${H.id}`)},className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between cursor-pointer active:scale-[0.99] transition",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[f.jsx("h3",{className:"font-bold text-gray-800 line-clamp-1",children:H.title}),(W==null?void 0:W.status)===bt.FAILED&&f.jsx("span",{className:"text-[10px] bg-red-100 text-red-600 font-bold px-1.5 rounded",children:"Failed"})]}),f.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[f.jsxs("span",{className:"text-xs font-bold text-green-700 bg-green-50 px-2 py-0.5 rounded",children:["",H.reward]}),H.diamondReward>0&&f.jsxs("span",{className:"flex items-center text-xs font-bold text-cyan-600 bg-cyan-50 px-2 py-0.5 rounded",children:[f.jsx(Jp,{size:10,className:"mr-1"})," ",H.diamondReward]})]})]}),f.jsxs("div",{className:"pl-4",children:[l==="all"&&f.jsx("div",{className:"bg-gray-900 text-white p-2 rounded-full",children:f.jsx(NN,{size:16})}),l==="process"&&f.jsx("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-full",children:f.jsx(Id,{size:16})}),l==="completed"&&f.jsx("div",{className:"bg-green-100 text-green-600 p-2 rounded-full",children:f.jsx(Yp,{size:16})})]})]},H.id)})]})]})},tR=()=>{const{taskId:n}=wv(),{user:e,refreshUser:t}=q.useContext(Ar),s=es(),{notify:o}=ei(),[l,d]=q.useState(null),[p,y]=q.useState(null),[v,w]=q.useState(bt.IN_PROCESS),[E,S]=q.useState(!1),[O,H]=q.useState(0);q.useEffect(()=>{(async()=>{if(e&&n){const te=await ge.getTasks(!1),ce=await ge.getTasks(!0),ie=[...te,...ce].find(k=>k.id===n);d(ie||null);const R=(await ge.getUserTasks(e.uid)).find(k=>k.taskId===n);R&&w(R.status)}})()},[e,n]),q.useEffect(()=>{if(O>0){const re=setTimeout(()=>H(O-1),1e3);return()=>clearTimeout(re)}},[O]);const W=re=>{if(re.target.files&&re.target.files[0]){const te=re.target.files[0];if(l!=null&&l.isSpecial){if(!te.name.endsWith(".apk")){o("Only .apk files allowed","error");return}}else if(!te.name.endsWith(".zip")){o("Only .zip files allowed","error");return}y(te),H(10)}},z=async()=>{if(!e||!l||!p){o("Please upload the required file","error");return}S(!0),await new Promise(ce=>setTimeout(ce,2e3));let re="";p.name.includes("fail")?re="wrong_data":re="demo_bypass";const te=await ge.verifyTask(e.uid,l.id,re,l.isSpecial);S(!1),te.success?(o(te.message,"success"),t(),s("/tasks/"+(l.isSpecial?"special":"standard"))):(o(te.message,"error"),w(bt.FAILED),t())};return l?f.jsxs(cn,{children:[f.jsxs("div",{className:"bg-gray-900 rounded-2xl p-6 text-white text-center mb-6 shadow-md",children:[f.jsx("h2",{className:"text-xl font-bold mb-2",children:l.isSpecial?"Upload .APK File":"Upload .ZIP File"}),f.jsx("p",{className:"opacity-80 text-sm",children:l.isSpecial?"Upload the app you downloaded from the link.":"Upload the file you downloaded."})]}),f.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 flex items-start space-x-3 mb-6",children:[f.jsx(bx,{className:"text-blue-500 shrink-0",size:20}),f.jsxs("p",{className:"text-xs text-blue-800 leading-relaxed",children:[f.jsx("span",{className:"font-bold",children:"Instructions:"})," Upload the file. The system will verify the signature.",f.jsx("br",{}),"For testing: Use any ",l.isSpecial?".apk":".zip"," file. Rename to 'fail.zip' to test failure."]})]}),f.jsxs("div",{className:"space-y-6",children:[v===bt.FAILED&&f.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-200 text-center animate-in fade-in slide-in-from-top-4",children:[f.jsx(Sx,{className:"mx-auto text-red-500 mb-2"}),f.jsx("h3",{className:"text-red-800 font-bold",children:"Verification Failed"}),f.jsx("p",{className:"text-xs text-red-600",children:"The file did not match our records. Task marked as failed."})]}),v===bt.COMPLETED?f.jsxs("div",{className:"text-center p-10 bg-green-50 rounded-2xl border border-green-200",children:[f.jsx(qc,{className:"mx-auto text-green-600 w-16 h-16 mb-4"}),f.jsx("h3",{className:"text-green-800 font-bold text-xl",children:"Completed"}),f.jsx("p",{className:"text-green-600 text-sm mt-2",children:"Rewards added to wallet."})]}):v!==bt.FAILED&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:`border-2 border-dashed rounded-2xl p-10 text-center transition-all relative overflow-hidden ${p?"border-blue-500 bg-blue-50":"border-gray-300 bg-gray-50 hover:bg-gray-100"}`,children:[f.jsx("input",{type:"file",accept:l.isSpecial?".apk":".zip",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",onChange:W,title:l.isSpecial?"Upload APK file":"Upload ZIP file","aria-label":l.isSpecial?"Upload APK file":"Upload ZIP file"}),f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx("div",{className:`p-4 rounded-full mb-3 ${p?"bg-blue-100 text-blue-600":"bg-gray-200 text-gray-400"}`,children:l.isSpecial?f.jsx(Wf,{size:32}):f.jsx(PN,{size:32})}),f.jsx("p",{className:`font-bold ${p?"text-blue-700":"text-gray-600"}`,children:p?p.name:l.isSpecial?"Tap to upload APK":"Tap to upload ZIP"}),f.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Max size 50MB"})]})]}),p&&f.jsxs("div",{className:"bg-white border border-gray-200 p-4 rounded-xl flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(qc,{size:16,className:"text-green-500"}),f.jsx("span",{className:"text-sm font-bold text-gray-700",children:"File Ready"})]}),O>0?f.jsxs("div",{className:"flex items-center space-x-1 text-orange-500 font-bold text-sm bg-orange-50 px-2 py-1 rounded",children:[f.jsx(bN,{size:14}),f.jsxs("span",{children:["Analyzing... ",O,"s"]})]}):f.jsx("span",{className:"text-green-600 text-xs font-bold bg-green-50 px-2 py-1 rounded",children:"Ready to Verify"})]}),f.jsx("button",{onClick:z,disabled:E||!p||O>0,className:`w-full font-bold py-4 rounded-xl shadow-lg transition-all flex items-center justify-center space-x-2 ${E||!p||O>0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 active:scale-95"}`,children:E?f.jsx("span",{children:"Verifying..."}):f.jsx("span",{children:"Check & Verify"})})]})]})]}):f.jsx(cn,{children:"Loading..."})},nR=()=>{const{user:n,refreshUser:e}=q.useContext(Ar),{notify:t}=ei(),[s,o]=q.useState("request"),[l,d]=q.useState([]),[p,y]=q.useState(50),[v,w]=q.useState(""),[E,S]=q.useState(on.UPI),[O,H]=q.useState(""),[W,z]=q.useState(""),[re,te]=q.useState(""),[ce,ke]=q.useState(""),[ie,xe]=q.useState({acct:"",ifsc:""});q.useEffect(()=>{ge.getSettings().then(A=>y(A.minWithdrawal)),s==="history"&&n&&ge.getWithdrawals(n.uid).then(A=>d(A))},[s,n]);const R=async()=>{if(!n)return;const A=Number(v);if(!A||A<=0){t("Please enter a valid amount","error");return}if(A>n.balance){t("Insufficient Balance","error");return}if(A<p){t(`Minimum withdrawal is ${p}`,"error");return}if(!O){t("Please enter your name","error");return}let P="";if(E===on.UPI){if(!W){t("Please enter UPI ID","error");return}P=`UPI ID: ${W} | Name: ${O}`}else if(E===on.BANK){if(!ie.acct||!ie.ifsc){t("Enter Bank Account & IFSC","error");return}P=`Bank: ${ie.acct} | IFSC: ${ie.ifsc} | Name: ${O}`}else if(E===on.WHATSAPP_PAY){if(!re){t("Enter WhatsApp Number","error");return}P=`WhatsApp: ${re} | Name: ${O}`}else{if(!ce){t("Enter Email to receive code","error");return}P=`Email: ${ce} | Name: ${O} | Type: ${E}`}if(window.confirm(`Confirm withdrawal of ${A}?`))try{await ge.requestWithdrawal({uid:n.uid,amount:A,method:E,details:P}),t("Request Submitted Successfully!","success"),e(),w(""),z(""),te(""),H(""),ke(""),xe({acct:"",ifsc:""}),o("history")}catch(N){t(N.message||"Withdrawal failed","error")}},k=[{id:on.UPI,label:"UPI",icon:f.jsx(Wf,{size:18})},{id:on.BANK,label:"Bank",icon:f.jsx(SN,{size:18})},{id:on.AMAZON,label:"Amazon",icon:f.jsx(FN,{size:18})},{id:on.FLIPKART,label:"Flipkart",icon:f.jsx(kx,{size:18})},{id:on.PLAYSTORE,label:"Play Store",icon:f.jsx(Wf,{size:18})},{id:on.WHATSAPP_PAY,label:"WhatsApp",icon:f.jsx(jN,{size:18})}],C=()=>{switch(E){case on.UPI:return f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase ml-1 mb-1",children:"UPI ID"}),f.jsx("input",{className:"w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-blue-100",placeholder:"example@upi",value:W,onChange:A=>z(A.target.value)})]});case on.BANK:return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase ml-1 mb-1",children:"Account Number"}),f.jsx("input",{className:"w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-blue-100",placeholder:"Account No",value:ie.acct,onChange:A=>xe({...ie,acct:A.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase ml-1 mb-1",children:"IFSC Code"}),f.jsx("input",{className:"w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-blue-100",placeholder:"IFSC",value:ie.ifsc,onChange:A=>xe({...ie,ifsc:A.target.value})})]})]});case on.WHATSAPP_PAY:return f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase ml-1 mb-1",children:"WhatsApp Number"}),f.jsx("input",{type:"tel",className:"w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-blue-100",placeholder:"9876543210",value:re,onChange:A=>te(A.target.value)})]});default:return f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase ml-1 mb-1",children:"Email Address"}),f.jsxs("div",{className:"relative",children:[f.jsx(Hc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),f.jsx("input",{type:"email",className:"w-full border p-3 pl-10 rounded-xl outline-none focus:ring-2 focus:ring-blue-100",placeholder:"To receive code",value:ce,onChange:A=>ke(A.target.value)})]})]})}};return f.jsxs(cn,{title:"Withdrawal",showBack:!0,children:[f.jsxs("div",{className:"bg-gray-900 text-white p-6 rounded-2xl mb-6 flex justify-between items-center shadow-lg",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase",children:"Available Balance"}),f.jsxs("h2",{className:"text-3xl font-bold",children:[" ",n==null?void 0:n.balance]})]}),f.jsx("div",{className:"bg-gray-800 p-3 rounded-full",children:f.jsx(Px,{size:24,className:"text-blue-400"})})]}),f.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl mb-6",children:[f.jsx("button",{onClick:()=>o("request"),className:`flex-1 py-3 rounded-lg font-bold text-sm ${s==="request"?"bg-white shadow-sm text-gray-900":"text-gray-500"}`,children:"Request"}),f.jsx("button",{onClick:()=>o("history"),className:`flex-1 py-3 rounded-lg font-bold text-sm ${s==="history"?"bg-white shadow-sm text-gray-900":"text-gray-500"}`,children:"History"})]}),s==="request"&&f.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm space-y-5 animate-in fade-in zoom-in duration-300",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Select Method"}),f.jsx("div",{className:"grid grid-cols-3 gap-2",children:k.map(A=>f.jsxs("button",{onClick:()=>S(A.id),className:`flex flex-col items-center justify-center p-3 rounded-xl border transition-all ${E===A.id?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:[f.jsx("div",{className:"mb-1",children:A.icon}),f.jsx("span",{className:"text-[10px] font-bold",children:A.label})]},A.id))})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase ml-1 mb-1",children:"Full Name"}),f.jsx("input",{className:"w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-blue-100",placeholder:"Enter Name",value:O,onChange:A=>H(A.target.value)})]}),C(),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase ml-1 mb-1",children:"Amount"}),f.jsxs("div",{className:"relative",children:[f.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 font-bold text-gray-400",children:""}),f.jsx("input",{type:"number",className:"w-full border p-3 pl-8 rounded-xl outline-none focus:ring-2 focus:ring-blue-100 font-bold",placeholder:"0",value:v,onChange:A=>w(A.target.value)})]})]})]}),f.jsxs("button",{onClick:R,className:"w-full bg-blue-600 text-white py-4 rounded-xl font-bold shadow-lg hover:bg-blue-700 active:scale-95 transition-all flex items-center justify-center space-x-2",children:[f.jsx(LN,{size:18}),f.jsx("span",{children:"Submit Request"})]})]}),s==="history"&&f.jsx("div",{className:"space-y-3",children:l.map(A=>f.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-xs font-bold text-blue-600 bg-blue-50 px-2 py-0.5 rounded",children:A.method}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(A.requestedAt).toLocaleDateString()})]}),f.jsxs("div",{className:"text-right",children:[f.jsxs("span",{className:"block font-bold text-gray-900",children:["",A.amount]}),f.jsx("span",{className:`text-[10px] font-bold uppercase ${A.status===wt.COMPLETED?"text-green-600":"text-yellow-600"}`,children:A.status.replace(/_/g," ")})]})]}),A.status===wt.PAID_BY_ADMIN&&f.jsxs("div",{className:"mt-2 pt-2 border-t flex space-x-2",children:[f.jsx("button",{onClick:async()=>{await ge.userConfirmWithdrawal(A.id,!0),e(),o("request")},className:"flex-1 bg-green-500 text-white text-xs py-2 rounded-lg font-bold",children:"Received"}),f.jsx("button",{onClick:async()=>{await ge.userConfirmWithdrawal(A.id,!1),e(),o("request")},className:"flex-1 bg-red-100 text-red-600 text-xs py-2 rounded-lg font-bold",children:"Not Received"})]})]},A.id))})]})},rR=()=>{const[n,e]=q.useState([]);return q.useEffect(()=>{ge.getLeaderboard().then(t=>e(t))},[]),f.jsxs(cn,{title:"Top Earners",showBack:!0,children:[f.jsx("div",{className:"bg-gradient-to-b from-yellow-50 to-white pt-4 pb-2 px-4 mb-4 rounded-b-3xl -mt-4 border-b border-gray-100",children:f.jsxs("div",{className:"flex justify-center mb-6 pt-4 space-x-4 items-end",children:[n[1]&&f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 border-4 border-white shadow-md flex items-center justify-center text-2xl mb-2",children:""}),f.jsx("span",{className:"font-bold text-xs text-gray-700 mb-1",children:n[1].name}),f.jsx("span",{className:"font-bold text-blue-600 text-xs",children:n[1].balance})]}),n[0]&&f.jsxs("div",{className:"flex flex-col items-center -mt-6",children:[f.jsx(Rx,{className:"text-yellow-500 mb-2",size:32}),f.jsxs("div",{className:"w-20 h-20 rounded-full bg-yellow-100 border-4 border-white shadow-xl flex items-center justify-center text-4xl mb-2 ring-4 ring-yellow-50 relative",children:["",f.jsx("div",{className:"absolute -bottom-2 bg-yellow-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full",children:"#1"})]}),f.jsx("span",{className:"font-bold text-sm text-gray-900 mb-1",children:n[0].name}),f.jsx("span",{className:"font-bold text-blue-600",children:n[0].balance})]}),n[2]&&f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx("div",{className:"w-16 h-16 rounded-full bg-orange-100 border-4 border-white shadow-md flex items-center justify-center text-2xl mb-2",children:""}),f.jsx("span",{className:"font-bold text-xs text-gray-700 mb-1",children:n[2].name}),f.jsx("span",{className:"font-bold text-blue-600 text-xs",children:n[2].balance})]})]})}),f.jsx("div",{className:"space-y-3 px-1",children:n.slice(3).map((t,s)=>f.jsxs("div",{className:"flex items-center bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:[f.jsx("span",{className:"w-8 text-center font-bold text-gray-400 text-sm mr-2",children:s+4}),f.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 flex items-center justify-center font-bold text-blue-600 mr-3 text-sm",children:t.name.charAt(0)}),f.jsx("div",{className:"flex-1",children:f.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:t.name})}),f.jsx("div",{className:"font-mono font-bold text-blue-600 text-sm",children:t.balance})]},s+3))})]})},sR=()=>{const{user:n,refreshUser:e}=q.useContext(Ar),{notify:t}=ei(),[s,o]=q.useState(0),[l,d]=q.useState([]),[p,y]=q.useState(!0);q.useEffect(()=>{(async()=>{const S=await ge.getSettings();o(S.randomWinnerEntryFee);const O=await ge.getWinnerEntries();d(O),y(!1)})()},[]);const v=async()=>{if(n&&window.confirm(`Enter jackpot for ${s}? This will be deducted from your balance.`))try{await ge.enterRandomWinner(n.uid,s),t("Entered Successfully! Good Luck!","success"),e();const E=await ge.getWinnerEntries();d(E)}catch(E){t(E.message||"Entry failed","error")}},w=n&&l.find(E=>E.uid===n.uid);return f.jsxs(cn,{title:"Lucky Winner",showBack:!0,children:[f.jsxs("div",{className:"bg-gradient-to-br from-pink-500 to-purple-600 rounded-2xl p-8 text-white text-center mb-8 shadow-lg relative overflow-hidden",children:[f.jsx("h2",{className:"text-3xl font-black mb-2 tracking-tight",children:"Monthly Jackpot"}),f.jsxs("p",{className:"opacity-90 font-medium mb-4",children:["Entry Fee: ",s]}),w?f.jsx("div",{className:"bg-white/20 backdrop-blur-md px-6 py-2 rounded-full inline-block font-bold border border-white/30",children:"You are in! "}):f.jsxs("button",{onClick:v,className:"bg-white text-pink-600 font-bold py-3 px-8 rounded-xl shadow-lg hover:bg-gray-50 active:scale-95 transition-all",children:["Enter Now for ",s]})]}),f.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsxs("h3",{className:"font-bold text-gray-800",children:["Participants (",l.length,")"]}),f.jsx("span",{className:"text-xs text-gray-500",children:"This Month"})]}),p?f.jsx("div",{className:"text-center py-4 text-gray-400",children:"Loading..."}):l.length===0?f.jsx("div",{className:"text-center py-4 text-gray-400",children:"No entries yet. Be the first!"}):f.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 gap-4",children:l.map((E,S)=>f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center font-bold text-gray-600 text-xs mb-1",children:E.avatarChar||E.name[0]}),f.jsx("span",{className:"text-[10px] text-gray-500 truncate w-full text-center",children:E.name.split(" ")[0]})]},S))})]}),f.jsx("p",{className:"text-center text-xs text-gray-400 mt-6 leading-relaxed px-4",children:"Winners are selected randomly by the system at the end of the month. The prize pool depends on total entries."})]})},iR=()=>{const{user:n,refreshUser:e}=q.useContext(Ar);if(!n)return null;const t=async()=>{await ge.logout(),e()},s=es(),o=()=>{s("/profile/edit")};return f.jsxs(cn,{title:"Profile",showBack:!0,children:[f.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-6 flex items-center space-x-4",children:[f.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 text-2xl font-bold",children:n.name.charAt(0).toUpperCase()}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n.name}),f.jsx("p",{className:"text-gray-500 text-sm",children:n.email})]}),f.jsx("div",{className:"ml-auto",children:f.jsx("button",{onClick:o,className:"text-sm text-blue-600 font-bold bg-blue-50 px-3 py-2 rounded-md",children:"Edit"})})]}),f.jsx("h3",{className:"text-sm font-bold text-gray-500 mb-2 uppercase tracking-wide ml-1",children:"Account Overview"}),f.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 divide-y divide-gray-100 shadow-sm overflow-hidden mb-6",children:[f.jsxs("div",{className:"p-4 flex justify-between items-center hover:bg-gray-50 transition",children:[f.jsx("span",{className:"text-gray-600 font-medium",children:"Current Balance"}),f.jsxs("span",{className:"font-bold text-gray-900",children:[n.balance," Coins"]})]}),f.jsxs("div",{className:"p-4 flex justify-between items-center hover:bg-gray-50 transition",children:[f.jsx("span",{className:"text-gray-600 font-medium",children:"Account Level"}),f.jsxs("span",{className:"bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full text-xs font-bold",children:["Lvl ",n.level]})]}),f.jsxs("div",{className:"p-4 flex justify-between items-center hover:bg-gray-50 transition",children:[f.jsx("span",{className:"text-gray-600 font-medium",children:"Lifetime Earnings"}),f.jsxs("span",{className:"font-bold text-green-600",children:[n.lifetimeEarnings," Coins"]})]}),f.jsxs("div",{className:"p-4 flex justify-between items-center hover:bg-gray-50 transition",children:[f.jsxs("span",{className:"text-gray-600 font-medium flex items-center",children:[f.jsx(Jp,{size:14,className:"mr-1 text-cyan-500"})," Lifetime Diamonds"]}),f.jsx("span",{className:"font-bold text-cyan-600",children:n.lifetimeDiamondEarnings})]})]}),f.jsx("h3",{className:"text-sm font-bold text-gray-500 mb-2 uppercase tracking-wide ml-1",children:"Referral"}),f.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-2xl p-6 text-white shadow-lg mb-6",children:[f.jsx("p",{className:"text-purple-100 text-sm mb-1",children:"Your Referral Code"}),f.jsxs("div",{className:"flex justify-between items-end",children:[f.jsx("h2",{className:"text-3xl font-mono font-bold tracking-wider",children:n.referralCode}),f.jsx("button",{onClick:()=>{navigator.clipboard.writeText(n.referralCode),alert("Copied!")},className:"bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg text-xs font-bold transition backdrop-blur-sm",children:"Copy"})]})]}),f.jsxs("button",{onClick:t,className:"w-full py-4 text-red-500 font-bold bg-white rounded-xl border border-red-100 hover:bg-red-50 transition flex items-center justify-center space-x-2 shadow-sm",children:[f.jsx(Ax,{size:20}),f.jsx("span",{children:"Logout"})]}),f.jsx("p",{className:"text-center text-xs text-gray-400 mt-6",children:"Version 1.1.0  Zearn App"})]})},oR=()=>{const n=es(),{refreshUser:e}=q.useContext(Ar),{notify:t}=ei(),[s,o]=q.useState(()=>localStorage.getItem("zearn_notifications")!=="false");q.useEffect(()=>{localStorage.setItem("zearn_notifications",s.toString())},[s]);const l=async()=>{window.confirm("Are you sure you want to logout?")&&(await ge.logout(),await e())},d=v=>{o(!s),t(s?"Notifications Disabled":"Notifications Enabled","success")},p=({isOn:v})=>f.jsx("div",{className:`w-12 h-7 flex items-center rounded-full p-1 transition-colors duration-300 ${v?"bg-blue-600":"bg-gray-200"}`,children:f.jsx("div",{className:`bg-white w-5 h-5 rounded-full shadow-md transform transition-transform duration-300 ${v?"translate-x-5":"translate-x-0"}`})}),y=({icon:v,label:w,action:E,isToggle:S,toggleState:O})=>f.jsxs("div",{onClick:E,className:"flex items-center justify-between p-4 bg-white rounded-xl shadow-sm border border-gray-100 cursor-pointer active:scale-[0.99] transition hover:bg-gray-50",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"p-2 bg-gray-50 rounded-lg text-gray-700",children:v}),f.jsx("span",{className:"font-bold text-gray-800",children:w})]}),S?f.jsx(p,{isOn:O}):f.jsx(Id,{className:"text-gray-400",size:20})]});return f.jsx(cn,{title:"Settings",showBack:!0,children:f.jsxs("div",{className:"space-y-3",children:[f.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase ml-2 mb-2 mt-2",children:"General"}),f.jsx(y,{icon:f.jsx(wl,{size:20}),label:"My Profile",action:()=>n("/profile")}),f.jsx(y,{icon:f.jsx(wl,{size:20}),label:"Edit Profile",action:()=>n("/profile/edit")}),f.jsx(y,{icon:f.jsx(wl,{size:20}),label:"About Us",action:()=>n("/about")}),f.jsx(y,{icon:f.jsx(IN,{size:20}),label:"Notifications",isToggle:!0,toggleState:s,action:()=>d()}),f.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase ml-2 mb-2 mt-6",children:"Support"}),f.jsx(y,{icon:f.jsx(Nx,{size:20}),label:"Privacy Policy",action:()=>alert("Privacy Policy: User data is processed securely.")}),f.jsx("div",{className:"pt-6",children:f.jsxs("button",{onClick:l,className:"w-full flex items-center justify-center space-x-2 bg-red-50 text-red-600 py-4 rounded-xl font-bold hover:bg-red-100 transition",children:[f.jsx(Ax,{size:20}),f.jsx("span",{children:"Logout"})]})})]})})},aR=()=>{const{user:n,refreshUser:e}=q.useContext(Ar),t=es(),{notify:s}=ei(),[o,l]=q.useState({name:"",mobile:"",gender:"Male",dob:"",district:"",state:"",country:"India"}),[d,p]=q.useState(!1);if(q.useEffect(()=>{n&&l({name:n.name||"",mobile:n.mobile||"",gender:n.gender||"Male",dob:n.dob||"",district:n.district||"",state:n.state||"",country:n.country||"India"})},[n]),!n)return null;const y=async()=>{p(!0);try{await ge.updateUser(n.uid,o),await e(),s("Profile updated","success"),t("/profile")}catch(v){console.error("Update failed",v),s("Update failed","error")}finally{p(!1)}};return f.jsx(cn,{title:"Edit Profile",showBack:!0,children:f.jsxs("div",{className:"space-y-4 bg-white p-6 rounded-2xl shadow-sm",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Full Name"}),f.jsx("input",{value:o.name,onChange:v=>l({...o,name:v.target.value}),className:"w-full p-3 mt-1 rounded-xl border"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Mobile"}),f.jsx("input",{value:o.mobile,onChange:v=>l({...o,mobile:v.target.value.replace(/\D/g,"")}),className:"w-full p-3 mt-1 rounded-xl border"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Gender"}),f.jsxs("select",{value:o.gender,onChange:v=>l({...o,gender:v.target.value}),className:"w-full p-3 mt-1 rounded-xl border",children:[f.jsx("option",{children:"Male"}),f.jsx("option",{children:"Female"}),f.jsx("option",{children:"Other"})]})]}),f.jsxs("div",{className:"flex space-x-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"DOB"}),f.jsx("input",{type:"date",value:o.dob,onChange:v=>l({...o,dob:v.target.value}),className:"w-full p-3 mt-1 rounded-xl border"})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"District"}),f.jsx("input",{value:o.district,onChange:v=>l({...o,district:v.target.value}),className:"w-full p-3 mt-1 rounded-xl border"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"State"}),f.jsx("input",{value:o.state,onChange:v=>l({...o,state:v.target.value}),className:"w-full p-3 mt-1 rounded-xl border"})]}),f.jsx("div",{className:"pt-4",children:f.jsx("button",{onClick:y,disabled:d,className:"w-full py-3 bg-blue-600 text-white rounded-xl font-bold",children:d?"Saving...":"Save Changes"})})]})})},lR=()=>f.jsx(cn,{title:"About Us",showBack:!0,children:f.jsxs("div",{className:"space-y-4 p-2",children:[f.jsx("h2",{className:"text-2xl font-bold",children:"About Us  Zearn App"}),f.jsx("p",{children:"Zearn is a smart rewards and productivity platform built to help users earn, learn, and grow  all in one place."}),f.jsxs("p",{children:["We created Zearn with one simple idea: ",f.jsx("strong",{children:" Your time should be valuable, and your effort should be rewarded."})]}),f.jsx("p",{children:"With Zearn, users can complete simple daily activities, explore tasks, play games, watch content, and participate in app-based challenges to earn digital rewards  while enjoying a smooth, secure, and transparent experience."}),f.jsx("h3",{className:"font-bold",children:" What Zearn offers"}),f.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[f.jsx("li",{children:" Easy and secure login"}),f.jsx("li",{children:" Real-time balance and earnings tracking"}),f.jsx("li",{children:" Daily tasks and special reward activities"}),f.jsx("li",{children:" Games and interactive challenges"}),f.jsx("li",{children:" App-based missions and content watching tasks"}),f.jsx("li",{children:" Fair reward system with clear rules"}),f.jsx("li",{children:" Personal profile and history tracking"}),f.jsx("li",{children:" Simple and verified withdrawal system"})]}),f.jsx("h3",{className:"font-bold",children:" Safety & Transparency"}),f.jsx("p",{children:"Zearn is built with a strong focus on:"}),f.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[f.jsx("li",{children:"Secure authentication"}),f.jsx("li",{children:"Fair reward calculation"}),f.jsx("li",{children:"Activity validation to prevent misuse"}),f.jsx("li",{children:"Clear task rules and earning limits"})]}),f.jsx("p",{children:"Your progress, earnings, and activity records are safely stored and managed using modern cloud technology."}),f.jsx("h3",{className:"font-bold",children:" Our mission"}),f.jsx("p",{children:"Our mission is to create a platform where learning, digital engagement, and rewards come together  in a simple and trustworthy way. We want Zearn to be more than just an earning app. We want it to be a place where users stay motivated, explore new digital experiences, and build better daily habits."}),f.jsx("h3",{className:"font-bold",children:" Why Zearn?"}),f.jsx("p",{children:"Because we believe: Small actions, done every day, can create real value. Zearn turns everyday digital activities into meaningful progress."}),f.jsx("p",{className:"font-bold",children:"Zearn  Earn smarter. Learn better. Grow every day. "})]})}),uR=()=>{const{notify:n}=ei(),[e,t]=q.useState("withdrawals"),[s,o]=q.useState([]),[l,d]=q.useState([]),[p,y]=q.useState([]),[v,w]=q.useState({}),[E,S]=q.useState({tapCount:5,adminPassword:"admin",dailyClaimLimit:10,minWithdrawal:50,randomWinnerEntryFee:20}),[O,H]=q.useState(!1),[W,z]=q.useState(!1),[re,te]=q.useState(!1),[ce,ke]=q.useState(null),[ie,xe]=q.useState({isSpecial:!1}),[R,k]=q.useState(null),[C,A]=q.useState([]),[P,N]=q.useState(null);q.useEffect(()=>{I()},[e]);const I=async()=>{try{const[U,ue,Te,qe,mt]=await Promise.all([ge.getWithdrawals(),ge.getAllUsers(),ge.getAllTasks(!0),ge.getSettings(),ge.getTaskStats()]);o(U),d(ue),y(Te),S(qe),w(mt)}catch(U){console.error("Data refresh failed",U)}},ye=async(U,ue)=>{ue===wt.REJECTED&&!window.confirm("Are you sure you want to REJECT this request? Balance will be refunded.")||(await ge.adminUpdateWithdrawal(U,ue),n("Request updated","info"),I())},Le=U=>{const ue=l.find(Te=>Te.uid===U.uid);ue&&N({req:U,user:ue})},De=async U=>{if(!P||!window.confirm("Confirm marking this request as PAID?"))return;const{user:ue,req:Te}=P,qe=Te.details;navigator.clipboard.writeText(qe).then(()=>{n("Copied Details","success")}),await ge.adminUpdateWithdrawal(Te.id,wt.PAID_BY_ADMIN),N(null),I(),n("Marked as Paid","success")},$e=U=>l.find(ue=>ue.uid===U),Z=async()=>{if(window.confirm("Are you sure you want to save these settings?")){z(!0);try{await ge.updateSettings(E),n("Configuration Saved Successfully","success"),await I()}catch(U){console.error(U),n("Failed to save settings: "+(U.message||"Unknown error"),"error")}finally{z(!1)}}},de=(U,ue)=>{S(Te=>({...Te,[U]:ue}))},ae=async U=>{window.confirm("Are you sure you want to DELETE this task?")&&(await ge.deleteTask(U),n("Task deleted","info"),setTimeout(I,500))},V=U=>{ke(U),xe({...U}),te(!0)},Q=()=>{ke(null),xe({isSpecial:!1,title:"",description:"",link:"",reward:0,diamondReward:0,password:"",packageName:""}),te(!0)},Ce=async()=>{if(!ie.title)return n("Title required","error");if(!ie.link)return n("Link required","error");if(ie.reward===void 0||ie.reward<0)return n("Valid Reward required","error");if(window.confirm(ce?"Update this task?":"Create this task?")){H(!0);try{ce?(await ge.updateTask(ce.id,ie),n(`Task "${ie.title}" updated`,"success")):(await ge.createTask(ie),n(`Task "${ie.title}" created`,"success")),await I(),te(!1),xe({})}catch(U){console.error(U),n(U.message||"Failed to save task.","error")}finally{H(!1)}}},Ne=async U=>{const ue=await ge.getUserTasks(U.uid),Te=await ge.getAllTasks(),qe=ue.map(mt=>{const jn=Te.find(ti=>ti.id===mt.taskId);return{...mt,title:jn?jn.title:"Unknown Task",reward:jn?jn.reward:0}});A(qe),k(U)},Ve=async U=>{window.confirm(`Are you sure you want to ${U.isBanned?"UNBAN":"BAN"} ${U.name}?`)&&(await ge.toggleUserBan(U.uid,!!U.isBanned),n(`User ${U.isBanned?"Unbanned":"Banned"}`,"success"),I())};return f.jsxs(cn,{children:[f.jsx("div",{className:"flex space-x-1 mb-6 bg-gray-100 p-1 rounded-xl overflow-x-auto no-scrollbar",children:["withdrawals","users","tasks","settings"].map(U=>f.jsx("button",{onClick:()=>t(U),className:`flex-1 min-w-[100px] py-2.5 rounded-lg font-bold text-sm capitalize transition-all whitespace-nowrap ${e===U?"bg-white text-blue-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:U},U))}),e==="withdrawals"&&f.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-2",children:[s.length===0&&f.jsx("p",{className:"text-center text-gray-400 py-10 bg-white rounded-xl",children:"No pending requests."}),f.jsx("div",{className:"hidden md:block overflow-x-auto bg-white rounded-xl shadow-sm border border-gray-100",children:f.jsxs("table",{className:"w-full text-left text-sm",children:[f.jsx("thead",{className:"bg-gray-50 text-gray-600 font-bold border-b border-gray-100",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-4",children:"User"}),f.jsx("th",{className:"p-4",children:"Amount"}),f.jsx("th",{className:"p-4",children:"Method"}),f.jsx("th",{className:"p-4",children:"Details"}),f.jsx("th",{className:"p-4",children:"Status"}),f.jsx("th",{className:"p-4",children:"Action"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-50",children:s.map(U=>{const ue=$e(U.uid);return f.jsxs("tr",{children:[f.jsxs("td",{className:"p-4",children:[f.jsx("div",{className:"font-bold",children:(ue==null?void 0:ue.name)||"Unknown"}),f.jsx("div",{className:"text-xs text-gray-400",children:ue==null?void 0:ue.email})]}),f.jsx("td",{className:"p-4 font-mono font-bold text-blue-600",children:U.amount}),f.jsx("td",{className:"p-4",children:f.jsx("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs font-bold",children:U.method})}),f.jsx("td",{className:"p-4 text-xs font-mono max-w-xs truncate",title:U.details,children:U.details}),f.jsx("td",{className:"p-4",children:f.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-1 rounded ${U.status===wt.PENDING?"bg-yellow-50 text-yellow-600":U.status===wt.COMPLETED?"bg-green-50 text-green-600":U.status===wt.PAID_BY_ADMIN?"bg-blue-50 text-blue-600":"bg-red-50 text-red-600"}`,children:U.status.replace(/_/g," ")})}),f.jsx("td",{className:"p-4",children:U.status===wt.PENDING&&f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("button",{onClick:()=>Le(U),className:"bg-gray-900 text-white p-2 rounded-lg hover:bg-black",title:"Process Payment",children:f.jsx(lv,{size:14})}),f.jsx("button",{onClick:()=>ye(U.id,wt.REJECTED),className:"bg-red-50 text-red-600 p-2 rounded-lg hover:bg-red-100",title:"Reject",children:f.jsx(Oi,{size:14})})]})})]},U.id)})})]})}),f.jsx("div",{className:"md:hidden space-y-3",children:s.map(U=>{var Te;const ue=$e(U.uid);return f.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:[f.jsxs("div",{className:"flex justify-between items-start mb-3",children:[f.jsxs("div",{className:"flex items-start space-x-3",children:[f.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-full flex items-center justify-center text-blue-600 mt-1 font-bold",children:((Te=ue==null?void 0:ue.name)==null?void 0:Te[0])||"U"}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-gray-900 text-sm",children:(ue==null?void 0:ue.name)||"Unknown User"}),f.jsxs("p",{className:"text-xs text-blue-600 font-medium",children:[U.amount," Coins"]})]})]}),f.jsx("div",{className:"text-right",children:f.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-1 rounded block mb-1 ${U.status===wt.PENDING?"bg-yellow-50 text-yellow-600":U.status===wt.COMPLETED?"bg-green-50 text-green-600":U.status===wt.PAID_BY_ADMIN?"bg-blue-50 text-blue-600":"bg-red-50 text-red-600"}`,children:U.status.replace(/_/g," ")})})]}),f.jsx("div",{className:"bg-gray-50 p-3 rounded-lg text-xs text-gray-700 mb-3 font-mono break-all border border-gray-100",children:U.details}),U.status===wt.PENDING&&f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("button",{onClick:()=>ye(U.id,wt.REJECTED),className:"flex-1 bg-red-50 text-red-600 py-2.5 rounded-lg font-bold text-xs hover:bg-red-100 transition",children:"Reject"}),f.jsxs("button",{onClick:()=>Le(U),className:"flex-[2] bg-gray-900 text-white py-2.5 rounded-lg font-bold text-xs hover:bg-black transition flex items-center justify-center shadow-lg shadow-blue-100",children:[f.jsx(lv,{size:12,className:"mr-1"})," Process Payment"]})]})]},U.id)})})]}),e==="users"&&f.jsxs("div",{className:"space-y-3 animate-in fade-in slide-in-from-bottom-2",children:[f.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl text-blue-800 text-sm font-medium mb-2 border border-blue-100 flex justify-between items-center",children:[f.jsx("span",{children:"Total Registered Users"}),f.jsx("span",{className:"font-bold text-xl",children:l.length})]}),l.map(U=>{var ue;return f.jsxs("div",{className:`bg-white p-4 rounded-xl shadow-sm border ${U.isBanned?"border-red-200 bg-red-50":"border-gray-100"} flex items-center justify-between`,children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${U.isBanned?"bg-red-200 text-red-600":"bg-gray-100 text-gray-500"}`,children:(ue=U.name[0])==null?void 0:ue.toUpperCase()}),f.jsxs("div",{children:[f.jsxs("h4",{className:"font-bold text-gray-800 text-sm flex items-center",children:[U.name,U.isBanned&&f.jsx("span",{className:"ml-2 bg-red-600 text-white text-[10px] px-1.5 rounded uppercase",children:"Banned"})]}),f.jsxs("div",{className:"flex space-x-2 text-xs text-gray-500",children:[f.jsxs("span",{children:[U.balance," Coins"]}),f.jsx("span",{children:""}),f.jsxs("span",{children:[U.diamonds," Diamonds"]})]})]})]}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("button",{onClick:()=>Ve(U),className:`p-2 rounded-lg transition ${U.isBanned?"bg-green-100 text-green-600 hover:bg-green-200":"bg-red-50 text-red-400 hover:bg-red-100 hover:text-red-600"}`,title:U.isBanned?"Unban User":"Ban User",children:U.isBanned?f.jsx(WN,{size:14}):f.jsx(EN,{size:14})}),f.jsxs("button",{onClick:()=>Ne(U),className:"text-xs bg-blue-50 text-blue-600 px-3 py-2 rounded-lg font-bold hover:bg-blue-100 transition flex items-center space-x-1",children:[f.jsx(RN,{size:14})," ",f.jsx("span",{children:"View"})]})]})]},U.uid)})]}),e==="tasks"&&f.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-2",children:[f.jsxs("button",{onClick:Q,className:"w-full py-3 mb-4 bg-gray-900 text-white rounded-xl font-bold flex items-center justify-center space-x-2 shadow-md hover:bg-black transition",children:[f.jsx(VN,{size:18})," ",f.jsx("span",{children:"Assign New Task"})]}),f.jsx("div",{className:"space-y-3",children:p.map(U=>{const ue=v[U.id]||{completed:0,failed:0};return f.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[f.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:U.title}),U.isSpecial&&f.jsx("span",{className:"bg-purple-100 text-purple-700 text-[10px] font-bold px-2 py-0.5 rounded",children:"Special"})]}),f.jsx("p",{className:"text-xs text-gray-500 mb-1 line-clamp-1",children:U.description}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsxs("div",{className:"text-xs font-mono text-green-600 bg-green-50 inline-block px-1.5 py-0.5 rounded border border-green-100",children:[" ",U.reward]}),U.diamondReward>0&&f.jsxs("div",{className:"text-xs font-mono text-cyan-600 bg-cyan-50 inline-block px-1.5 py-0.5 rounded border border-cyan-100",children:[" ",U.diamondReward]})]})]}),f.jsxs("div",{className:"flex space-x-1",children:[f.jsx("button",{onClick:()=>V(U),className:"text-gray-400 hover:text-blue-600 p-2 bg-gray-50 rounded-lg hover:bg-blue-50 transition",title:"Edit Task",children:f.jsx(BN,{size:16})}),f.jsx("button",{onClick:()=>ae(U.id),className:"text-gray-400 hover:text-red-600 p-2 bg-gray-50 rounded-lg hover:bg-red-50 transition",title:"Delete Task",children:f.jsx(qN,{size:16})})]})]}),f.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 flex justify-between items-center text-xs text-gray-500",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(TN,{size:12,className:"text-gray-400"}),f.jsx("span",{children:"Stats:"})]}),f.jsxs("div",{className:"flex space-x-3 font-bold",children:[f.jsxs("span",{className:"text-green-600",children:[ue.completed," Done"]}),f.jsxs("span",{className:"text-red-400",children:[ue.failed," Failed"]})]})]})]},U.id)})})]}),e==="settings"&&f.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2",children:[f.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100",children:[f.jsxs("div",{className:"flex items-center mb-4 text-gray-800",children:[f.jsx("div",{className:"bg-green-100 p-2 rounded-lg mr-3 text-green-600",children:f.jsx(AN,{size:20})}),f.jsx("h3",{className:"font-bold",children:"App Economy"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-200",children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Daily Bonus (Coins)"}),f.jsx("input",{type:"number",placeholder:"Daily Bonus (Coins)",value:E.dailyClaimLimit,onChange:U=>de("dailyClaimLimit",Number(U.target.value)||0),className:"w-full bg-white border border-gray-200 p-3 rounded-lg focus:ring-2 focus:ring-green-200 outline-none font-bold text-gray-800"})]}),f.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-200",children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Min Withdrawal ()"}),f.jsx("input",{type:"number",placeholder:"50",value:E.minWithdrawal,onChange:U=>de("minWithdrawal",Number(U.target.value)||0),className:"w-full bg-white border border-gray-200 p-3 rounded-lg focus:ring-2 focus:ring-green-200 outline-none font-bold text-gray-800"})]}),f.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-200 md:col-span-2",children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Jackpot Entry Fee ()"}),f.jsx("input",{type:"number",placeholder:"Amount",value:E.randomWinnerEntryFee,onChange:U=>de("randomWinnerEntryFee",Number(U.target.value)||0),className:"w-full bg-white border border-gray-200 p-3 rounded-lg focus:ring-2 focus:ring-green-200 outline-none font-bold text-gray-800"})]})]})]}),f.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100",children:[f.jsxs("div",{className:"flex items-center mb-4 text-gray-800",children:[f.jsx("div",{className:"bg-red-100 p-2 rounded-lg mr-3 text-red-600",children:f.jsx(Nx,{size:20})}),f.jsx("h3",{className:"font-bold",children:"Security & Access"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-200",children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Admin Dashboard Password"}),f.jsx("input",{type:"text",placeholder:"Enter password",value:E.adminPassword,onChange:U=>de("adminPassword",U.target.value),className:"w-full bg-white border border-gray-200 p-3 rounded-lg focus:ring-2 focus:ring-red-200 outline-none font-mono text-gray-800 tracking-wide"})]}),f.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-200",children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Login Tap Secret (Taps on 'Z')"}),f.jsx("input",{type:"number",placeholder:"Number of taps",value:E.tapCount,onChange:U=>de("tapCount",Number(U.target.value)||0),className:"w-full bg-white border border-gray-200 p-3 rounded-lg focus:ring-2 focus:ring-red-200 outline-none font-bold text-gray-800"})]})]})]}),f.jsxs("button",{onClick:Z,disabled:W,className:`w-full bg-gray-900 text-white py-4 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center space-x-2 ${W?"opacity-75 cursor-wait":"hover:bg-black active:scale-95"}`,children:[W?f.jsx(Wc,{className:"animate-spin",size:20}):f.jsx(qc,{size:20}),f.jsx("span",{children:W?"Saving...":"Save Configuration"})]})]}),P&&f.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center p-0 sm:p-4",children:f.jsxs("div",{className:"bg-white w-full max-w-sm rounded-t-2xl sm:rounded-2xl p-6 shadow-2xl animate-in slide-in-from-bottom duration-300",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h3",{className:"text-xl font-bold",children:"Process Payment"}),f.jsx("button",{onClick:()=>N(null),title:"Close",children:f.jsx(Oi,{className:"text-gray-400 hover:text-gray-600"})})]}),f.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl mb-6 border border-blue-100",children:[f.jsx("p",{className:"text-xs text-blue-500 font-bold uppercase mb-2",children:"Payment Details"}),f.jsx("div",{className:"text-sm font-mono bg-white p-3 rounded-lg border border-blue-200 text-gray-800 break-all leading-relaxed shadow-sm",children:P.req.details}),f.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-blue-200/50",children:[f.jsx("span",{className:"font-bold text-gray-600",children:"Amount to Pay"}),f.jsxs("span",{className:"font-bold text-blue-700 text-2xl",children:["",P.req.amount]})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("p",{className:"text-xs text-center text-gray-400",children:"Action will mark request as 'Paid by Admin'"}),f.jsxs("button",{onClick:()=>De(),className:"w-full bg-gray-900 text-white py-4 rounded-xl font-bold flex items-center justify-center space-x-2 hover:bg-black transition shadow-lg",children:[f.jsx(qc,{size:18}),f.jsx("span",{children:"Copy Details & Mark Paid"})]})]})]})}),re&&f.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-6 shadow-2xl animate-in zoom-in-95 duration-200",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h3",{className:"text-xl font-bold",children:ce?"Edit Task":"Assign New Task"}),f.jsx("button",{onClick:()=>te(!1),title:"Close",children:f.jsx(Oi,{className:"text-gray-400 hover:text-gray-600"})})]}),f.jsxs("div",{className:"space-y-3 max-h-[70vh] overflow-y-auto pr-2",children:[f.jsx("input",{className:"w-full border p-3 rounded-xl",placeholder:"Task Title",value:ie.title||"",onChange:U=>xe({...ie,title:U.target.value})}),f.jsx("textarea",{className:"w-full border p-3 rounded-xl",placeholder:"Description",value:ie.description||"",onChange:U=>xe({...ie,description:U.target.value})}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsx("input",{className:"w-full border p-3 rounded-xl",type:"number",placeholder:"Reward ",value:ie.reward||"",onChange:U=>xe({...ie,reward:parseFloat(U.target.value)})}),f.jsx("input",{className:"w-full border p-3 rounded-xl",type:"number",placeholder:"Reward ",value:ie.diamondReward||"",onChange:U=>xe({...ie,diamondReward:parseFloat(U.target.value)})})]}),f.jsx("input",{className:"w-full border p-3 rounded-xl",placeholder:"Link URL",value:ie.link||"",onChange:U=>xe({...ie,link:U.target.value})}),f.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 p-3 rounded-xl border border-gray-100",children:[f.jsx("input",{type:"checkbox",checked:ie.isSpecial,placeholder:"Is Special Task?",onChange:U=>xe({...ie,isSpecial:U.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),f.jsx("label",{className:"font-bold text-sm text-gray-700",children:"Is Special Task?"})]}),ie.isSpecial?f.jsx("input",{className:"w-full border p-3 rounded-xl font-mono text-sm",placeholder:"Package Name (e.g. com.game.app)",value:ie.packageName||"",onChange:U=>xe({...ie,packageName:U.target.value})}):f.jsx("input",{className:"w-full border p-3 rounded-xl font-mono text-sm",placeholder:"ZIP Password (verification)",value:ie.password||"",onChange:U=>xe({...ie,password:U.target.value})}),f.jsxs("button",{onClick:Ce,disabled:O,className:`w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition shadow-lg flex justify-center items-center space-x-2 ${O?"opacity-70 cursor-wait":""}`,children:[O&&f.jsx(Wc,{className:"animate-spin",size:18}),f.jsx("span",{children:O?"Saving...":ce?"Update Task":"Create Task"})]})]})]})}),R&&f.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-white w-full max-w-lg rounded-2xl p-6 shadow-2xl animate-in zoom-in-95 duration-200 max-h-[85vh] flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-100 pb-3",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"User Profile"}),f.jsx("p",{className:"text-xs text-gray-500",children:"View details and task status"})]}),f.jsx("button",{onClick:()=>k(null),className:"p-1 hover:bg-gray-100 rounded-full",title:"Close",children:f.jsx(Oi,{className:"text-gray-400 hover:text-gray-600"})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[f.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl mb-6 space-y-2 border border-blue-100",children:[f.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[f.jsx(wl,{size:16,className:"text-blue-500"}),f.jsx("span",{className:"font-bold text-gray-700",children:R.name}),R.isBanned&&f.jsx("span",{className:"text-xs bg-red-600 text-white px-2 rounded font-bold uppercase",children:"Banned"})]}),f.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[f.jsx(Hc,{size:16,className:"text-blue-500"}),f.jsx("span",{className:"text-gray-600",children:R.email})]}),f.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[f.jsx(Cx,{size:16,className:"text-blue-500"}),f.jsx("span",{className:"text-gray-600",children:R.mobile||"N/A"})]}),f.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[f.jsx(DN,{size:16,className:"text-blue-500"}),f.jsx("span",{className:"text-gray-600",children:[R.district,R.state,R.country].filter(Boolean).join(", ")})]}),f.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[f.jsx(kN,{size:16,className:"text-blue-500"}),f.jsxs("span",{className:"text-gray-600",children:["DOB: ",R.dob||"N/A"]})]})]}),f.jsx("h4",{className:"font-bold text-gray-800 text-sm mb-3",children:"Task History"}),f.jsxs("div",{className:"space-y-2",children:[C.length===0&&f.jsx("p",{className:"text-center text-gray-400 py-4 text-sm bg-gray-50 rounded-lg",children:"No tasks started yet."}),C.map((U,ue)=>f.jsxs("div",{className:"bg-white p-3 rounded-lg flex justify-between items-center border border-gray-200",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-bold text-sm text-gray-800",children:U.title}),f.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[f.jsx("span",{className:"text-xs text-gray-500",children:new Date(U.startedAt).toLocaleDateString()}),f.jsxs("span",{className:"text-xs bg-gray-100 border border-gray-200 px-1.5 rounded text-gray-600",children:["+",U.reward]})]})]}),f.jsx("div",{children:U.status===bt.COMPLETED?f.jsx("span",{className:"bg-green-100 text-green-700 text-[10px] font-bold px-2 py-1 rounded",children:"Completed"}):U.status===bt.FAILED?f.jsx("span",{className:"bg-red-100 text-red-700 text-[10px] font-bold px-2 py-1 rounded",children:"Failed"}):f.jsx("span",{className:"bg-yellow-100 text-yellow-700 text-[10px] font-bold px-2 py-1 rounded",children:"Pending"})})]},ue))]})]})]})})]})},Ar=Gc.createContext({user:null,refreshUser:()=>{}}),cR=()=>{const[n,e]=q.useState(null),[t,s]=q.useState(!0),o=async()=>{try{console.log("Refreshing user...");const l=await ge.getCurrentUser();console.log("Current user:",l),e(l)}catch(l){console.error("User fetch error",l)}};return q.useEffect(()=>{(async()=>{try{console.log("Initializing app..."),await ge.initializeAdmin();try{const d=await Ex(fl);if(d&&d.user){const p=d.user.email||"",y=await ge.checkUserExists(p);y&&await ge.loginUser(y)}}catch(d){console.debug("No redirect result during init",d)}console.log("Admin initialized"),await o()}catch(d){console.error("Initialization error:",d)}s(!1)})()},[]),t?f.jsx("div",{className:"flex h-screen items-center justify-center bg-blue-50 font-bold text-blue-600",children:"Loading Zearn..."}):f.jsx(GN,{children:f.jsx(KN,{children:f.jsx(Ar.Provider,{value:{user:n,refreshUser:o},children:f.jsx(HE,{children:f.jsxs($E,{children:[f.jsx(Jt,{path:"/",element:f.jsx(Wn,{to:"/onboarding"})}),f.jsx(Jt,{path:"/onboarding",element:f.jsx(QN,{})}),f.jsx(Jt,{path:"/login",element:f.jsx(JN,{})}),f.jsx(Jt,{path:"/home",element:n?f.jsx(ZN,{}):f.jsx(Wn,{to:"/login"})}),f.jsx(Jt,{path:"/tasks/:type",element:n?f.jsx(eR,{}):f.jsx(Wn,{to:"/login"})}),f.jsx(Jt,{path:"/task-check/:taskId",element:n?f.jsx(tR,{}):f.jsx(Wn,{to:"/login"})}),f.jsx(Jt,{path:"/withdrawal",element:n?f.jsx(nR,{}):f.jsx(Wn,{to:"/login"})}),f.jsx(Jt,{path:"/leaderboard",element:n?f.jsx(rR,{}):f.jsx(Wn,{to:"/login"})}),f.jsx(Jt,{path:"/winner",element:n?f.jsx(sR,{}):f.jsx(Wn,{to:"/login"})}),f.jsx(Jt,{path:"/profile",element:n?f.jsx(iR,{}):f.jsx(Wn,{to:"/login"})}),f.jsx(Jt,{path:"/profile/edit",element:n?f.jsx(aR,{}):f.jsx(Wn,{to:"/login"})}),f.jsx(Jt,{path:"/settings",element:n?f.jsx(oR,{}):f.jsx(Wn,{to:"/login"})}),f.jsx(Jt,{path:"/about",element:f.jsx(lR,{})}),f.jsx(Jt,{path:"/admin",element:n!=null&&n.isAdmin?f.jsx(uR,{}):f.jsx(Wn,{to:"/home"})})]})})})})})},Vx=document.getElementById("root");if(!Vx)throw new Error("Could not find root element to mount to");const dR=X1.createRoot(Vx);dR.render(f.jsx(Gc.StrictMode,{children:f.jsx(cR,{})}));
